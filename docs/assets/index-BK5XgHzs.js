var ng=Object.defineProperty;var sg=(t,e,r)=>e in t?ng(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var S=(t,e,r)=>(sg(t,typeof e!="symbol"?e+"":e,r),r);import{g as Cr,C as Fh,B as j,s as gs,a as ig,v as qi,t as ag,f as og,c as Jr,b as bt,i as en,m as cg,r as ug,d as z,h as zh,e as lg,j as nc,k as hg,l as dg,n as Mc,o as fg,p as pg,q as Kh,W as jh,u as Wh,w as ol,x as Vh,y as Gh,z as Hi,A as Jh,D as cs,E as yg,F as gg,P as cl,T as mg,S as wg,G as bg,H as Xh,I as vg,J as _g,K as ri,L as Eg,M as Sg}from"./index-CxjNvwIP.js";const Ts=()=>{throw new Error("Unimplemented")};globalThis.crypto??(globalThis.crypto={});var Ih;(Ih=globalThis.crypto).subtle??(Ih.subtle={});var Dh;(Dh=globalThis.crypto.subtle).generateKey??(Dh.generateKey=Ts);var Nh;(Nh=globalThis.crypto.subtle).importKey??(Nh.importKey=Ts);var Lh;(Lh=globalThis.crypto.subtle).exportKey??(Lh.exportKey=Ts);var qh;(qh=globalThis.crypto.subtle).digest??(qh.digest=Ts);var Hh;(Hh=globalThis.crypto.subtle).sign??(Hh.sign=Ts);function Zh(t,e){return function(){return t.apply(e,arguments)}}const{toString:Ag}=Object.prototype,{getPrototypeOf:Oc}=Object,Fi=(t=>e=>{const r=Ag.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),or=t=>(t=t.toLowerCase(),e=>Fi(e)===t),zi=t=>e=>typeof e===t,{isArray:Ln}=Array,ms=zi("undefined");function Tg(t){return t!==null&&!ms(t)&&t.constructor!==null&&!ms(t.constructor)&&Ct(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Yh=or("ArrayBuffer");function xg(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Yh(t.buffer),e}const Rg=zi("string"),Ct=zi("function"),Qh=zi("number"),Ki=t=>t!==null&&typeof t=="object",kg=t=>t===!0||t===!1,hi=t=>{if(Fi(t)!=="object")return!1;const e=Oc(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Bg=or("Date"),Pg=or("File"),Ug=or("Blob"),$g=or("FileList"),Mg=t=>Ki(t)&&Ct(t.pipe),Og=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ct(t.append)&&((e=Fi(t))==="formdata"||e==="object"&&Ct(t.toString)&&t.toString()==="[object FormData]"))},Cg=or("URLSearchParams"),Ig=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xs(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),Ln(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let o;for(n=0;n<a;n++)o=i[n],e.call(null,t[o],o,t)}}function ed(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const td=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,rd=t=>!ms(t)&&t!==td;function sc(){const{caseless:t}=rd(this)&&this||{},e={},r=(n,s)=>{const i=t&&ed(e,s)||s;hi(e[i])&&hi(n)?e[i]=sc(e[i],n):hi(n)?e[i]=sc({},n):Ln(n)?e[i]=n.slice():e[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&xs(arguments[n],r);return e}const Dg=(t,e,r,{allOwnKeys:n}={})=>(xs(e,(s,i)=>{r&&Ct(s)?t[i]=Zh(s,r):t[i]=s},{allOwnKeys:n}),t),Ng=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Lg=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},qg=(t,e,r,n)=>{let s,i,a;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&Oc(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Hg=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},Fg=t=>{if(!t)return null;if(Ln(t))return t;let e=t.length;if(!Qh(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},zg=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Oc(Uint8Array)),Kg=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},jg=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Wg=or("HTMLFormElement"),Vg=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),ul=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Gg=or("RegExp"),nd=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};xs(r,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(n[i]=a||s)}),Object.defineProperties(t,n)},Jg=t=>{nd(t,(e,r)=>{if(Ct(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Ct(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Xg=(t,e)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Ln(t)?n(t):n(String(t).split(e)),r},Zg=()=>{},Yg=(t,e)=>(t=+t,Number.isFinite(t)?t:e),mo="abcdefghijklmnopqrstuvwxyz",ll="0123456789",sd={DIGIT:ll,ALPHA:mo,ALPHA_DIGIT:mo+mo.toUpperCase()+ll},Qg=(t=16,e=sd.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function e0(t){return!!(t&&Ct(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const t0=t=>{const e=new Array(10),r=(n,s)=>{if(Ki(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const i=Ln(n)?[]:{};return xs(n,(a,o)=>{const u=r(a,s+1);!ms(u)&&(i[o]=u)}),e[s]=void 0,i}}return n};return r(t,0)},r0=or("AsyncFunction"),n0=t=>t&&(Ki(t)||Ct(t))&&Ct(t.then)&&Ct(t.catch),M={isArray:Ln,isArrayBuffer:Yh,isBuffer:Tg,isFormData:Og,isArrayBufferView:xg,isString:Rg,isNumber:Qh,isBoolean:kg,isObject:Ki,isPlainObject:hi,isUndefined:ms,isDate:Bg,isFile:Pg,isBlob:Ug,isRegExp:Gg,isFunction:Ct,isStream:Mg,isURLSearchParams:Cg,isTypedArray:zg,isFileList:$g,forEach:xs,merge:sc,extend:Dg,trim:Ig,stripBOM:Ng,inherits:Lg,toFlatObject:qg,kindOf:Fi,kindOfTest:or,endsWith:Hg,toArray:Fg,forEachEntry:Kg,matchAll:jg,isHTMLForm:Wg,hasOwnProperty:ul,hasOwnProp:ul,reduceDescriptors:nd,freezeMethods:Jg,toObjectSet:Xg,toCamelCase:Vg,noop:Zg,toFiniteNumber:Yg,findKey:ed,global:td,isContextDefined:rd,ALPHABET:sd,generateString:Qg,isSpecCompliantForm:e0,toJSONObject:t0,isAsyncFn:r0,isThenable:n0};function ee(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}M.inherits(ee,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:M.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const id=ee.prototype,ad={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ad[t]={value:t}});Object.defineProperties(ee,ad);Object.defineProperty(id,"isAxiosError",{value:!0});ee.from=(t,e,r,n,s,i)=>{const a=Object.create(id);return M.toFlatObject(t,a,function(u){return u!==Error.prototype},o=>o!=="isAxiosError"),ee.call(a,t.message,e,r,n,s),a.cause=t,a.name=t.name,i&&Object.assign(a,i),a};const s0=null;function ic(t){return M.isPlainObject(t)||M.isArray(t)}function od(t){return M.endsWith(t,"[]")?t.slice(0,-2):t}function hl(t,e,r){return t?t.concat(e).map(function(s,i){return s=od(s),!r&&i?"["+s+"]":s}).join(r?".":""):e}function i0(t){return M.isArray(t)&&!t.some(ic)}const a0=M.toFlatObject(M,{},null,function(e){return/^is[A-Z]/.test(e)});function ji(t,e,r){if(!M.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=M.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,k){return!M.isUndefined(k[E])});const n=r.metaTokens,s=r.visitor||p,i=r.dots,a=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&M.isSpecCompliantForm(e);if(!M.isFunction(s))throw new TypeError("visitor must be a function");function f(m){if(m===null)return"";if(M.isDate(m))return m.toISOString();if(!u&&M.isBlob(m))throw new ee("Blob is not supported. Use a Buffer instead.");return M.isArrayBuffer(m)||M.isTypedArray(m)?u&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function p(m,E,k){let $=m;if(m&&!k&&typeof m=="object"){if(M.endsWith(E,"{}"))E=n?E:E.slice(0,-2),m=JSON.stringify(m);else if(M.isArray(m)&&i0(m)||(M.isFileList(m)||M.endsWith(E,"[]"))&&($=M.toArray(m)))return E=od(E),$.forEach(function(U,B){!(M.isUndefined(U)||U===null)&&e.append(a===!0?hl([E],B,i):a===null?E:E+"[]",f(U))}),!1}return ic(m)?!0:(e.append(hl(k,E,i),f(m)),!1)}const d=[],A=Object.assign(a0,{defaultVisitor:p,convertValue:f,isVisitable:ic});function T(m,E){if(!M.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+E.join("."));d.push(m),M.forEach(m,function($,I){(!(M.isUndefined($)||$===null)&&s.call(e,$,M.isString(I)?I.trim():I,E,A))===!0&&T($,E?E.concat(I):[I])}),d.pop()}}if(!M.isObject(t))throw new TypeError("data must be an object");return T(t),e}function dl(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Cc(t,e){this._pairs=[],t&&ji(t,this,e)}const cd=Cc.prototype;cd.append=function(e,r){this._pairs.push([e,r])};cd.toString=function(e){const r=e?function(n){return e.call(this,n,dl)}:dl;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function o0(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ud(t,e,r){if(!e)return t;const n=r&&r.encode||o0,s=r&&r.serialize;let i;if(s?i=s(e,r):i=M.isURLSearchParams(e)?e.toString():new Cc(e,r).toString(n),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}let fl=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){M.forEach(this.handlers,function(n){n!==null&&e(n)})}};const ld={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},c0=typeof URLSearchParams<"u"?URLSearchParams:Cc,u0=typeof FormData<"u"?FormData:null,l0=typeof Blob<"u"?Blob:null,h0={isBrowser:!0,classes:{URLSearchParams:c0,FormData:u0,Blob:l0},protocols:["http","https","file","blob","url","data"]},hd=typeof window<"u"&&typeof document<"u",d0=(t=>hd&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),f0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",p0=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hd,hasStandardBrowserEnv:d0,hasStandardBrowserWebWorkerEnv:f0},Symbol.toStringTag,{value:"Module"})),rr={...p0,...h0};function y0(t,e){return ji(t,new rr.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return rr.isNode&&M.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function g0(t){return M.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function m0(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}function dd(t){function e(r,n,s,i){let a=r[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),u=i>=r.length;return a=!a&&M.isArray(s)?s.length:a,u?(M.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!o):((!s[a]||!M.isObject(s[a]))&&(s[a]=[]),e(r,n,s[a],i)&&M.isArray(s[a])&&(s[a]=m0(s[a])),!o)}if(M.isFormData(t)&&M.isFunction(t.entries)){const r={};return M.forEachEntry(t,(n,s)=>{e(g0(n),s,r,0)}),r}return null}function w0(t,e,r){if(M.isString(t))try{return(e||JSON.parse)(t),M.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Rs={transitional:ld,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=M.isObject(e);if(i&&M.isHTMLForm(e)&&(e=new FormData(e)),M.isFormData(e))return s?JSON.stringify(dd(e)):e;if(M.isArrayBuffer(e)||M.isBuffer(e)||M.isStream(e)||M.isFile(e)||M.isBlob(e))return e;if(M.isArrayBufferView(e))return e.buffer;if(M.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return y0(e,this.formSerializer).toString();if((o=M.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return ji(o?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),w0(e)):e}],transformResponse:[function(e){const r=this.transitional||Rs.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(e&&M.isString(e)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?ee.from(o,ee.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rr.classes.FormData,Blob:rr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};M.forEach(["delete","get","head","post","put","patch"],t=>{Rs.headers[t]={}});const b0=M.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),v0=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||e[r]&&b0[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},pl=Symbol("internals");function es(t){return t&&String(t).trim().toLowerCase()}function di(t){return t===!1||t==null?t:M.isArray(t)?t.map(di):String(t)}function _0(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const E0=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function wo(t,e,r,n,s){if(M.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!M.isString(e)){if(M.isString(n))return e.indexOf(n)!==-1;if(M.isRegExp(n))return n.test(e)}}function S0(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function A0(t,e){const r=M.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,i,a){return this[n].call(this,e,s,i,a)},configurable:!0})})}let It=class{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function i(o,u,f){const p=es(u);if(!p)throw new Error("header name must be a non-empty string");const d=M.findKey(s,p);(!d||s[d]===void 0||f===!0||f===void 0&&s[d]!==!1)&&(s[d||u]=di(o))}const a=(o,u)=>M.forEach(o,(f,p)=>i(f,p,u));return M.isPlainObject(e)||e instanceof this.constructor?a(e,r):M.isString(e)&&(e=e.trim())&&!E0(e)?a(v0(e),r):e!=null&&i(r,e,n),this}get(e,r){if(e=es(e),e){const n=M.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return _0(s);if(M.isFunction(r))return r.call(this,s,n);if(M.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=es(e),e){const n=M.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||wo(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function i(a){if(a=es(a),a){const o=M.findKey(n,a);o&&(!r||wo(n,n[o],o,r))&&(delete n[o],s=!0)}}return M.isArray(e)?e.forEach(i):i(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!e||wo(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const r=this,n={};return M.forEach(this,(s,i)=>{const a=M.findKey(n,i);if(a){r[a]=di(s),delete r[i];return}const o=e?S0(i):String(i).trim();o!==i&&delete r[i],r[o]=di(s),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return M.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&M.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[pl]=this[pl]={accessors:{}}).accessors,s=this.prototype;function i(a){const o=es(a);n[o]||(A0(s,a),n[o]=!0)}return M.isArray(e)?e.forEach(i):i(e),this}};It.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);M.reduceDescriptors(It.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});M.freezeMethods(It);function bo(t,e){const r=this||Rs,n=e||r,s=It.from(n.headers);let i=n.data;return M.forEach(t,function(o){i=o.call(r,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function fd(t){return!!(t&&t.__CANCEL__)}function ks(t,e,r){ee.call(this,t??"canceled",ee.ERR_CANCELED,e,r),this.name="CanceledError"}M.inherits(ks,ee,{__CANCEL__:!0});function T0(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new ee("Request failed with status code "+r.status,[ee.ERR_BAD_REQUEST,ee.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const x0=rr.hasStandardBrowserEnv?{write(t,e,r,n,s,i){const a=[t+"="+encodeURIComponent(e)];M.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),M.isString(n)&&a.push("path="+n),M.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function R0(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function k0(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function pd(t,e){return t&&!R0(e)?k0(t,e):e}const B0=rr.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function s(i){let a=i;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(a){const o=M.isString(a)?s(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}();function P0(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function U0(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(u){const f=Date.now(),p=n[i];a||(a=f),r[s]=u,n[s]=f;let d=i,A=0;for(;d!==s;)A+=r[d++],d=d%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),f-a<e)return;const T=p&&f-p;return T?Math.round(A*1e3/T):void 0}}function yl(t,e){let r=0;const n=U0(50,250);return s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,o=i-r,u=n(o),f=i<=a;r=i;const p={loaded:i,total:a,progress:a?i/a:void 0,bytes:o,rate:u||void 0,estimated:u&&a&&f?(a-i)/u:void 0,event:s};p[e?"download":"upload"]=!0,t(p)}}const $0=typeof XMLHttpRequest<"u",M0=$0&&function(t){return new Promise(function(r,n){let s=t.data;const i=It.from(t.headers).normalize();let{responseType:a,withXSRFToken:o}=t,u;function f(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}let p;if(M.isFormData(s)){if(rr.hasStandardBrowserEnv||rr.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((p=i.getContentType())!==!1){const[E,...k]=p?p.split(";").map($=>$.trim()).filter(Boolean):[];i.setContentType([E||"multipart/form-data",...k].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const E=t.auth.username||"",k=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(E+":"+k))}const A=pd(t.baseURL,t.url);d.open(t.method.toUpperCase(),ud(A,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function T(){if(!d)return;const E=It.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),$={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:E,config:t,request:d};T0(function(U){r(U),f()},function(U){n(U),f()},$),d=null}if("onloadend"in d?d.onloadend=T:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(T)},d.onabort=function(){d&&(n(new ee("Request aborted",ee.ECONNABORTED,t,d)),d=null)},d.onerror=function(){n(new ee("Network Error",ee.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let k=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const $=t.transitional||ld;t.timeoutErrorMessage&&(k=t.timeoutErrorMessage),n(new ee(k,$.clarifyTimeoutError?ee.ETIMEDOUT:ee.ECONNABORTED,t,d)),d=null},rr.hasStandardBrowserEnv&&(o&&M.isFunction(o)&&(o=o(t)),o||o!==!1&&B0(A))){const E=t.xsrfHeaderName&&t.xsrfCookieName&&x0.read(t.xsrfCookieName);E&&i.set(t.xsrfHeaderName,E)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&M.forEach(i.toJSON(),function(k,$){d.setRequestHeader($,k)}),M.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),a&&a!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",yl(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",yl(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=E=>{d&&(n(!E||E.type?new ks(null,t,d):E),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));const m=P0(A);if(m&&rr.protocols.indexOf(m)===-1){n(new ee("Unsupported protocol "+m+":",ee.ERR_BAD_REQUEST,t));return}d.send(s||null)})},ac={http:s0,xhr:M0};M.forEach(ac,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const gl=t=>`- ${t}`,O0=t=>M.isFunction(t)||t===null||t===!1,yd={getAdapter:t=>{t=M.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let i=0;i<e;i++){r=t[i];let a;if(n=r,!O0(r)&&(n=ac[(a=String(r)).toLowerCase()],n===void 0))throw new ee(`Unknown adapter '${a}'`);if(n)break;s[a||"#"+i]=n}if(!n){const i=Object.entries(s).map(([o,u])=>`adapter ${o} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=e?i.length>1?`since :
`+i.map(gl).join(`
`):" "+gl(i[0]):"as no adapter specified";throw new ee("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:ac};function vo(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ks(null,t)}function ml(t){return vo(t),t.headers=It.from(t.headers),t.data=bo.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),yd.getAdapter(t.adapter||Rs.adapter)(t).then(function(n){return vo(t),n.data=bo.call(t,t.transformResponse,n),n.headers=It.from(n.headers),n},function(n){return fd(n)||(vo(t),n&&n.response&&(n.response.data=bo.call(t,t.transformResponse,n.response),n.response.headers=It.from(n.response.headers))),Promise.reject(n)})}const wl=t=>t instanceof It?{...t}:t;function xn(t,e){e=e||{};const r={};function n(f,p,d){return M.isPlainObject(f)&&M.isPlainObject(p)?M.merge.call({caseless:d},f,p):M.isPlainObject(p)?M.merge({},p):M.isArray(p)?p.slice():p}function s(f,p,d){if(M.isUndefined(p)){if(!M.isUndefined(f))return n(void 0,f,d)}else return n(f,p,d)}function i(f,p){if(!M.isUndefined(p))return n(void 0,p)}function a(f,p){if(M.isUndefined(p)){if(!M.isUndefined(f))return n(void 0,f)}else return n(void 0,p)}function o(f,p,d){if(d in e)return n(f,p);if(d in t)return n(void 0,f)}const u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(f,p)=>s(wl(f),wl(p),!0)};return M.forEach(Object.keys(Object.assign({},t,e)),function(p){const d=u[p]||s,A=d(t[p],e[p],p);M.isUndefined(A)&&d!==o||(r[p]=A)}),r}const gd="1.6.8",Ic={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ic[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const bl={};Ic.transitional=function(e,r,n){function s(i,a){return"[Axios v"+gd+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,o)=>{if(e===!1)throw new ee(s(a," has been removed"+(r?" in "+r:"")),ee.ERR_DEPRECATED);return r&&!bl[a]&&(bl[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,a,o):!0}};function C0(t,e,r){if(typeof t!="object")throw new ee("options must be an object",ee.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],a=e[i];if(a){const o=t[i],u=o===void 0||a(o,i,t);if(u!==!0)throw new ee("option "+i+" must be "+u,ee.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ee("Unknown option "+i,ee.ERR_BAD_OPTION)}}const oc={assertOptions:C0,validators:Ic},br=oc.validators;let jr=class{constructor(e){this.defaults=e,this.interceptors={request:new fl,response:new fl}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=xn(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&oc.assertOptions(n,{silentJSONParsing:br.transitional(br.boolean),forcedJSONParsing:br.transitional(br.boolean),clarifyTimeoutError:br.transitional(br.boolean)},!1),s!=null&&(M.isFunction(s)?r.paramsSerializer={serialize:s}:oc.assertOptions(s,{encode:br.function,serialize:br.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&M.merge(i.common,i[r.method]);i&&M.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),r.headers=It.concat(a,i);const o=[];let u=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(r)===!1||(u=u&&E.synchronous,o.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let p,d=0,A;if(!u){const m=[ml.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,f),A=m.length,p=Promise.resolve(r);d<A;)p=p.then(m[d++],m[d++]);return p}A=o.length;let T=r;for(d=0;d<A;){const m=o[d++],E=o[d++];try{T=m(T)}catch(k){E.call(this,k);break}}try{p=ml.call(this,T)}catch(m){return Promise.reject(m)}for(d=0,A=f.length;d<A;)p=p.then(f[d++],f[d++]);return p}getUri(e){e=xn(this.defaults,e);const r=pd(e.baseURL,e.url);return ud(r,e.params,e.paramsSerializer)}};M.forEach(["delete","get","head","options"],function(e){jr.prototype[e]=function(r,n){return this.request(xn(n||{},{method:e,url:r,data:(n||{}).data}))}});M.forEach(["post","put","patch"],function(e){function r(n){return function(i,a,o){return this.request(xn(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}jr.prototype[e]=r(),jr.prototype[e+"Form"]=r(!0)});let I0=class md{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(o=>{n.subscribe(o),i=o}).then(s);return a.cancel=function(){n.unsubscribe(i)},a},e(function(i,a,o){n.reason||(n.reason=new ks(i,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new md(function(s){e=s}),cancel:e}}};function D0(t){return function(r){return t.apply(null,r)}}function N0(t){return M.isObject(t)&&t.isAxiosError===!0}const cc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cc).forEach(([t,e])=>{cc[e]=t});function wd(t){const e=new jr(t),r=Zh(jr.prototype.request,e);return M.extend(r,jr.prototype,e,{allOwnKeys:!0}),M.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return wd(xn(t,s))},r}const me=wd(Rs);me.Axios=jr;me.CanceledError=ks;me.CancelToken=I0;me.isCancel=fd;me.VERSION=gd;me.toFormData=ji;me.AxiosError=ee;me.Cancel=me.CanceledError;me.all=function(e){return Promise.all(e)};me.spread=D0;me.isAxiosError=N0;me.mergeConfig=xn;me.AxiosHeaders=It;me.formToJSON=t=>dd(M.isHTMLForm(t)?new FormData(t):t);me.getAdapter=yd.getAdapter;me.HttpStatusCode=cc;me.default=me;var bd={};function Ht(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var L0=Ht;Ht.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Ht.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Ht.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};Ht.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Ht.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};Ht.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};Ht.prototype.start=Ht.prototype.try;Ht.prototype.errors=function(){return this._errors};Ht.prototype.attempts=function(){return this._attempts};Ht.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var s=this._errors[n],i=s.message,a=(t[i]||0)+1;t[i]=a,a>=r&&(e=s,r=a)}return e};(function(t){var e=L0;t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in r)n[s]=r[s];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],a=0;a<n.retries;a++)i.push(this.createTimeout(a,n));return r&&r.forever&&!i.length&&i.push(this.createTimeout(a,n)),i.sort(function(o,u){return o-u}),i},t.createTimeout=function(r,n){var s=n.randomize?Math.random()+1:1,i=Math.round(s*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return i=Math.min(i,n.maxTimeout),i},t.wrap=function(r,n,s){if(n instanceof Array&&(s=n,n=null),!s){s=[];for(var i in r)typeof r[i]=="function"&&s.push(i)}for(var a=0;a<s.length;a++){var o=s[a],u=r[o];r[o]=(function(p){var d=t.operation(n),A=Array.prototype.slice.call(arguments,1),T=A.pop();A.push(function(m){d.retry(m)||(m&&(arguments[0]=d.mainError()),T.apply(this,arguments))}),d.attempt(function(){p.apply(r,A)})}).bind(r,u),r[o].options=n}}})(bd);var q0=bd,H0=q0;function F0(t,e){function r(n,s){var i=e||{},a;"randomize"in i||(i.randomize=!0),a=H0.operation(i);function o(p){s(p||new Error("Aborted"))}function u(p,d){if(p.bail){o(p);return}a.retry(p)?i.onRetry&&i.onRetry(p,d):s(a.mainError())}function f(p){var d;try{d=t(o,p)}catch(A){u(A,p);return}Promise.resolve(d).then(n).catch(function(T){u(T,p)})}a.attempt(f)}return new Promise(r)}var z0=F0;const Ir=Cr(z0);function K0(t){class e extends t.arbundles.DataItem{constructor(s,i,a){super((a==null?void 0:a.dataIsRawTransaction)===!0?Buffer.from(s):i.arbundles.createData(s,i.tokenConfig.getSigner(),{...a,anchor:(a==null?void 0:a.anchor)??Fh.randomBytes(32).toString("base64").slice(0,32)}).getRaw());S(this,"Irys");S(this,"signer");this.Irys=i,this.signer=i.tokenConfig.getSigner()}sign(){return super.sign(this.signer)}get size(){return this.getRaw().length}async uploadWithReceipt(s){return(await this.Irys.uploader.uploadTransaction(this,{...s,getReceiptSignature:!0})).data}async upload(s){return(await this.Irys.uploader.uploadTransaction(this,s)).data}async getPrice(){return this.Irys.utils.getPrice(this.Irys.tokenConfig.name,this.size)}async isValid(){return t.arbundles.DataItem.verify(this.getRaw())}}return e}var vd={exports:{}},Dc={},Nc={};Object.defineProperty(Nc,"__esModule",{value:!0});function j0(t){var e=4,r=t.length,n=r%e;if(!n)return t;var s=r,i=e-n,a=r+i,o=Buffer.alloc(a);for(o.write(t);i--;)o.write("=",s++);return o.toString()}Nc.default=j0;Object.defineProperty(Dc,"__esModule",{value:!0});var W0=Nc;function _d(t,e){return e===void 0&&(e="utf8"),Buffer.isBuffer(t)?uc(t.toString("base64")):uc(Buffer.from(t,e).toString("base64"))}function V0(t,e){return e===void 0&&(e="utf8"),Buffer.from(Lc(t),"base64").toString(e)}function Lc(t){return t=t.toString(),W0.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function uc(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function G0(t){return Buffer.from(Lc(t),"base64")}var qn=_d;qn.encode=_d;qn.decode=V0;qn.toBase64=Lc;qn.fromBase64=uc;qn.toBuffer=G0;Dc.default=qn;(function(t){t.exports=Dc.default,t.exports.default=t.exports})(vd);var J0=vd.exports;const J=Cr(J0);j.set({DECIMAL_PLACES:50});const vl=t=>new Promise(e=>setTimeout(e,t));class ut{constructor(e,r,n){S(this,"api");S(this,"token");S(this,"tokenConfig");S(this,"arbundles");this.api=e,this.token=r,this.tokenConfig=n,this.arbundles=this.tokenConfig.irys.arbundles}static checkAndThrow(e,r,n){if(e!=null&&e.status&&!(n??[]).includes(e.status)&&e.status!=200)throw new Error(`HTTP Error: ${r}: ${e.status} ${typeof e.data!="string"?e.statusText:e.data}`)}async getNonce(){const e=await this.api.get(`/account/withdrawals/${this.tokenConfig.name}?address=${this.tokenConfig.address}`);return ut.checkAndThrow(e,"Getting withdrawal nonce"),e.data}async getBalance(e){const r=await this.api.get(`/account/balance/${this.tokenConfig.name}?address=${e}`);return ut.checkAndThrow(r,"Getting balance"),new j(r.data.balance)}async getBundlerAddress(e){const r=await this.api.get("/info");ut.checkAndThrow(r,"Getting Bundler address");const n=r.data.addresses[e];if(!n)throw new Error(`Specified bundler does not support token ${e}`);return n}async getPrice(e,r){const n=await this.api.get(`/price/${e}/${r}`);return ut.checkAndThrow(n,"Getting storage cost"),new j(n.data)}async estimateFolderPrice(e){Array.isArray(e)&&(e={fileCount:e.length,totalBytes:e.reduce((a,o)=>a+o,0)});const r=e.headerSizeAvg??this.arbundles.createData("",this.tokenConfig.getSigner()).getRaw().length,s=(await this.getPrice(this.tokenConfig.name,r)).multipliedBy(e.fileCount);return(await this.getPrice(this.tokenConfig.name,e.totalBytes)).plus(s).decimalPlaces(0)}toAtomic(e){return new j(e).multipliedBy(this.tokenConfig.base[1])}fromAtomic(e){return new j(e).dividedBy(this.tokenConfig.base[1])}async confirmationPoll(e,r=30){if(this.tokenConfig.isSlow)return;r<0&&(r=0);let n,s;const i=async()=>{for(;!s;){if(await this.tokenConfig.getTx(e).then(f=>f==null?void 0:f.confirmed).catch(f=>(n=f,!1)))return!0;await vl(1e3)}return!1},a=async()=>(await vl(r*1e3),s=!0,"RACE"),o=await Promise.race([a(),i()]);return o==="RACE"?(console.warn(`Tx ${e} didn't finalize after ${r} seconds ${n?` - ${n}`:""}`),n):o}unitConverter(e){return new j(e).dividedBy(this.tokenConfig.base[1])}async verifyReceipt(e){return ut.verifyReceipt(this.arbundles,e)}static async verifyReceipt(e,r){const{id:n,deadlineHeight:s,timestamp:i,public:a,signature:o,version:u}=r,f=await e.deepHash([e.stringToBuffer("Bundlr"),e.stringToBuffer(u),e.stringToBuffer(n),e.stringToBuffer(s.toString()),e.stringToBuffer(i.toString())]);return await e.getCryptoDriver().verify(a,f,J.toBuffer(o))}async getReceipt(e){var o,u,f,p,d,A;const r=`query {
      transactions(ids: ["${e}"]) {
        edges {
          node {
            receipt {
              signature
              timestamp
              version
              deadlineHeight
            }
          }
        }
      }
    }`,n=await Ir(async()=>await this.api.post("/graphql",{query:r},{headers:{"content-type":"application/json"},validateStatus:T=>T===200})),s=(A=(d=(p=(f=(u=(o=n==null?void 0:n.data)==null?void 0:o.data)==null?void 0:u.transactions)==null?void 0:f.edges)==null?void 0:p.at(0))==null?void 0:d.node)==null?void 0:A.receipt;if(!s)throw new Error(`Missing required receipt data from node for tx: ${e}`);const a={public:(await this.api.get("/public")).data,version:s.version,id:e,timestamp:s.timestamp,validatorSignatures:[],signature:s.signature,deadlineHeight:s.deadlineHeight,verify:async()=>!1};return a.verify=async()=>this.verifyReceipt(a),a}}async function X0(t,e,r){const n=t.tokenConfig,{deepHash:s,stringToBuffer:i}=n.irys.arbundles,o={publicKey:await n.getPublicKey(),currency:t.token,amount:new j(r).toString(),nonce:await t.getNonce(),signature:"",sigType:n.getSigner().signatureType},u=await s([i(o.currency),i(o.amount.toString()),i(o.nonce.toString())]);Buffer.isBuffer(o.publicKey)||(o.publicKey=Buffer.from(o.publicKey));const f=await n.sign(u),p=await n.verify(o.publicKey,u,f);o.publicKey=J.encode(o.publicKey),o.signature=J.encode(Buffer.from(f));const d=J.toBuffer(o.publicKey),A=J.toBuffer(o.signature),T=await s([i(o.currency),i(o.amount.toString()),i(o.nonce.toString())]),m=await n.verify(d,T,A),E=n.ownerToAddress(n.name=="arweave"?J.decode(o.publicKey):J.toBuffer(o.publicKey))===n.address;if(!(p||m||E))throw new Error(`Internal withdrawal validation failed - please report this!
Debug Info:${JSON.stringify(o)}`);const k=await e.post("/account/withdraw",o);if(k.status===202){const $=k.data.tx_id,I=await t.confirmationPoll($);if(I!==!0)throw new Error(`Unable to confirm withdrawal tx ${$} ${I?I==null?void 0:I.toString():""}`)}else ut.checkAndThrow(k,"Withdrawing balance");return k.data}function Ed(t,e){return function(){return t.apply(e,arguments)}}const{toString:Z0}=Object.prototype,{getPrototypeOf:qc}=Object,Wi=(t=>e=>{const r=Z0.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),cr=t=>(t=t.toLowerCase(),e=>Wi(e)===t),Vi=t=>e=>typeof e===t,{isArray:Hn}=Array,ws=Vi("undefined");function Y0(t){return t!==null&&!ws(t)&&t.constructor!==null&&!ws(t.constructor)&&Dt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Sd=cr("ArrayBuffer");function Q0(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Sd(t.buffer),e}const em=Vi("string"),Dt=Vi("function"),Ad=Vi("number"),Gi=t=>t!==null&&typeof t=="object",tm=t=>t===!0||t===!1,fi=t=>{if(Wi(t)!=="object")return!1;const e=qc(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},rm=cr("Date"),nm=cr("File"),sm=cr("Blob"),im=cr("FileList"),am=t=>Gi(t)&&Dt(t.pipe),om=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Dt(t.append)&&((e=Wi(t))==="formdata"||e==="object"&&Dt(t.toString)&&t.toString()==="[object FormData]"))},cm=cr("URLSearchParams"),um=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bs(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),Hn(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let o;for(n=0;n<a;n++)o=i[n],e.call(null,t[o],o,t)}}function Td(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const xd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,Rd=t=>!ws(t)&&t!==xd;function lc(){const{caseless:t}=Rd(this)&&this||{},e={},r=(n,s)=>{const i=t&&Td(e,s)||s;fi(e[i])&&fi(n)?e[i]=lc(e[i],n):fi(n)?e[i]=lc({},n):Hn(n)?e[i]=n.slice():e[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Bs(arguments[n],r);return e}const lm=(t,e,r,{allOwnKeys:n}={})=>(Bs(e,(s,i)=>{r&&Dt(s)?t[i]=Ed(s,r):t[i]=s},{allOwnKeys:n}),t),hm=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),dm=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},fm=(t,e,r,n)=>{let s,i,a;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&qc(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},pm=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},ym=t=>{if(!t)return null;if(Hn(t))return t;let e=t.length;if(!Ad(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},gm=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&qc(Uint8Array)),mm=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},wm=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},bm=cr("HTMLFormElement"),vm=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),_l=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),_m=cr("RegExp"),kd=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Bs(r,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(n[i]=a||s)}),Object.defineProperties(t,n)},Em=t=>{kd(t,(e,r)=>{if(Dt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Dt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Sm=(t,e)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Hn(t)?n(t):n(String(t).split(e)),r},Am=()=>{},Tm=(t,e)=>(t=+t,Number.isFinite(t)?t:e),_o="abcdefghijklmnopqrstuvwxyz",El="0123456789",Bd={DIGIT:El,ALPHA:_o,ALPHA_DIGIT:_o+_o.toUpperCase()+El},xm=(t=16,e=Bd.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function Rm(t){return!!(t&&Dt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const km=t=>{const e=new Array(10),r=(n,s)=>{if(Gi(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const i=Hn(n)?[]:{};return Bs(n,(a,o)=>{const u=r(a,s+1);!ws(u)&&(i[o]=u)}),e[s]=void 0,i}}return n};return r(t,0)},Bm=cr("AsyncFunction"),Pm=t=>t&&(Gi(t)||Dt(t))&&Dt(t.then)&&Dt(t.catch),O={isArray:Hn,isArrayBuffer:Sd,isBuffer:Y0,isFormData:om,isArrayBufferView:Q0,isString:em,isNumber:Ad,isBoolean:tm,isObject:Gi,isPlainObject:fi,isUndefined:ws,isDate:rm,isFile:nm,isBlob:sm,isRegExp:_m,isFunction:Dt,isStream:am,isURLSearchParams:cm,isTypedArray:gm,isFileList:im,forEach:Bs,merge:lc,extend:lm,trim:um,stripBOM:hm,inherits:dm,toFlatObject:fm,kindOf:Wi,kindOfTest:cr,endsWith:pm,toArray:ym,forEachEntry:mm,matchAll:wm,isHTMLForm:bm,hasOwnProperty:_l,hasOwnProp:_l,reduceDescriptors:kd,freezeMethods:Em,toObjectSet:Sm,toCamelCase:vm,noop:Am,toFiniteNumber:Tm,findKey:Td,global:xd,isContextDefined:Rd,ALPHABET:Bd,generateString:xm,isSpecCompliantForm:Rm,toJSONObject:km,isAsyncFn:Bm,isThenable:Pm};function te(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}O.inherits(te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:O.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Pd=te.prototype,Ud={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ud[t]={value:t}});Object.defineProperties(te,Ud);Object.defineProperty(Pd,"isAxiosError",{value:!0});te.from=(t,e,r,n,s,i)=>{const a=Object.create(Pd);return O.toFlatObject(t,a,function(u){return u!==Error.prototype},o=>o!=="isAxiosError"),te.call(a,t.message,e,r,n,s),a.cause=t,a.name=t.name,i&&Object.assign(a,i),a};const Um=null;function hc(t){return O.isPlainObject(t)||O.isArray(t)}function $d(t){return O.endsWith(t,"[]")?t.slice(0,-2):t}function Sl(t,e,r){return t?t.concat(e).map(function(s,i){return s=$d(s),!r&&i?"["+s+"]":s}).join(r?".":""):e}function $m(t){return O.isArray(t)&&!t.some(hc)}const Mm=O.toFlatObject(O,{},null,function(e){return/^is[A-Z]/.test(e)});function Ji(t,e,r){if(!O.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=O.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,k){return!O.isUndefined(k[E])});const n=r.metaTokens,s=r.visitor||p,i=r.dots,a=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&O.isSpecCompliantForm(e);if(!O.isFunction(s))throw new TypeError("visitor must be a function");function f(m){if(m===null)return"";if(O.isDate(m))return m.toISOString();if(!u&&O.isBlob(m))throw new te("Blob is not supported. Use a Buffer instead.");return O.isArrayBuffer(m)||O.isTypedArray(m)?u&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function p(m,E,k){let $=m;if(m&&!k&&typeof m=="object"){if(O.endsWith(E,"{}"))E=n?E:E.slice(0,-2),m=JSON.stringify(m);else if(O.isArray(m)&&$m(m)||(O.isFileList(m)||O.endsWith(E,"[]"))&&($=O.toArray(m)))return E=$d(E),$.forEach(function(U,B){!(O.isUndefined(U)||U===null)&&e.append(a===!0?Sl([E],B,i):a===null?E:E+"[]",f(U))}),!1}return hc(m)?!0:(e.append(Sl(k,E,i),f(m)),!1)}const d=[],A=Object.assign(Mm,{defaultVisitor:p,convertValue:f,isVisitable:hc});function T(m,E){if(!O.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+E.join("."));d.push(m),O.forEach(m,function($,I){(!(O.isUndefined($)||$===null)&&s.call(e,$,O.isString(I)?I.trim():I,E,A))===!0&&T($,E?E.concat(I):[I])}),d.pop()}}if(!O.isObject(t))throw new TypeError("data must be an object");return T(t),e}function Al(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Hc(t,e){this._pairs=[],t&&Ji(t,this,e)}const Md=Hc.prototype;Md.append=function(e,r){this._pairs.push([e,r])};Md.toString=function(e){const r=e?function(n){return e.call(this,n,Al)}:Al;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function Om(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Od(t,e,r){if(!e)return t;const n=r&&r.encode||Om,s=r&&r.serialize;let i;if(s?i=s(e,r):i=O.isURLSearchParams(e)?e.toString():new Hc(e,r).toString(n),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}let Tl=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){O.forEach(this.handlers,function(n){n!==null&&e(n)})}};const Cd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Cm=typeof URLSearchParams<"u"?URLSearchParams:Hc,Im=typeof FormData<"u"?FormData:null,Dm=typeof Blob<"u"?Blob:null,Nm={isBrowser:!0,classes:{URLSearchParams:Cm,FormData:Im,Blob:Dm},protocols:["http","https","file","blob","url","data"]},Id=typeof window<"u"&&typeof document<"u",Lm=(t=>Id&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),qm=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Hm=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Id,hasStandardBrowserEnv:Lm,hasStandardBrowserWebWorkerEnv:qm},Symbol.toStringTag,{value:"Module"})),nr={...Hm,...Nm};function Fm(t,e){return Ji(t,new nr.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return nr.isNode&&O.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function zm(t){return O.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Km(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}function Dd(t){function e(r,n,s,i){let a=r[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),u=i>=r.length;return a=!a&&O.isArray(s)?s.length:a,u?(O.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!o):((!s[a]||!O.isObject(s[a]))&&(s[a]=[]),e(r,n,s[a],i)&&O.isArray(s[a])&&(s[a]=Km(s[a])),!o)}if(O.isFormData(t)&&O.isFunction(t.entries)){const r={};return O.forEachEntry(t,(n,s)=>{e(zm(n),s,r,0)}),r}return null}function jm(t,e,r){if(O.isString(t))try{return(e||JSON.parse)(t),O.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Ps={transitional:Cd,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=O.isObject(e);if(i&&O.isHTMLForm(e)&&(e=new FormData(e)),O.isFormData(e))return s?JSON.stringify(Dd(e)):e;if(O.isArrayBuffer(e)||O.isBuffer(e)||O.isStream(e)||O.isFile(e)||O.isBlob(e))return e;if(O.isArrayBufferView(e))return e.buffer;if(O.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Fm(e,this.formSerializer).toString();if((o=O.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Ji(o?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),jm(e)):e}],transformResponse:[function(e){const r=this.transitional||Ps.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(e&&O.isString(e)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?te.from(o,te.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nr.classes.FormData,Blob:nr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};O.forEach(["delete","get","head","post","put","patch"],t=>{Ps.headers[t]={}});const Wm=O.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Vm=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||e[r]&&Wm[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},xl=Symbol("internals");function ts(t){return t&&String(t).trim().toLowerCase()}function pi(t){return t===!1||t==null?t:O.isArray(t)?t.map(pi):String(t)}function Gm(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Jm=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Eo(t,e,r,n,s){if(O.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!O.isString(e)){if(O.isString(n))return e.indexOf(n)!==-1;if(O.isRegExp(n))return n.test(e)}}function Xm(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Zm(t,e){const r=O.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,i,a){return this[n].call(this,e,s,i,a)},configurable:!0})})}let Nt=class{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function i(o,u,f){const p=ts(u);if(!p)throw new Error("header name must be a non-empty string");const d=O.findKey(s,p);(!d||s[d]===void 0||f===!0||f===void 0&&s[d]!==!1)&&(s[d||u]=pi(o))}const a=(o,u)=>O.forEach(o,(f,p)=>i(f,p,u));return O.isPlainObject(e)||e instanceof this.constructor?a(e,r):O.isString(e)&&(e=e.trim())&&!Jm(e)?a(Vm(e),r):e!=null&&i(r,e,n),this}get(e,r){if(e=ts(e),e){const n=O.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return Gm(s);if(O.isFunction(r))return r.call(this,s,n);if(O.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=ts(e),e){const n=O.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||Eo(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function i(a){if(a=ts(a),a){const o=O.findKey(n,a);o&&(!r||Eo(n,n[o],o,r))&&(delete n[o],s=!0)}}return O.isArray(e)?e.forEach(i):i(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!e||Eo(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const r=this,n={};return O.forEach(this,(s,i)=>{const a=O.findKey(n,i);if(a){r[a]=pi(s),delete r[i];return}const o=e?Xm(i):String(i).trim();o!==i&&delete r[i],r[o]=pi(s),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return O.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&O.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[xl]=this[xl]={accessors:{}}).accessors,s=this.prototype;function i(a){const o=ts(a);n[o]||(Zm(s,a),n[o]=!0)}return O.isArray(e)?e.forEach(i):i(e),this}};Nt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);O.reduceDescriptors(Nt.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});O.freezeMethods(Nt);function So(t,e){const r=this||Ps,n=e||r,s=Nt.from(n.headers);let i=n.data;return O.forEach(t,function(o){i=o.call(r,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Nd(t){return!!(t&&t.__CANCEL__)}function Us(t,e,r){te.call(this,t??"canceled",te.ERR_CANCELED,e,r),this.name="CanceledError"}O.inherits(Us,te,{__CANCEL__:!0});function Ym(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new te("Request failed with status code "+r.status,[te.ERR_BAD_REQUEST,te.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const Qm=nr.hasStandardBrowserEnv?{write(t,e,r,n,s,i){const a=[t+"="+encodeURIComponent(e)];O.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),O.isString(n)&&a.push("path="+n),O.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ew(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function tw(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Ld(t,e){return t&&!ew(e)?tw(t,e):e}const rw=nr.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function s(i){let a=i;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(a){const o=O.isString(a)?s(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}();function nw(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function sw(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(u){const f=Date.now(),p=n[i];a||(a=f),r[s]=u,n[s]=f;let d=i,A=0;for(;d!==s;)A+=r[d++],d=d%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),f-a<e)return;const T=p&&f-p;return T?Math.round(A*1e3/T):void 0}}function Rl(t,e){let r=0;const n=sw(50,250);return s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,o=i-r,u=n(o),f=i<=a;r=i;const p={loaded:i,total:a,progress:a?i/a:void 0,bytes:o,rate:u||void 0,estimated:u&&a&&f?(a-i)/u:void 0,event:s};p[e?"download":"upload"]=!0,t(p)}}const iw=typeof XMLHttpRequest<"u",aw=iw&&function(t){return new Promise(function(r,n){let s=t.data;const i=Nt.from(t.headers).normalize();let{responseType:a,withXSRFToken:o}=t,u;function f(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}let p;if(O.isFormData(s)){if(nr.hasStandardBrowserEnv||nr.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((p=i.getContentType())!==!1){const[E,...k]=p?p.split(";").map($=>$.trim()).filter(Boolean):[];i.setContentType([E||"multipart/form-data",...k].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const E=t.auth.username||"",k=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(E+":"+k))}const A=Ld(t.baseURL,t.url);d.open(t.method.toUpperCase(),Od(A,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function T(){if(!d)return;const E=Nt.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),$={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:E,config:t,request:d};Ym(function(U){r(U),f()},function(U){n(U),f()},$),d=null}if("onloadend"in d?d.onloadend=T:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(T)},d.onabort=function(){d&&(n(new te("Request aborted",te.ECONNABORTED,t,d)),d=null)},d.onerror=function(){n(new te("Network Error",te.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let k=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const $=t.transitional||Cd;t.timeoutErrorMessage&&(k=t.timeoutErrorMessage),n(new te(k,$.clarifyTimeoutError?te.ETIMEDOUT:te.ECONNABORTED,t,d)),d=null},nr.hasStandardBrowserEnv&&(o&&O.isFunction(o)&&(o=o(t)),o||o!==!1&&rw(A))){const E=t.xsrfHeaderName&&t.xsrfCookieName&&Qm.read(t.xsrfCookieName);E&&i.set(t.xsrfHeaderName,E)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&O.forEach(i.toJSON(),function(k,$){d.setRequestHeader($,k)}),O.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),a&&a!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",Rl(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",Rl(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=E=>{d&&(n(!E||E.type?new Us(null,t,d):E),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));const m=nw(A);if(m&&nr.protocols.indexOf(m)===-1){n(new te("Unsupported protocol "+m+":",te.ERR_BAD_REQUEST,t));return}d.send(s||null)})},dc={http:Um,xhr:aw};O.forEach(dc,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const kl=t=>`- ${t}`,ow=t=>O.isFunction(t)||t===null||t===!1,qd={getAdapter:t=>{t=O.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let i=0;i<e;i++){r=t[i];let a;if(n=r,!ow(r)&&(n=dc[(a=String(r)).toLowerCase()],n===void 0))throw new te(`Unknown adapter '${a}'`);if(n)break;s[a||"#"+i]=n}if(!n){const i=Object.entries(s).map(([o,u])=>`adapter ${o} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=e?i.length>1?`since :
`+i.map(kl).join(`
`):" "+kl(i[0]):"as no adapter specified";throw new te("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:dc};function Ao(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Us(null,t)}function Bl(t){return Ao(t),t.headers=Nt.from(t.headers),t.data=So.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),qd.getAdapter(t.adapter||Ps.adapter)(t).then(function(n){return Ao(t),n.data=So.call(t,t.transformResponse,n),n.headers=Nt.from(n.headers),n},function(n){return Nd(n)||(Ao(t),n&&n.response&&(n.response.data=So.call(t,t.transformResponse,n.response),n.response.headers=Nt.from(n.response.headers))),Promise.reject(n)})}const Pl=t=>t instanceof Nt?{...t}:t;function Rn(t,e){e=e||{};const r={};function n(f,p,d){return O.isPlainObject(f)&&O.isPlainObject(p)?O.merge.call({caseless:d},f,p):O.isPlainObject(p)?O.merge({},p):O.isArray(p)?p.slice():p}function s(f,p,d){if(O.isUndefined(p)){if(!O.isUndefined(f))return n(void 0,f,d)}else return n(f,p,d)}function i(f,p){if(!O.isUndefined(p))return n(void 0,p)}function a(f,p){if(O.isUndefined(p)){if(!O.isUndefined(f))return n(void 0,f)}else return n(void 0,p)}function o(f,p,d){if(d in e)return n(f,p);if(d in t)return n(void 0,f)}const u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(f,p)=>s(Pl(f),Pl(p),!0)};return O.forEach(Object.keys(Object.assign({},t,e)),function(p){const d=u[p]||s,A=d(t[p],e[p],p);O.isUndefined(A)&&d!==o||(r[p]=A)}),r}const Hd="1.6.8",Fc={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Fc[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Ul={};Fc.transitional=function(e,r,n){function s(i,a){return"[Axios v"+Hd+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,o)=>{if(e===!1)throw new te(s(a," has been removed"+(r?" in "+r:"")),te.ERR_DEPRECATED);return r&&!Ul[a]&&(Ul[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,a,o):!0}};function cw(t,e,r){if(typeof t!="object")throw new te("options must be an object",te.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],a=e[i];if(a){const o=t[i],u=o===void 0||a(o,i,t);if(u!==!0)throw new te("option "+i+" must be "+u,te.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new te("Unknown option "+i,te.ERR_BAD_OPTION)}}const fc={assertOptions:cw,validators:Fc},vr=fc.validators;let Wr=class{constructor(e){this.defaults=e,this.interceptors={request:new Tl,response:new Tl}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Rn(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&fc.assertOptions(n,{silentJSONParsing:vr.transitional(vr.boolean),forcedJSONParsing:vr.transitional(vr.boolean),clarifyTimeoutError:vr.transitional(vr.boolean)},!1),s!=null&&(O.isFunction(s)?r.paramsSerializer={serialize:s}:fc.assertOptions(s,{encode:vr.function,serialize:vr.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&O.merge(i.common,i[r.method]);i&&O.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),r.headers=Nt.concat(a,i);const o=[];let u=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(r)===!1||(u=u&&E.synchronous,o.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let p,d=0,A;if(!u){const m=[Bl.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,f),A=m.length,p=Promise.resolve(r);d<A;)p=p.then(m[d++],m[d++]);return p}A=o.length;let T=r;for(d=0;d<A;){const m=o[d++],E=o[d++];try{T=m(T)}catch(k){E.call(this,k);break}}try{p=Bl.call(this,T)}catch(m){return Promise.reject(m)}for(d=0,A=f.length;d<A;)p=p.then(f[d++],f[d++]);return p}getUri(e){e=Rn(this.defaults,e);const r=Ld(e.baseURL,e.url);return Od(r,e.params,e.paramsSerializer)}};O.forEach(["delete","get","head","options"],function(e){Wr.prototype[e]=function(r,n){return this.request(Rn(n||{},{method:e,url:r,data:(n||{}).data}))}});O.forEach(["post","put","patch"],function(e){function r(n){return function(i,a,o){return this.request(Rn(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Wr.prototype[e]=r(),Wr.prototype[e+"Form"]=r(!0)});let uw=class Fd{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(o=>{n.subscribe(o),i=o}).then(s);return a.cancel=function(){n.unsubscribe(i)},a},e(function(i,a,o){n.reason||(n.reason=new Us(i,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new Fd(function(s){e=s}),cancel:e}}};function lw(t){return function(r){return t.apply(null,r)}}function hw(t){return O.isObject(t)&&t.isAxiosError===!0}const pc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pc).forEach(([t,e])=>{pc[e]=t});function zd(t){const e=new Wr(t),r=Ed(Wr.prototype.request,e);return O.extend(r,Wr.prototype,e,{allOwnKeys:!0}),O.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return zd(Rn(t,s))},r}const et=zd(Ps);et.Axios=Wr;et.CanceledError=Us;et.CancelToken=uw;et.isCancel=Nd;et.VERSION=Hd;et.toFormData=Ji;et.AxiosError=te;et.Cancel=et.CanceledError;et.all=function(e){return Promise.all(e)};et.spread=lw;et.isAxiosError=hw;et.mergeConfig=Rn;et.AxiosHeaders=Nt;et.formToJSON=t=>Dd(O.isHTMLForm(t)?new FormData(t):t);et.getAdapter=qd.getAdapter;et.HttpStatusCode=pc;et.default=et;class dw{constructor({url:e,retryConfig:r,query:n,queryName:s,opts:i}){S(this,"queryVars",{});S(this,"queryFields");S(this,"queryInfo");S(this,"_query");S(this,"url");S(this,"config");S(this,"resultTracker",{numPages:0,numResults:0,done:!1});if(!e)throw new Error("URL is required");if(this.url=new URL(e),this.config={first:!1,userProvided:!1,numPages:1/0,numResults:1e3,retryOpts:{retries:3,maxTimeout:2e3,minTimeout:500,...r}},n===!1)return this;if(!n)throw new Error(`Unable to find query with name ${s}`);if(this.queryInfo={...n},this.queryFields=n.query,s.includes("arweave")&&this.url.host==="node1.bundlr.network"&&(this.url=new URL("https://arweave.net/graphql")),!(i!=null&&i.skipVariableSetters))for(const a of Object.keys(n.vars)){if(this[a])throw new Error(`Field setter ${a} has a key conflict - disable with opts.skipVariableSetters OR change the field name and add to query.remapVars`);this[a]=o=>(this.queryVars[a]=o,this)}return this}buildQuery(){var u,f;if(this.config.userProvided)return this;const e=p=>JSON.stringify(p,(d,A)=>{if(A instanceof Array)return A[0];if(typeof A=="object")return A;if(A!==!1)return""}).replaceAll(":","").replaceAll('"',"").replaceAll(",",`
          `),r=e(this.queryFields),n=e({pageInfo:{[((u=this.queryInfo.paging)==null?void 0:u.hasNextPage)??"hasNextPage"]:void 0}}).slice(1,-1),s=this.queryInfo.enumValues,i={...this.queryInfo.vars,...this.queryVars};for(const[p,d]of Object.entries(this.queryInfo.remapVars??{}))if((i==null?void 0:i[p])!==void 0){if(typeof d=="function"){const A=d(p,i[p],i);if(!A)continue;const[T,m]=A;if(i[T]=m,T===p)continue}else i[d]=i[p];i[p]=void 0}const a=JSON.stringify(i,function(p,d){return d===void 0||d instanceof Array||typeof d=="object"||typeof d=="number"||s!=null&&s.includes(p)?d:`'${d}'`}).replaceAll('"',"").replaceAll("'",'"').slice(1,-1);if(!((f=this==null?void 0:this.queryInfo)!=null&&f.name))throw new Error("Query name is undefined!");const o=this.queryInfo.paging?`query {
      ${this.queryInfo.name}(
        ${a}
      ) {
        edges {
          cursor
          node ${r}
        }
        ${n}
      }
    }`:`query {
    ${this.queryInfo.name}(
      ${a}
    ) 
    ${r}
  }`;return this._query=o,this}async getPage(){var n;if(this.resultTracker.done)return;if(this.buildQuery(),!this._query)throw new Error("Unable to run undefined query");let e;try{e=await Ir(async s=>{const i=await et(this.url.toString(),{method:"post",headers:{"Content-Type":"application/json"},data:{query:this._query}});if(i.data.errors)throw i;return i},this.config.retryOpts)}catch(s){throw new Error(`Error running query
 ${this._query} - ${s.message?s.message+" -":""} (${JSON.stringify(((n=s==null?void 0:s.data)==null?void 0:n.errors.map(i=>i.message))??(s==null?void 0:s.errors)??s)}) `)}if(this.config.userProvided)return this.trimmer([e.data.data].flat(20));const r=e.data.data[this.queryInfo.name];if(this.queryInfo.paging){const s=r.pageInfo[this.queryInfo.paging.hasNextPage]?r.edges.at(-1)[this.queryInfo.paging.cursor]:void 0;return this.queryVars.after=s,this.trimmer(r.edges.map(i=>i.node))}return this.trimmer([r].flat(20))}trimmer(e){var s,i;const r=++this.resultTracker.numPages,n=this.resultTracker.numResults+=e.length;if(e.length===0)return this.resultTracker.done=!0,e;if(r>=((s=this==null?void 0:this.config)==null?void 0:s.numPages)&&(this.resultTracker.done=!0),n>=((i=this==null?void 0:this.config)==null?void 0:i.numResults)){this.resultTracker.done=!0;const a=this.config.numResults-(n-e.length);return e.slice(0,a)}return e}async first(){const e=await this.getPage();return(e==null?void 0:e.at(0))??void 0}maxPages(e){return this.config.numPages=e,this}limit(e){return this.config.numResults=e,this}async all(){const e=[];do{const r=await this.getPage();if(!r)break;e.push(...r)}while(this.queryVars.after);return e}async*generator(){do{const e=await this.getPage();if(!e)return;for(const r of e)yield r}while(this.queryVars.after)}stream(){return gs.Readable.from(this.generator())}query(e){return this._query=e,this.config.userProvided=!0,this}fields(e,r=!1){const n=(s,i,a)=>{for(const o of Object.keys(a)){let u=i[o];Array.isArray(u)&&(u=u[0]);const f=a[o];if(u===void 0)throw new Error(`Illegal field ${s}${o}`);typeof f=="object"&&n(s+o+".",u,f)}};return r||n("",this.queryFields,e),this.queryFields=e,this}variables(e){return this.queryVars={...this.queryVars,...e},this}async toQuery(){return await this.buildQuery(),this._query}tReturn(){return"tReturn"}tQuery(){return"tQuery"}tVars(){return"tVars"}async then(e,r){return this.all().then(e,r)}async catch(e){return this.then().catch(e)}async finally(e){return this.then().finally(e)}}const fw={id:"",timestamp:0,height:"",previous:""},pw={ids:void 0,minHeight:void 0,maxHeight:void 0,pageSize:10,after:void 0,sort:"DESC"},yw={name:"blocks",query:fw,vars:pw,enumValues:["sort"],remapVars:{pageSize:"first",sort:(t,e)=>[t,e==="ASC"?"HEIGHT_ASC":"HEIGHT_DESC"],minHeight:(t,e,r)=>{r.height={...r.height,min:e},r.minHeight=void 0},maxHeight:(t,e,r)=>{r.height={...r.height,max:e},r.maxHeight=void 0}},paging:{hasNextPage:"hasNextPage",cursor:"cursor"}},gw={id:"",anchor:"",signature:"",recipient:"",owner:{address:"",key:""},fee:{winston:"",ar:""},quantity:{winston:"",ar:""},data:{size:"",type:""},tags:[{name:"",value:""}],block:{id:"",timestamp:0,height:0,previous:""},bundledIn:{id:""}},mw={ids:void 0,from:void 0,to:void 0,tags:void 0,bundledIn:void 0,minHeight:void 0,maxHeight:void 0,pageSize:10,after:void 0,sort:"DESC"},ww={name:"transactions",query:gw,enumValues:["sort"],vars:mw,remapVars:{pageSize:"first",from:"owners",to:"recipients",sort:(t,e)=>[t,e==="ASC"?"HEIGHT_ASC":"HEIGHT_DESC"],minHeight:(t,e,r)=>{r.block={...r.block,min:e},r.minHeight=void 0},maxHeight:(t,e,r)=>{r.block={...r.block,max:e},r.maxHeight=void 0}},paging:{hasNextPage:"hasNextPage",cursor:"cursor"}},bw={id:"",receipt:{deadlineHeight:0,signature:"",timestamp:0,version:""},tags:[{name:"",value:""}],address:"",token:"",signature:"",timestamp:0},vw={ids:void 0,after:void 0,token:void 0,from:void 0,pageSize:100,sort:"ASC",tags:void 0,fromTimestamp:void 0,toTimestamp:void 0},_w={name:"transactions",query:bw,enumValues:["order"],vars:vw,remapVars:{pageSize:"first",sort:"order",from:"owners",fromTimestamp:(t,e,r)=>{r.timestamp={...r.timestamp,from:new Date(e).getTime()},r.fromTimestamp=void 0},toTimestamp:(t,e,r)=>{r.timestamp={...r.timestamp,to:new Date(e).getTime()},r.toTimestamp=void 0}},paging:{hasNextPage:"hasNextPage",cursor:"cursor"}},Ew={"irys:transactions":_w,"arweave:transactions":ww,"arweave:blocks":yw};class $l{constructor(e={url:new URL("https://node1.bundlr.network/graphql")}){S(this,"opts");if(!e.url)throw new Error("URL is required");e.url=new URL(e.url),this.opts=e}search(e,r){const n=(r==null?void 0:r.query)??Ew[e];return new dw({...this.opts,query:n,queryName:e})}}class zc{constructor({url:e,arbundles:r}){S(this,"api");S(this,"utils");S(this,"uploader");S(this,"funder");S(this,"address");S(this,"token");S(this,"tokenConfig");S(this,"provenance");S(this,"transactions");S(this,"_readyPromise");S(this,"url");S(this,"arbundles");S(this,"IrysTransaction");this.url=e,this.arbundles=r,this.IrysTransaction=K0(this)}get signer(){return this.tokenConfig.getSigner()}get search(){const e=new $l({url:new URL("/graphql",this.url)});return e.search.bind(e)}query(e){return new $l(e??{url:this.url})}async withdrawBalance(e){return X0(this.utils,this.api,e)}async getLoadedBalance(){if(!this.address)throw new Error("address is undefined");return this.utils.getBalance(this.address)}async getBalance(e){return this.utils.getBalance(e)}async fund(e,r){return this.funder.fund(e,r)}async getPrice(e){return this.utils.getPrice(this.token,e)}async verifyReceipt(e){return ut.verifyReceipt(this.arbundles,e)}createTransaction(e,r){return new this.IrysTransaction(e,this,r)}getSigner(){return this.tokenConfig.getSigner()}async upload(e,r){return this.uploader.uploadData(e,r)}async uploadWithReceipt(e,r){return this.uploader.uploadData(e,{...r,upload:{getReceiptSignature:!0}})}async ready(){return this.tokenConfig.ready&&await this.tokenConfig.ready(),this.address=this.tokenConfig.address,this}get transaction(){const e=this;return{fromRaw(r){return new e.IrysTransaction(r,e,{dataIsRawTransaction:!0})}}}}S(zc,"VERSION","0.0.2");let Sw=class{constructor(e){S(this,"_instance");S(this,"cookieMap",new Map);S(this,"config");e&&this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e),this._instance=void 0}getConfig(){return this.config}async requestInterceptor(e){const r=this.cookieMap.get(new URL(e.baseURL??"").host);return r&&(e.headers.cookie=r),e}async responseInterceptor(e){var n;const r=(n=e.headers)==null?void 0:n["set-cookie"];return r&&this.cookieMap.set(e.request.host,r),e}mergeDefaults(e){return{url:e.url,timeout:e.timeout??2e4,logging:e.logging??!1,logger:e.logger??console.log,headers:{...e.headers,"x-irys-js-sdk-version":zc.VERSION},withCredentials:e.withCredentials??!1,retry:{retries:3,maxTimeout:5e3}}}async get(e,r){var n;try{return await this.request(e,{...r,method:"GET"})}catch(s){if((n=s.response)!=null&&n.status)return s.response;throw s}}async post(e,r,n){var s;try{return await this.request(e,{data:r,...n,method:"POST"})}catch(i){if((s=i.response)!=null&&s.status)return i.response;throw i}}get instance(){if(this._instance)return this._instance;const e=me.create({baseURL:this.config.url.toString(),timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:this.config.headers,withCredentials:this.config.withCredentials});return this.config.withCredentials&&(e.interceptors.request.use(this.requestInterceptor.bind(this)),e.interceptors.response.use(this.responseInterceptor.bind(this))),this.config.logging&&(e.interceptors.request.use(r=>(this.config.logger(`Requesting: ${r.baseURL}/${r.url}`),r)),e.interceptors.response.use(r=>(this.config.logger(`Response: ${r.config.url} - ${r.status}`),r))),this._instance=e}async request(e,r){const n=this.instance,s=(r==null?void 0:r.url)??new URL(e,this.config.url).toString();return Ir(i=>n({...r,url:s}),{...this.config.retry,...r==null?void 0:r.retry})}};class Aw{constructor(e){S(this,"utils");this.utils=e}async fund(e,r=1){const n=new j(e);if(!n.isInteger())throw new Error("must use an integer for funding amount");const s=this.utils.tokenConfig,i=await this.utils.getBundlerAddress(this.utils.token);let a;if(s.needsFee){const d=await s.getFee(s.base[0]==="winston"?0:n,i);a=j.isBigNumber(d)?d.multipliedBy(r).integerValue(j.ROUND_CEIL):d}const o=await s.createTx(n,i,a);let u;try{u=await s.sendTx(o.tx)}catch(d){throw d}if(o.txId??(o.txId=u),!o.txId)throw new Error("Undefined transaction ID");ut.checkAndThrow(u,`Sending transaction to the ${this.utils.token} network`);let f=await this.utils.confirmationPoll(o.txId);if(!await this.submitTransaction(o.txId).catch(d=>{f=d}))throw new Error(`failed to post funding tx - ${o.txId} - keep this id! 
 ${f?` - ${(f==null?void 0:f.message)??f}`:""}`);return{reward:j.isBigNumber(a)?a.toString():JSON.stringify(a),target:i,quantity:n.toString(),id:o.txId}}async submitTransaction(e){return await Ir(async()=>{const r=await this.utils.api.post(`/account/balance/${this.utils.token}`,{tx_id:e});return ut.checkAndThrow(r,`Posting transaction ${e} information to the bundler`,[202]),r},{retries:5,maxTimeout:1e3,minTimeout:100,randomize:!0})}async submitFundTransaction(e){return this.submitTransaction(e)}}class Tw{constructor(){S(this,"publicKey");S(this,"signatureType");S(this,"signatureLength");S(this,"ownerLength");S(this,"pem")}static verify(e,r,n,s){throw new Error("You must implement verify method on child")}}var Y;(function(t){t[t.ARWEAVE=1]="ARWEAVE",t[t.ED25519=2]="ED25519",t[t.ETHEREUM=3]="ETHEREUM",t[t.SOLANA=4]="SOLANA",t[t.INJECTEDAPTOS=5]="INJECTEDAPTOS",t[t.MULTIAPTOS=6]="MULTIAPTOS",t[t.TYPEDETHEREUM=7]="TYPEDETHEREUM"})(Y||(Y={}));const de={[Y.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[Y.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[Y.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[Y.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"},[Y.INJECTEDAPTOS]:{sigLength:64,pubLength:32,sigName:"injectedAptos"},[Y.MULTIAPTOS]:{sigLength:64*32+4,pubLength:32*32+1,sigName:"multiAptos"},[Y.TYPEDETHEREUM]:{sigLength:65,pubLength:42,sigName:"typedEthereum"}};class $s{constructor(e,r){S(this,"_key");S(this,"pk");S(this,"ownerLength",de[2].pubLength);S(this,"signatureLength",de[2].sigLength);S(this,"_publicKey");S(this,"signatureType",2);this._key=e,this.pk=r}get publicKey(){return this._publicKey}get key(){throw new Error("You must implement `key`")}sign(e){return ig(Buffer.from(e),Buffer.from(this.key))}static async verify(e,r,n){let s=e;return typeof e=="string"&&(s=J.toBuffer(e)),qi(Buffer.from(n),Buffer.from(r),Buffer.from(s))}}function pt(t){let e=0;for(const s of t)e+=s.byteLength;const r=new Uint8Array(e);let n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let s=1;s<t.length;s++)r.set(new Uint8Array(t[s]),n),n+=t[s].byteLength;return r}function Kd(t){const e=Gt(t);return Kc(e)}function Kc(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}function ne(t){return new TextEncoder().encode(t)}function yc(t){return Jt(ne(t))}function Gt(t){return new Uint8Array(ag(Vd(t)))}function jd(t){return og(new Uint8Array(t))}function Jt(t){return Wd(jd(t))}function Wd(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function Vd(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}function xw(t){return new j(t).shiftedBy(-12)}function Rw(t){return new j(t).shiftedBy(12)}const kw=Object.freeze(Object.defineProperty({__proto__:null,arToWinston:Rw,b64UrlDecode:Vd,b64UrlEncode:Wd,b64UrlToBuffer:Gt,b64UrlToString:Kd,bufferToString:Kc,bufferTob64:jd,bufferTob64Url:Jt,concatBuffers:pt,stringToB64Url:yc,stringToBuffer:ne,winstonToAr:xw},Symbol.toStringTag,{value:"Module"}));class yi{constructor(){S(this,"keyLength",4096);S(this,"publicExponent",65537);S(this,"hashAlgorithm","sha256");S(this,"driver");this.driver=crypto==null?void 0:crypto.subtle}async generateJWK(){const e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),r=await this.driver.exportKey("jwk",e.privateKey);return{kty:r.kty,e:r.e,n:r.n,d:r.d,p:r.p,q:r.q,dp:r.dp,dq:r.dq,qi:r.qi}}async sign(e,r,{saltLength:n}={saltLength:32}){const s=await this.driver.sign({name:"RSA-PSS",saltLength:n},await this.jwkToCryptoKey(e),r);return new Uint8Array(s)}async hash(e,r="SHA-256"){const n=await this.driver.digest(r,e);return new Uint8Array(n)}async verify(e,r,n){const s={kty:"RSA",e:"AQAB",n:e},i=await this.jwkToPublicCryptoKey(s),a=await this.driver.digest("SHA-256",r),o=await this.driver.verify({name:"RSA-PSS",saltLength:0},i,n,r),u=await this.driver.verify({name:"RSA-PSS",saltLength:32},i,n,r),f=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((i.algorithm.modulusLength-1)/8)-a.byteLength-2},i,n,r);return o||u||f}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}async encrypt(e,r,n){const s=await this.driver.importKey("raw",typeof r=="string"?ne(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),i=await this.driver.deriveKey({name:"PBKDF2",salt:ne(n||"salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=new Uint8Array(16);crypto.getRandomValues(a);const o=await this.driver.encrypt({name:"AES-CBC",iv:a},i,e);return pt([a,o])}async decrypt(e,r,n){const s=await this.driver.importKey("raw",typeof r=="string"?ne(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),i=await this.driver.deriveKey({name:"PBKDF2",salt:ne(n||"salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=e.slice(0,16),o=await this.driver.decrypt({name:"AES-CBC",iv:a},i,e.slice(16));return pt([o])}}async function Fn(t){if(typeof t[Symbol.asyncIterator]=="function"){const s=t,i=Jr.createHash("sha384");let a=0;for await(const f of s)a+=f.byteLength,i.update(f);const o=pt([ne("blob"),ne(a.toString())]),u=pt([await ct().hash(o,"SHA-384"),i.digest()]);return await ct().hash(u,"SHA-384")}else if(Array.isArray(t)){const s=pt([ne("list"),ne(t.length.toString())]);return await Gd(t,await ct().hash(s,"SHA-384"))}const e=t,r=pt([ne("blob"),ne(e.byteLength.toString())]),n=pt([await ct().hash(r,"SHA-384"),await ct().hash(e,"SHA-384")]);return await ct().hash(n,"SHA-384")}async function Gd(t,e){if(t.length<1)return e;const r=pt([e,await Fn(t[0])]),n=await ct().hash(r,"SHA-384");return await Gd(t.slice(1),n)}class ds extends Error{constructor(r,n={}){var e=(...XR)=>(super(...XR),S(this,"type"),S(this,"response"),this);n.message?e(n.message):e(),this.type=r,this.response=n.response}getType(){return this.type}}function fs(t){let e=t.data;if(typeof t.data=="string")try{e=JSON.parse(t.data)}catch{}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:t.statusText||"unknown"}class Bw{constructor(e,r){S(this,"api");S(this,"network");this.api=e,this.network=r}async getByHash(e){const r=await this.api.get(`block/hash/${e}`);if(r.status===200)return r.data;throw r.status===404?new ds("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getByHeight(e){const r=await this.api.get(`block/height/${e}`);if(r.status===200)return r.data;throw r.status===404?new ds("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getCurrent(){const{current:e}=await this.network.getInfo();return await this.getByHash(e)}}const Pr=256*1024,Pw=32*1024,us=32,ln=32;class Uw{constructor(e){S(this,"crypto");this.crypto=e.deps.crypto}async chunkData(e){const r=[];let n=e,s=0;for(;n.byteLength>=Pr;){let i=Pr;const a=n.byteLength-Pr;a>0&&a<Pw&&(i=Math.ceil(n.byteLength/2));const o=n.slice(0,i),u=await this.crypto.hash(o);s+=o.byteLength,r.push({dataHash:u,minByteRange:s-o.byteLength,maxByteRange:s}),n=n.slice(i)}return r.push({dataHash:await this.crypto.hash(n),minByteRange:s,maxByteRange:s+n.byteLength}),r}async generateLeaves(e){return Promise.all(e.map(async({dataHash:r,minByteRange:n,maxByteRange:s})=>({type:"leaf",id:await this.hash(await Promise.all([this.hash(r),this.hash(ni(s))])),dataHash:r,minByteRange:n,maxByteRange:s})))}async computeRootHash(e){return(await this.generateTree(e)).id}async generateTree(e){return await this.buildLayers(await this.generateLeaves(await this.chunkData(e)))}async generateTransactionChunks(e){const r=await this.chunkData(e),n=await this.generateLeaves(r),s=await this.buildLayers(n),i=await this.generateProofs(s),a=r.slice(-1)[0];return a.maxByteRange-a.minByteRange===0&&(r.splice(r.length-1,1),i.splice(i.length-1,1)),{data_root:s.id,chunks:r,proofs:i}}async buildLayers(e,r=0){if(e.length<2)return e[0];const n=[];for(let s=0;s<e.length;s+=2)n.push(await this.hashBranch(e[s],e[s+1]));return this.buildLayers(n,r+1)}generateProofs(e){const r=this.resolveBranchProofs(e);return Array.isArray(r)?Jd(r):[r]}resolveBranchProofs(e,r=new Uint8Array,n=0){if(e.type=="leaf")return{offset:e.maxByteRange-1,proof:pt([r,e.dataHash,ni(e.maxByteRange)])};if(e.type=="branch"){const s=pt([r,e.leftChild.id,e.rightChild.id,ni(e.byteRange)]);return[this.resolveBranchProofs(e.leftChild,s,n+1),this.resolveBranchProofs(e.rightChild,s,n+1)]}throw new Error("Unexpected node type")}async validatePath(e,r,n,s,i){if(s<=0)return!1;if(r>=s)return this.validatePath(e,0,s-1,s,i);if(r<0)return this.validatePath(e,0,0,s,i);if(i.length==ln+us){const A=i.slice(0,ln),T=i.slice(A.length,A.length+us),m=await this.hash([await this.hash(A),await this.hash(T)]);return Ol(e,m)?{offset:s-1,leftBound:n,rightBound:s,chunkSize:s-n}:!1}const a=i.slice(0,ln),o=i.slice(a.length,a.length+ln),u=i.slice(a.length+o.length,a.length+o.length+us),f=Ml(u),p=i.slice(a.length+o.length+u.length),d=await this.hash([await this.hash(a),await this.hash(o),await this.hash(u)]);return Ol(e,d)?r<f?await this.validatePath(a,r,n,Math.min(s,f),p):await this.validatePath(o,r,Math.max(n,f),s,p):!1}async hashBranch(e,r){return r?{type:"branch",id:await this.hash([await this.hash(e.id),await this.hash(r.id),await this.hash(ni(e.maxByteRange))]),byteRange:e.maxByteRange,maxByteRange:r.maxByteRange,leftChild:e,rightChild:r}:e}async hash(e){return Array.isArray(e)&&(e=vf.utils.concatBuffers(e)),new Uint8Array(await this.crypto.hash(e))}async debug(e,r=""){if(e.byteLength<1)return r;const n=e.slice(0,ln),s=e.slice(n.length,n.length+ln),i=e.slice(n.length+s.length,n.length+s.length+us),a=Ml(i),o=e.slice(n.length+s.length+i.length),u=await this.hash([await this.hash(n),await this.hash(s),await this.hash(i)]),f=`${r}
${JSON.stringify(Buffer.from(n))},${JSON.stringify(Buffer.from(s))},${a} => ${JSON.stringify(u)}`;return this.debug(o,f)}}function Jd(t){const e=[];return t.forEach(r=>{Array.isArray(r)?e.push(...Jd(r)):e.push(r)}),e}function ni(t){const e=new Uint8Array(us);for(let r=e.length-1;r>=0;r--){const n=t%256;e[r]=n,t=(t-n)/256}return e}function Ml(t){let e=0;for(let r=0;r<t.length;r++)e*=256,e+=t[r];return e}const Ol=(t,e)=>t.every((r,n)=>e[n]===r);class $w{constructor(e){S(this,"api");this.api=e}async getTransactionMetadata(e){const r=await this.api.get(`tx/${e}/offset`);if(r.status===200)return r.data;throw new Error(`Unable to get transaction offset: ${fs(r)}`)}async getChunk(e){const r=await this.api.get(`chunk/${e}`);if(r.status===200)return r.data;throw new Error(`Unable to get chunk: ${fs(r)}`)}async getChunkData(e){const r=await this.getChunk(e);return Gt(r.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e,r){const n=await this.getTransactionMetadata(e),s=parseInt(n.size),i=new Uint8Array(s);let a=0;for await(const o of this.concurrentChunkDownloader(e,r))i.set(o,a),a+=o.length;return i}async*concurrentChunkDownloader(e,r){const n={concurrency:10,...r},s=await this.getTransactionMetadata(e),i=new j(s.offset),a=new j(s.size),o=i.minus(a).plus(1);let u=0;const f=Math.ceil(a.dividedBy(Pr).toNumber()),p=E=>this.getChunkData(E.toString()).then(k=>(u+=k.length,k)),d=[],A=f-2,T=Math.min(A,n.concurrency);let m=0;for(let E=0;E<T;E++)d.push(p(o.plus(Pr*m++)));for(;m<A;)d.push(p(o.plus(Pr*m++))),yield d.shift();for(;d.length>0;)yield d.shift();if(yield p(o.plus(Pr*m++)),a.isGreaterThan(u)&&(yield p(o.plus(Pr*m++))),!a.isEqualTo(u))throw new Error(`got ${u}B, expected ${a.toString()}B`)}}function Mw(t,e){const r=t;return r.deepHash=new e.deepHash({deps:{utils:{stringToBuffer:ne,concatBuffers:pt},crypto:t}}),r}class Ow{constructor({deps:e}){S(this,"crypto");S(this,"utils");this.crypto=e.crypto,this.utils=e.utils}async deepHash(e){if(Array.isArray(e)){const s=this.utils.concatBuffers([this.utils.stringToBuffer("list"),this.utils.stringToBuffer(e.length.toString())]);return await this.deepHashChunks(e,await this.crypto.hash(s,"SHA-384"))}const r=this.utils.concatBuffers([this.utils.stringToBuffer("blob"),this.utils.stringToBuffer(e.byteLength.toString())]),n=this.utils.concatBuffers([await this.crypto.hash(r,"SHA-384"),await this.crypto.hash(e,"SHA-384")]);return await this.crypto.hash(n,"SHA-384")}async deepHashChunks(e,r){if(e.length<1)return r;const n=this.utils.concatBuffers([r,await this.deepHash(e[0])]),s=await this.crypto.hash(n,"SHA-384");return await this.deepHashChunks(e.slice(1),s)}}function Xd(t,e){return function(){return t.apply(e,arguments)}}const{toString:Cw}=Object.prototype,{getPrototypeOf:jc}=Object,Xi=(t=>e=>{const r=Cw.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ur=t=>(t=t.toLowerCase(),e=>Xi(e)===t),Zi=t=>e=>typeof e===t,{isArray:zn}=Array,bs=Zi("undefined");function Iw(t){return t!==null&&!bs(t)&&t.constructor!==null&&!bs(t.constructor)&&Lt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Zd=ur("ArrayBuffer");function Dw(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Zd(t.buffer),e}const Nw=Zi("string"),Lt=Zi("function"),Yd=Zi("number"),Yi=t=>t!==null&&typeof t=="object",Lw=t=>t===!0||t===!1,gi=t=>{if(Xi(t)!=="object")return!1;const e=jc(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},qw=ur("Date"),Hw=ur("File"),Fw=ur("Blob"),zw=ur("FileList"),Kw=t=>Yi(t)&&Lt(t.pipe),jw=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Lt(t.append)&&((e=Xi(t))==="formdata"||e==="object"&&Lt(t.toString)&&t.toString()==="[object FormData]"))},Ww=ur("URLSearchParams"),Vw=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ms(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),zn(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let o;for(n=0;n<a;n++)o=i[n],e.call(null,t[o],o,t)}}function Qd(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const ef=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,tf=t=>!bs(t)&&t!==ef;function gc(){const{caseless:t}=tf(this)&&this||{},e={},r=(n,s)=>{const i=t&&Qd(e,s)||s;gi(e[i])&&gi(n)?e[i]=gc(e[i],n):gi(n)?e[i]=gc({},n):zn(n)?e[i]=n.slice():e[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Ms(arguments[n],r);return e}const Gw=(t,e,r,{allOwnKeys:n}={})=>(Ms(e,(s,i)=>{r&&Lt(s)?t[i]=Xd(s,r):t[i]=s},{allOwnKeys:n}),t),Jw=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Xw=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Zw=(t,e,r,n)=>{let s,i,a;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&jc(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Yw=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},Qw=t=>{if(!t)return null;if(zn(t))return t;let e=t.length;if(!Yd(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},eb=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&jc(Uint8Array)),tb=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},rb=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},nb=ur("HTMLFormElement"),sb=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Cl=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),ib=ur("RegExp"),rf=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Ms(r,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(n[i]=a||s)}),Object.defineProperties(t,n)},ab=t=>{rf(t,(e,r)=>{if(Lt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Lt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ob=(t,e)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return zn(t)?n(t):n(String(t).split(e)),r},cb=()=>{},ub=(t,e)=>(t=+t,Number.isFinite(t)?t:e),To="abcdefghijklmnopqrstuvwxyz",Il="0123456789",nf={DIGIT:Il,ALPHA:To,ALPHA_DIGIT:To+To.toUpperCase()+Il},lb=(t=16,e=nf.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function hb(t){return!!(t&&Lt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const db=t=>{const e=new Array(10),r=(n,s)=>{if(Yi(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const i=zn(n)?[]:{};return Ms(n,(a,o)=>{const u=r(a,s+1);!bs(u)&&(i[o]=u)}),e[s]=void 0,i}}return n};return r(t,0)},fb=ur("AsyncFunction"),pb=t=>t&&(Yi(t)||Lt(t))&&Lt(t.then)&&Lt(t.catch),C={isArray:zn,isArrayBuffer:Zd,isBuffer:Iw,isFormData:jw,isArrayBufferView:Dw,isString:Nw,isNumber:Yd,isBoolean:Lw,isObject:Yi,isPlainObject:gi,isUndefined:bs,isDate:qw,isFile:Hw,isBlob:Fw,isRegExp:ib,isFunction:Lt,isStream:Kw,isURLSearchParams:Ww,isTypedArray:eb,isFileList:zw,forEach:Ms,merge:gc,extend:Gw,trim:Vw,stripBOM:Jw,inherits:Xw,toFlatObject:Zw,kindOf:Xi,kindOfTest:ur,endsWith:Yw,toArray:Qw,forEachEntry:tb,matchAll:rb,isHTMLForm:nb,hasOwnProperty:Cl,hasOwnProp:Cl,reduceDescriptors:rf,freezeMethods:ab,toObjectSet:ob,toCamelCase:sb,noop:cb,toFiniteNumber:ub,findKey:Qd,global:ef,isContextDefined:tf,ALPHABET:nf,generateString:lb,isSpecCompliantForm:hb,toJSONObject:db,isAsyncFn:fb,isThenable:pb};function re(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}C.inherits(re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:C.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const sf=re.prototype,af={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{af[t]={value:t}});Object.defineProperties(re,af);Object.defineProperty(sf,"isAxiosError",{value:!0});re.from=(t,e,r,n,s,i)=>{const a=Object.create(sf);return C.toFlatObject(t,a,function(u){return u!==Error.prototype},o=>o!=="isAxiosError"),re.call(a,t.message,e,r,n,s),a.cause=t,a.name=t.name,i&&Object.assign(a,i),a};const yb=null;function mc(t){return C.isPlainObject(t)||C.isArray(t)}function of(t){return C.endsWith(t,"[]")?t.slice(0,-2):t}function Dl(t,e,r){return t?t.concat(e).map(function(s,i){return s=of(s),!r&&i?"["+s+"]":s}).join(r?".":""):e}function gb(t){return C.isArray(t)&&!t.some(mc)}const mb=C.toFlatObject(C,{},null,function(e){return/^is[A-Z]/.test(e)});function Qi(t,e,r){if(!C.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=C.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,k){return!C.isUndefined(k[E])});const n=r.metaTokens,s=r.visitor||p,i=r.dots,a=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&C.isSpecCompliantForm(e);if(!C.isFunction(s))throw new TypeError("visitor must be a function");function f(m){if(m===null)return"";if(C.isDate(m))return m.toISOString();if(!u&&C.isBlob(m))throw new re("Blob is not supported. Use a Buffer instead.");return C.isArrayBuffer(m)||C.isTypedArray(m)?u&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function p(m,E,k){let $=m;if(m&&!k&&typeof m=="object"){if(C.endsWith(E,"{}"))E=n?E:E.slice(0,-2),m=JSON.stringify(m);else if(C.isArray(m)&&gb(m)||(C.isFileList(m)||C.endsWith(E,"[]"))&&($=C.toArray(m)))return E=of(E),$.forEach(function(U,B){!(C.isUndefined(U)||U===null)&&e.append(a===!0?Dl([E],B,i):a===null?E:E+"[]",f(U))}),!1}return mc(m)?!0:(e.append(Dl(k,E,i),f(m)),!1)}const d=[],A=Object.assign(mb,{defaultVisitor:p,convertValue:f,isVisitable:mc});function T(m,E){if(!C.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+E.join("."));d.push(m),C.forEach(m,function($,I){(!(C.isUndefined($)||$===null)&&s.call(e,$,C.isString(I)?I.trim():I,E,A))===!0&&T($,E?E.concat(I):[I])}),d.pop()}}if(!C.isObject(t))throw new TypeError("data must be an object");return T(t),e}function Nl(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Wc(t,e){this._pairs=[],t&&Qi(t,this,e)}const cf=Wc.prototype;cf.append=function(e,r){this._pairs.push([e,r])};cf.toString=function(e){const r=e?function(n){return e.call(this,n,Nl)}:Nl;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function wb(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function uf(t,e,r){if(!e)return t;const n=r&&r.encode||wb,s=r&&r.serialize;let i;if(s?i=s(e,r):i=C.isURLSearchParams(e)?e.toString():new Wc(e,r).toString(n),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}let Ll=class{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){C.forEach(this.handlers,function(n){n!==null&&e(n)})}};const lf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bb=typeof URLSearchParams<"u"?URLSearchParams:Wc,vb=typeof FormData<"u"?FormData:null,_b=typeof Blob<"u"?Blob:null,Eb={isBrowser:!0,classes:{URLSearchParams:bb,FormData:vb,Blob:_b},protocols:["http","https","file","blob","url","data"]},hf=typeof window<"u"&&typeof document<"u",Sb=(t=>hf&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Ab=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Tb=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hf,hasStandardBrowserEnv:Sb,hasStandardBrowserWebWorkerEnv:Ab},Symbol.toStringTag,{value:"Module"})),sr={...Tb,...Eb};function xb(t,e){return Qi(t,new sr.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return sr.isNode&&C.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function Rb(t){return C.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function kb(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}function df(t){function e(r,n,s,i){let a=r[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),u=i>=r.length;return a=!a&&C.isArray(s)?s.length:a,u?(C.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!o):((!s[a]||!C.isObject(s[a]))&&(s[a]=[]),e(r,n,s[a],i)&&C.isArray(s[a])&&(s[a]=kb(s[a])),!o)}if(C.isFormData(t)&&C.isFunction(t.entries)){const r={};return C.forEachEntry(t,(n,s)=>{e(Rb(n),s,r,0)}),r}return null}function Bb(t,e,r){if(C.isString(t))try{return(e||JSON.parse)(t),C.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Os={transitional:lf,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=C.isObject(e);if(i&&C.isHTMLForm(e)&&(e=new FormData(e)),C.isFormData(e))return s?JSON.stringify(df(e)):e;if(C.isArrayBuffer(e)||C.isBuffer(e)||C.isStream(e)||C.isFile(e)||C.isBlob(e))return e;if(C.isArrayBufferView(e))return e.buffer;if(C.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return xb(e,this.formSerializer).toString();if((o=C.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Qi(o?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),Bb(e)):e}],transformResponse:[function(e){const r=this.transitional||Os.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(e&&C.isString(e)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?re.from(o,re.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sr.classes.FormData,Blob:sr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};C.forEach(["delete","get","head","post","put","patch"],t=>{Os.headers[t]={}});const Pb=C.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ub=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||e[r]&&Pb[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},ql=Symbol("internals");function rs(t){return t&&String(t).trim().toLowerCase()}function mi(t){return t===!1||t==null?t:C.isArray(t)?t.map(mi):String(t)}function $b(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Mb=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function xo(t,e,r,n,s){if(C.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!C.isString(e)){if(C.isString(n))return e.indexOf(n)!==-1;if(C.isRegExp(n))return n.test(e)}}function Ob(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Cb(t,e){const r=C.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,i,a){return this[n].call(this,e,s,i,a)},configurable:!0})})}class qt{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function i(o,u,f){const p=rs(u);if(!p)throw new Error("header name must be a non-empty string");const d=C.findKey(s,p);(!d||s[d]===void 0||f===!0||f===void 0&&s[d]!==!1)&&(s[d||u]=mi(o))}const a=(o,u)=>C.forEach(o,(f,p)=>i(f,p,u));return C.isPlainObject(e)||e instanceof this.constructor?a(e,r):C.isString(e)&&(e=e.trim())&&!Mb(e)?a(Ub(e),r):e!=null&&i(r,e,n),this}get(e,r){if(e=rs(e),e){const n=C.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return $b(s);if(C.isFunction(r))return r.call(this,s,n);if(C.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=rs(e),e){const n=C.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||xo(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function i(a){if(a=rs(a),a){const o=C.findKey(n,a);o&&(!r||xo(n,n[o],o,r))&&(delete n[o],s=!0)}}return C.isArray(e)?e.forEach(i):i(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!e||xo(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const r=this,n={};return C.forEach(this,(s,i)=>{const a=C.findKey(n,i);if(a){r[a]=mi(s),delete r[i];return}const o=e?Ob(i):String(i).trim();o!==i&&delete r[i],r[o]=mi(s),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return C.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&C.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[ql]=this[ql]={accessors:{}}).accessors,s=this.prototype;function i(a){const o=rs(a);n[o]||(Cb(s,a),n[o]=!0)}return C.isArray(e)?e.forEach(i):i(e),this}}qt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);C.reduceDescriptors(qt.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});C.freezeMethods(qt);function Ro(t,e){const r=this||Os,n=e||r,s=qt.from(n.headers);let i=n.data;return C.forEach(t,function(o){i=o.call(r,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function ff(t){return!!(t&&t.__CANCEL__)}function Cs(t,e,r){re.call(this,t??"canceled",re.ERR_CANCELED,e,r),this.name="CanceledError"}C.inherits(Cs,re,{__CANCEL__:!0});function Ib(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new re("Request failed with status code "+r.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const Db=sr.hasStandardBrowserEnv?{write(t,e,r,n,s,i){const a=[t+"="+encodeURIComponent(e)];C.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),C.isString(n)&&a.push("path="+n),C.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Nb(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Lb(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function pf(t,e){return t&&!Nb(e)?Lb(t,e):e}const qb=sr.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function s(i){let a=i;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(a){const o=C.isString(a)?s(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}();function Hb(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Fb(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(u){const f=Date.now(),p=n[i];a||(a=f),r[s]=u,n[s]=f;let d=i,A=0;for(;d!==s;)A+=r[d++],d=d%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),f-a<e)return;const T=p&&f-p;return T?Math.round(A*1e3/T):void 0}}function Hl(t,e){let r=0;const n=Fb(50,250);return s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,o=i-r,u=n(o),f=i<=a;r=i;const p={loaded:i,total:a,progress:a?i/a:void 0,bytes:o,rate:u||void 0,estimated:u&&a&&f?(a-i)/u:void 0,event:s};p[e?"download":"upload"]=!0,t(p)}}const zb=typeof XMLHttpRequest<"u",Kb=zb&&function(t){return new Promise(function(r,n){let s=t.data;const i=qt.from(t.headers).normalize();let{responseType:a,withXSRFToken:o}=t,u;function f(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}let p;if(C.isFormData(s)){if(sr.hasStandardBrowserEnv||sr.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((p=i.getContentType())!==!1){const[E,...k]=p?p.split(";").map($=>$.trim()).filter(Boolean):[];i.setContentType([E||"multipart/form-data",...k].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const E=t.auth.username||"",k=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(E+":"+k))}const A=pf(t.baseURL,t.url);d.open(t.method.toUpperCase(),uf(A,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function T(){if(!d)return;const E=qt.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),$={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:E,config:t,request:d};Ib(function(U){r(U),f()},function(U){n(U),f()},$),d=null}if("onloadend"in d?d.onloadend=T:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(T)},d.onabort=function(){d&&(n(new re("Request aborted",re.ECONNABORTED,t,d)),d=null)},d.onerror=function(){n(new re("Network Error",re.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let k=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const $=t.transitional||lf;t.timeoutErrorMessage&&(k=t.timeoutErrorMessage),n(new re(k,$.clarifyTimeoutError?re.ETIMEDOUT:re.ECONNABORTED,t,d)),d=null},sr.hasStandardBrowserEnv&&(o&&C.isFunction(o)&&(o=o(t)),o||o!==!1&&qb(A))){const E=t.xsrfHeaderName&&t.xsrfCookieName&&Db.read(t.xsrfCookieName);E&&i.set(t.xsrfHeaderName,E)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&C.forEach(i.toJSON(),function(k,$){d.setRequestHeader($,k)}),C.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),a&&a!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",Hl(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",Hl(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=E=>{d&&(n(!E||E.type?new Cs(null,t,d):E),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));const m=Hb(A);if(m&&sr.protocols.indexOf(m)===-1){n(new re("Unsupported protocol "+m+":",re.ERR_BAD_REQUEST,t));return}d.send(s||null)})},wc={http:yb,xhr:Kb};C.forEach(wc,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Fl=t=>`- ${t}`,jb=t=>C.isFunction(t)||t===null||t===!1,yf={getAdapter:t=>{t=C.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let i=0;i<e;i++){r=t[i];let a;if(n=r,!jb(r)&&(n=wc[(a=String(r)).toLowerCase()],n===void 0))throw new re(`Unknown adapter '${a}'`);if(n)break;s[a||"#"+i]=n}if(!n){const i=Object.entries(s).map(([o,u])=>`adapter ${o} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=e?i.length>1?`since :
`+i.map(Fl).join(`
`):" "+Fl(i[0]):"as no adapter specified";throw new re("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:wc};function ko(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Cs(null,t)}function zl(t){return ko(t),t.headers=qt.from(t.headers),t.data=Ro.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),yf.getAdapter(t.adapter||Os.adapter)(t).then(function(n){return ko(t),n.data=Ro.call(t,t.transformResponse,n),n.headers=qt.from(n.headers),n},function(n){return ff(n)||(ko(t),n&&n.response&&(n.response.data=Ro.call(t,t.transformResponse,n.response),n.response.headers=qt.from(n.response.headers))),Promise.reject(n)})}const Kl=t=>t instanceof qt?{...t}:t;function kn(t,e){e=e||{};const r={};function n(f,p,d){return C.isPlainObject(f)&&C.isPlainObject(p)?C.merge.call({caseless:d},f,p):C.isPlainObject(p)?C.merge({},p):C.isArray(p)?p.slice():p}function s(f,p,d){if(C.isUndefined(p)){if(!C.isUndefined(f))return n(void 0,f,d)}else return n(f,p,d)}function i(f,p){if(!C.isUndefined(p))return n(void 0,p)}function a(f,p){if(C.isUndefined(p)){if(!C.isUndefined(f))return n(void 0,f)}else return n(void 0,p)}function o(f,p,d){if(d in e)return n(f,p);if(d in t)return n(void 0,f)}const u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(f,p)=>s(Kl(f),Kl(p),!0)};return C.forEach(Object.keys(Object.assign({},t,e)),function(p){const d=u[p]||s,A=d(t[p],e[p],p);C.isUndefined(A)&&d!==o||(r[p]=A)}),r}const gf="1.6.8",Vc={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Vc[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const jl={};Vc.transitional=function(e,r,n){function s(i,a){return"[Axios v"+gf+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,o)=>{if(e===!1)throw new re(s(a," has been removed"+(r?" in "+r:"")),re.ERR_DEPRECATED);return r&&!jl[a]&&(jl[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,a,o):!0}};function Wb(t,e,r){if(typeof t!="object")throw new re("options must be an object",re.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],a=e[i];if(a){const o=t[i],u=o===void 0||a(o,i,t);if(u!==!0)throw new re("option "+i+" must be "+u,re.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new re("Unknown option "+i,re.ERR_BAD_OPTION)}}const bc={assertOptions:Wb,validators:Vc},_r=bc.validators;let Vr=class{constructor(e){this.defaults=e,this.interceptors={request:new Ll,response:new Ll}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=kn(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&bc.assertOptions(n,{silentJSONParsing:_r.transitional(_r.boolean),forcedJSONParsing:_r.transitional(_r.boolean),clarifyTimeoutError:_r.transitional(_r.boolean)},!1),s!=null&&(C.isFunction(s)?r.paramsSerializer={serialize:s}:bc.assertOptions(s,{encode:_r.function,serialize:_r.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&C.merge(i.common,i[r.method]);i&&C.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),r.headers=qt.concat(a,i);const o=[];let u=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(r)===!1||(u=u&&E.synchronous,o.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let p,d=0,A;if(!u){const m=[zl.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,f),A=m.length,p=Promise.resolve(r);d<A;)p=p.then(m[d++],m[d++]);return p}A=o.length;let T=r;for(d=0;d<A;){const m=o[d++],E=o[d++];try{T=m(T)}catch(k){E.call(this,k);break}}try{p=zl.call(this,T)}catch(m){return Promise.reject(m)}for(d=0,A=f.length;d<A;)p=p.then(f[d++],f[d++]);return p}getUri(e){e=kn(this.defaults,e);const r=pf(e.baseURL,e.url);return uf(r,e.params,e.paramsSerializer)}};C.forEach(["delete","get","head","options"],function(e){Vr.prototype[e]=function(r,n){return this.request(kn(n||{},{method:e,url:r,data:(n||{}).data}))}});C.forEach(["post","put","patch"],function(e){function r(n){return function(i,a,o){return this.request(kn(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Vr.prototype[e]=r(),Vr.prototype[e+"Form"]=r(!0)});class Gc{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(o=>{n.subscribe(o),i=o}).then(s);return a.cancel=function(){n.unsubscribe(i)},a},e(function(i,a,o){n.reason||(n.reason=new Cs(i,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new Gc(function(s){e=s}),cancel:e}}}function Vb(t){return function(r){return t.apply(null,r)}}function Gb(t){return C.isObject(t)&&t.isAxiosError===!0}const vc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vc).forEach(([t,e])=>{vc[e]=t});function mf(t){const e=new Vr(t),r=Xd(Vr.prototype.request,e);return C.extend(r,Vr.prototype,e,{allOwnKeys:!0}),C.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return mf(kn(t,s))},r}const tt=mf(Os);tt.Axios=Vr;tt.CanceledError=Cs;tt.CancelToken=Gc;tt.isCancel=ff;tt.VERSION=gf;tt.toFormData=Qi;tt.AxiosError=re;tt.Cancel=tt.CanceledError;tt.all=function(e){return Promise.all(e)};tt.spread=Vb;tt.isAxiosError=Gb;tt.mergeConfig=kn;tt.AxiosHeaders=qt;tt.formToJSON=t=>df(C.isHTMLForm(t)?new FormData(t):t);tt.getAdapter=yf.getAdapter;tt.HttpStatusCode=vc;tt.default=tt;class Wl{constructor(e){S(this,"_instance");S(this,"cookieMap",new Map);S(this,"config");e&&this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e),this._instance=void 0}getConfig(){return this.config}async requestInterceptor(e){const r=this.cookieMap.get(new URL(e.baseURL??"").host);return r&&(e.headers.cookie=r),e}async responseInterceptor(e){var n;const r=(n=e.headers)==null?void 0:n["set-cookie"];return r&&this.cookieMap.set(e.request.host,r),e}mergeDefaults(e){return e.headers??(e.headers={}),e.network&&!Object.keys(e.headers).includes("x-network")&&(e.headers["x-network"]=e.network),{url:e.url,timeout:e.timeout??2e4,logging:e.logging??!1,logger:e.logger??console.log,headers:{...e.headers,"x-irys-arweave-version":vf.VERSION},withCredentials:e.withCredentials??!1,retry:{retries:3,maxTimeout:5e3}}}async get(e,r){var n;try{return await this.request(e,{...r,method:"GET"})}catch(s){if((n=s.response)!=null&&n.status)return s.response;throw s}}async post(e,r,n){var s;try{return await this.request(e,{data:r,...n,method:"POST"})}catch(i){if((s=i.response)!=null&&s.status)return i.response;throw i}}get instance(){if(this._instance)return this._instance;const e=tt.create({baseURL:this.config.url.toString(),timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:this.config.headers,withCredentials:this.config.withCredentials});return this.config.withCredentials&&(e.interceptors.request.use(this.requestInterceptor.bind(this)),e.interceptors.response.use(this.responseInterceptor.bind(this))),this.config.logging&&(e.interceptors.request.use(r=>(this.config.logger(`Requesting: ${r.baseURL}/${r.url}`),r)),e.interceptors.response.use(r=>(this.config.logger(`Response: ${r.config.url} - ${r.status}`),r))),this._instance=e}async request(e,r){const n=this.instance,s=(r==null?void 0:r.url)??new URL(e,this.config.url).toString();return Ir(i=>n({...r,url:s}),{...this.config.retry,...r==null?void 0:r.retry})}}const Vl=t=>typeof t!="string"&&"url"in t,Jb={maxAttempts:15,randomlySelect:!0};class Xb{constructor({gateways:e,miners:r,opts:n}){S(this,"minerInstances",[]);S(this,"globalConfig");S(this,"gatewayInstances",[]);this.globalConfig=(n==null?void 0:n.globalConfig)??{},r&&this.addMiners(r),e&&this.addGateways(e)}async addPeersFrom(e,r){const n=(await this.get("",{url:new URL("/peers",e).toString()})).data;this.addMiners(n.slice(0,r==null?void 0:r.limit).map(s=>`http://${s}`))}addMiners(e){e.forEach(r=>this.minerInstances.push(new Wl(Vl(r)?r:{url:new URL(r),...this.globalConfig})))}addGateways(e){e.forEach(r=>this.gatewayInstances.push(new Wl(Vl(r)?r:{url:new URL(r),...this.globalConfig})))}async get(e,r){return this.request(e,{...r,method:"GET"})}async post(e,r,n){return this.request(e,{data:r,...n,method:"POST"})}async request(e,r){const n={...Jb,...r==null?void 0:r.fallback};let s=0;const i=r!=null&&r.gatewayOnly?this.gatewayInstances:this.gatewayInstances.concat(this.minerInstances),a=Math.min(Math.max(n==null?void 0:n.maxAttempts,1),i.length),o=n==null?void 0:n.onFallback;if(i.length===0)throw new Error("Unable to run request due to 0 configured gateways/miners.");for(;s++<a;){const u=i.at(n!=null&&n.randomlySelect?Math.floor(Math.random()*i.length):s-1);if(u)try{return await u.request(e,{...r})}catch(f){if(o==null||o(f,u),s>=a)throw f}}throw new Error("unreachable")}}class wf{get(e,r){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);if(this[e]instanceof Uint8Array)return r&&r.decode&&r.string?Kc(this[e]):r&&r.decode&&!r.string?this[e]:Jt(this[e]);if(this[e]instanceof Array){if((r==null?void 0:r.decode)!==void 0||(r==null?void 0:r.string)!==void 0)throw e==="tags"&&console.warn(`Did you mean to use 'transaction["tags"]' ?`),new Error("Cannot decode or stringify an array.");return this[e]}return r&&r.decode==!0?r&&r.string?Kd(this[e]):Gt(this[e]):this[e]}}class Zb extends wf{constructor(r,n){super();S(this,"name");S(this,"value");this.name=r,this.value=n}}let Pt=class extends wf{constructor({attributes:r,deps:n}){super();S(this,"format",2);S(this,"id","");S(this,"last_tx","");S(this,"owner","");S(this,"tags",[]);S(this,"target","");S(this,"quantity","0");S(this,"data_size","0");S(this,"data",new Uint8Array);S(this,"data_root","");S(this,"reward","0");S(this,"signature","");S(this,"merkle");S(this,"deepHash");S(this,"chunks");this.merkle=n.merkle,this.deepHash=n.deepHash,Object.assign(this,r),typeof this.data=="string"&&(this.data=Gt(this.data)),r.tags&&(this.tags=r.tags)}addTag(r,n){this.tags.push({name:yc(r),value:yc(n)})}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:Jt(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(r){this.owner=r}setSignature({id:r,owner:n,reward:s,tags:i,signature:a}){this.id=r,this.owner=n,s&&(this.reward=s),i&&(this.tags=i),this.signature=a}async prepareChunks(r){!this.chunks&&r.byteLength>0&&(this.chunks=await this.merkle.generateTransactionChunks(r),this.data_root=Jt(this.chunks.data_root)),!this.chunks&&r.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(r,n){if(!this.chunks)throw new Error("Chunks have not been prepared");const s=this.chunks.proofs[r],i=this.chunks.chunks[r];return{data_root:this.data_root,data_size:this.data_size,data_path:Jt(s.proof),offset:s.offset.toString(),chunk:Jt(n.slice(i.minByteRange,i.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:const r=this.tags.reduce((s,i)=>pt([s,Gt(i.name),Gt(i.value)]),new Uint8Array);return pt([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),ne(this.quantity),ne(this.reward),this.get("last_tx",{decode:!0,string:!1}),r]);case 2:this.data_root||await this.prepareChunks(this.data);const n=this.tags.map(s=>[Gt(s.name),Gt(s.value)]);return await this.deepHash.deepHash([ne(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),ne(this.quantity),ne(this.reward),this.get("last_tx",{decode:!0,string:!1}),n,ne(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}};class Yb{constructor(e){S(this,"api");this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}const Gl=1,Qb=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],Jl=1e3*40;class ps{constructor({deps:e,transaction:r}){S(this,"chunkIndex",0);S(this,"txPosted",!1);S(this,"transaction");S(this,"lastRequestTimeEnd",0);S(this,"totalErrors",0);S(this,"data");S(this,"lastResponseStatus",0);S(this,"lastResponseError","");S(this,"crypto");S(this,"api");S(this,"merkle");S(this,"deepHash");if(!r.id)throw new Error("Transaction is not signed");if(!r.chunks)throw new Error("Transaction chunks not prepared");this.api=e.api,this.crypto=e.crypto,this.merkle=e.merkle,this.deepHash=e.deepHash,this.data=r.data,this.transaction=new Pt({attributes:Object.assign({},r,{data:new Uint8Array(0)}),deps:{merkle:e.merkle,deepHash:e.deepHash}})}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let r=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+Jl-Date.now(),Jl);if(r>0&&(r=r-r*Math.random()*.3,await new Promise(a=>setTimeout(a,r))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);const n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await this.merkle.validatePath(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),Gt(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const i=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(a=>(console.error(a.message),{status:-1,data:{error:a.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=i.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=fs(i),Qb.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized({serialized:e,data:r,deps:n}){if(!e||typeof e.chunkIndex!="number"||typeof e.transaction!="object")throw new Error("Serialized object does not match expected format.");const s=new Pt(e.transaction);s.chunks||await s.prepareChunks(r);const i=new ps({deps:n,transaction:s});if(i.chunkIndex=e.chunkIndex,i.lastRequestTimeEnd=e.lastRequestTimeEnd,i.lastResponseError=e.lastResponseError,i.lastResponseStatus=e.lastResponseStatus,i.txPosted=e.txPosted,i.data=r,i.transaction.data_root!==e.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return i}static async fromTransactionId(e,r){const n=await e.get(`tx/${r}`);if(n.status!==200)throw new Error(`Tx ${r} not found: ${n.status}`);const s=n.data;return s.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:s}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=Gl){this.transaction.data=this.data;const n=await this.api.post("tx",this.transaction).catch(s=>(console.error(s),{status:-1,data:{error:s.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=Gl;return}throw this.lastResponseError=fs(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}const r=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=r.status,!(r.status>=200&&r.status<300))throw this.lastResponseError=fs(r),new Error(`Unable to upload transaction: ${r.status}, ${this.lastResponseError}`);this.txPosted=!0}}class ev{constructor({deps:e}){S(this,"api");S(this,"crypto");S(this,"chunks");S(this,"merkle");S(this,"deepHash");this.api=e.api,this.crypto=e.crypto,this.chunks=e.chunks,this.merkle=e.merkle,this.deepHash=e.deepHash}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then(e=>e.data)}getPrice(e,r){const n=r?`price/${e}/${r}`:`price/${e}`;return this.api.get(n,{transformResponse:[function(s){return s}]}).then(s=>s.data)}async get(e){const r=await this.api.get(`tx/${e}`);if(r.status==200){const n=parseInt(r.data.data_size);if(r.data.format>=2&&n>0&&n<=1024*1024*12){const s=await this.getData(e);return new Pt({attributes:{...r.data,data:s},deps:{merkle:this.merkle,deepHash:this.deepHash}})}return new Pt({attributes:{...r.data,format:r.data.format||1},deps:{merkle:this.merkle,deepHash:this.deepHash}})}throw r.status===404?new ds("TX_NOT_FOUND"):r.status===410?new ds("TX_FAILED"):new ds("TX_INVALID")}fromRaw(e){return new Pt({attributes:e,deps:{merkle:this.merkle,deepHash:this.deepHash}})}getStatus(e){return this.api.get(`tx/${e}/status`).then(r=>r.status===200?{status:200,confirmed:r.data}:{status:r.status,confirmed:null})}async getData(e){let r;try{r=(await this.api.get(`/${e}`,{responseType:"arraybuffer"})).data}catch(n){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(n)}if(!r){console.warn(`Falling back to chunks for ${e}`);try{r=await this.chunks.downloadChunkedData(e)}catch(n){console.error(`Error while trying to download chunked data for ${e}`),console.error(n)}}if(!r)throw new Error(`${e} data was not found!`);return r}async getDataStream(e){let r;try{const n=(await this.api.get(`/${e}`,{responseType:"arraybuffer"})).data;r=async function*(){yield n}()}catch(n){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(n)}if(!r){console.warn(`Falling back to chunks for ${e}`);try{r=this.chunks.concurrentChunkDownloader(e)}catch(n){console.error(`Error while trying to download chunked data for ${e}`),console.error(n)}}if(!r)throw new Error(`${e} data was not found!`);return r}async sign(e,r,n){const i=typeof r=="object"&&(o=>{let u=!0;return["n","e","d","p","q","dp","dq","qi"].map(f=>!(f in o)&&(u=!1)),u})(r),a=typeof arweaveWallet=="object";if(!i&&!a)throw new Error("No valid JWK or external wallet found to sign transaction.");if(a){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}e.tags=e.tags.map(u=>new Zb(u.name,u.value));const o=await arweaveWallet.sign(e,n);e.setSignature({id:o.id,owner:o.owner,reward:o.reward,tags:o.tags,signature:o.signature})}else if(i){e.setOwner(r.n);const o=await e.getSignatureData(),u=await this.crypto.sign(r,o,n),f=await this.crypto.hash(u);e.setSignature({id:Jt(f),owner:r.n,signature:Jt(u)})}else throw new Error("An error occurred while signing. Check wallet is valid")}async verify(e){const r=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),s=Jt(await this.crypto.hash(n));if(e.id!==s)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,r,n)}async post(e){if(typeof e=="string"?e=new Pt({attributes:JSON.parse(e),deps:{merkle:this.merkle,deepHash:this.deepHash}}):typeof e.readInt32BE=="function"?e=new Pt({attributes:JSON.parse(e.toString()),deps:{merkle:this.merkle,deepHash:this.deepHash}}):typeof e=="object"&&!(e instanceof Pt)&&(e=new Pt({attributes:e,deps:{merkle:this.merkle,deepHash:this.deepHash}})),!(e instanceof Pt))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);const r=await this.getUploader(e,e.data);try{for(;!r.isComplete;)await r.uploadChunk()}catch(n){if(r.lastResponseStatus>0)return{status:r.lastResponseStatus,statusText:r.lastResponseError,data:{error:r.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,r){let n;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),e instanceof Pt){if(r||(r=e.data),!(r instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(r),n=new ps({transaction:e,deps:{api:this.api,crypto:this.crypto,merkle:this.merkle,deepHash:this.deepHash}}),(!n.data||n.data.length===0)&&(n.data=r)}else{if(typeof e=="string"&&(e=await ps.fromTransactionId(this.api,e)),!r||!(r instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await ps.fromSerialized({deps:{api:this.api,merkle:this.merkle,crypto:this.crypto,deepHash:this.deepHash},serialized:e,data:r})}return n}async*upload(e,r){const n=await this.getUploader(e,r);for(;!n.isComplete;)await n.uploadChunk(),yield n;return n}}class tv{constructor(e,r){S(this,"api");S(this,"crypto");this.api=e,this.crypto=r}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(r){return r}]}).then(r=>r.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(r=>r.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return Jt(await this.crypto.hash(Gt(e)))}}var Ur;let bf=(Ur=class{constructor(e){S(this,"config");S(this,"api");S(this,"wallets");S(this,"transactions");S(this,"network");S(this,"blocks");S(this,"chunks");S(this,"crypto");S(this,"deepHash");S(this,"merkle");if(this.config=e,!e.crypto)throw new Error("config.crypto is required");this.crypto=Mw(e.crypto,{deepHash:Ow}),this.deepHash=this.crypto.deepHash;const r=e.gateways?Array.isArray(e.gateways)?e.gateways:[e.gateways]:void 0;this.api=new Xb({gateways:r,miners:e.miners}),this.wallets=new tv(this.api,this.crypto),this.chunks=new $w(this.api),this.network=new Yb(this.api),this.blocks=new Bw(this.api,this.network),this.merkle=new Uw({deps:{crypto:this.crypto}}),this.transactions=new ev({deps:{api:this.api,crypto:e.crypto,chunks:this.chunks,merkle:this.merkle,deepHash:this.deepHash}})}get utils(){return Ur.utils}getConfig(){return this.config}async createTransaction(e,r){const n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&r&&r!=="use_wallet"&&(n.owner=r.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=ne(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){const i=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(i,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);const s=new Pt({attributes:n,deps:{merkle:this.merkle,deepHash:this.deepHash}});return await s.getSignatureData(),s}},S(Ur,"init"),S(Ur,"utils",kw),S(Ur,"VERSION","0.0.1"),Ur);const vf=bf;class Jc extends bf{constructor(e,r){super({crypto:(r==null?void 0:r.crypto)??new yi,...r,gateways:e??"https://arweave.net"})}static init(e){return new Jc(e)}}const rv=yi.default?yi.default:yi;class _f extends rv{getPublicKey(e){throw new Error("Unimplemented")}}let nv;function ct(){return nv??(nv=new _f)}class Ef{constructor(e,r){S(this,"_key");S(this,"pk");S(this,"signatureType",1);S(this,"ownerLength",de[1].pubLength);S(this,"signatureLength",de[1].sigLength);S(this,"_publicKey");this._key=e,this.pk=r,r||(this.pk=ct().getPublicKey(JSON.parse(e)))}get publicKey(){return this._publicKey}sign(e){return Jr.createSign("sha256").update(e).sign({key:this._key,padding:Jr.constants.RSA_PKCS1_PSS_PADDING})}static async verify(e,r,n){return await ct().verify(Buffer.isBuffer(e)?J.encode(e):e,r,n)}}var Sf={},Af={},wi=bt,_n=wi.Buffer,$t={},Mt;for(Mt in wi)wi.hasOwnProperty(Mt)&&(Mt==="SlowBuffer"||Mt==="Buffer"||($t[Mt]=wi[Mt]));var En=$t.Buffer={};for(Mt in _n)_n.hasOwnProperty(Mt)&&(Mt==="allocUnsafe"||Mt==="allocUnsafeSlow"||(En[Mt]=_n[Mt]));$t.Buffer.prototype=_n.prototype;(!En.from||En.from===Uint8Array.from)&&(En.from=function(t,e,r){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return _n(t,e,r)});En.alloc||(En.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=_n(t);return!e||e.length===0?n.fill(0):typeof r=="string"?n.fill(e,r):n.fill(e),n});if(!$t.kStringMaxLength)try{$t.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}$t.constants||($t.constants={MAX_LENGTH:$t.kMaxLength},$t.kStringMaxLength&&($t.constants.MAX_STRING_LENGTH=$t.kStringMaxLength));var Xc=$t,Zc={};const sv=en;function Kt(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}Zc.Reporter=Kt;Kt.prototype.isError=function(e){return e instanceof Bn};Kt.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};Kt.prototype.restore=function(e){const r=this._reporterState;r.obj=e.obj,r.path=r.path.slice(0,e.pathLen)};Kt.prototype.enterKey=function(e){return this._reporterState.path.push(e)};Kt.prototype.exitKey=function(e){const r=this._reporterState;r.path=r.path.slice(0,e-1)};Kt.prototype.leaveKey=function(e,r,n){const s=this._reporterState;this.exitKey(e),s.obj!==null&&(s.obj[r]=n)};Kt.prototype.path=function(){return this._reporterState.path.join("/")};Kt.prototype.enterObject=function(){const e=this._reporterState,r=e.obj;return e.obj={},r};Kt.prototype.leaveObject=function(e){const r=this._reporterState,n=r.obj;return r.obj=e,n};Kt.prototype.error=function(e){let r;const n=this._reporterState,s=e instanceof Bn;if(s?r=e:r=new Bn(n.path.map(function(i){return"["+JSON.stringify(i)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw r;return s||n.errors.push(r),r};Kt.prototype.wrapResult=function(e){const r=this._reporterState;return r.options.partial?{result:this.isError(e)?null:e,errors:r.errors}:e};function Bn(t,e){this.path=t,this.rethrow(e)}sv(Bn,Error);Bn.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,Bn),!this.stack)try{throw new Error(this.message)}catch(r){this.stack=r.stack}return this};var Is={};const iv=en,ea=Zc.Reporter,Pn=Xc.Buffer;function Ft(t,e){if(ea.call(this,e),!Pn.isBuffer(t)){this.error("Input not Buffer");return}this.base=t,this.offset=0,this.length=t.length}iv(Ft,ea);Is.DecoderBuffer=Ft;Ft.isDecoderBuffer=function(e){return e instanceof Ft?!0:typeof e=="object"&&Pn.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};Ft.prototype.save=function(){return{offset:this.offset,reporter:ea.prototype.save.call(this)}};Ft.prototype.restore=function(e){const r=new Ft(this.base);return r.offset=e.offset,r.length=this.offset,this.offset=e.offset,ea.prototype.restore.call(this,e.reporter),r};Ft.prototype.isEmpty=function(){return this.offset===this.length};Ft.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};Ft.prototype.skip=function(e,r){if(!(this.offset+e<=this.length))return this.error(r||"DecoderBuffer overrun");const n=new Ft(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n};Ft.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function Un(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(r){return Un.isEncoderBuffer(r)||(r=new Un(r,e)),this.length+=r.length,r},this);else if(typeof t=="number"){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if(typeof t=="string")this.value=t,this.length=Pn.byteLength(t);else if(Pn.isBuffer(t))this.value=t,this.length=t.length;else return e.error("Unsupported type: "+typeof t)}Is.EncoderBuffer=Un;Un.isEncoderBuffer=function(e){return e instanceof Un?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};Un.prototype.join=function(e,r){return e||(e=Pn.alloc(this.length)),r||(r=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,r),r+=n.length}):(typeof this.value=="number"?e[r]=this.value:typeof this.value=="string"?e.write(this.value,r):Pn.isBuffer(this.value)&&this.value.copy(e,r),r+=this.length)),e};const av=Zc.Reporter,ov=Is.EncoderBuffer,cv=Is.DecoderBuffer,wt=cg,Tf=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],uv=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(Tf),lv=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function oe(t,e,r){const n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}var xf=oe;const hv=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];oe.prototype.clone=function(){const e=this._baseState,r={};hv.forEach(function(s){r[s]=e[s]});const n=new this.constructor(r.parent);return n._baseState=r,n};oe.prototype._wrap=function(){const e=this._baseState;uv.forEach(function(r){this[r]=function(){const s=new this.constructor(this);return e.children.push(s),s[r].apply(s,arguments)}},this)};oe.prototype._init=function(e){const r=this._baseState;wt(r.parent===null),e.call(this),r.children=r.children.filter(function(n){return n._baseState.parent===this},this),wt.equal(r.children.length,1,"Root node can have only one child")};oe.prototype._useArgs=function(e){const r=this._baseState,n=e.filter(function(s){return s instanceof this.constructor},this);e=e.filter(function(s){return!(s instanceof this.constructor)},this),n.length!==0&&(wt(r.children===null),r.children=n,n.forEach(function(s){s._baseState.parent=this},this)),e.length!==0&&(wt(r.args===null),r.args=e,r.reverseArgs=e.map(function(s){if(typeof s!="object"||s.constructor!==Object)return s;const i={};return Object.keys(s).forEach(function(a){a==(a|0)&&(a|=0);const o=s[a];i[o]=a}),i}))};lv.forEach(function(t){oe.prototype[t]=function(){const r=this._baseState;throw new Error(t+" not implemented for encoding: "+r.enc)}});Tf.forEach(function(t){oe.prototype[t]=function(){const r=this._baseState,n=Array.prototype.slice.call(arguments);return wt(r.tag===null),r.tag=t,this._useArgs(n),this}});oe.prototype.use=function(e){wt(e);const r=this._baseState;return wt(r.use===null),r.use=e,this};oe.prototype.optional=function(){const e=this._baseState;return e.optional=!0,this};oe.prototype.def=function(e){const r=this._baseState;return wt(r.default===null),r.default=e,r.optional=!0,this};oe.prototype.explicit=function(e){const r=this._baseState;return wt(r.explicit===null&&r.implicit===null),r.explicit=e,this};oe.prototype.implicit=function(e){const r=this._baseState;return wt(r.explicit===null&&r.implicit===null),r.implicit=e,this};oe.prototype.obj=function(){const e=this._baseState,r=Array.prototype.slice.call(arguments);return e.obj=!0,r.length!==0&&this._useArgs(r),this};oe.prototype.key=function(e){const r=this._baseState;return wt(r.key===null),r.key=e,this};oe.prototype.any=function(){const e=this._baseState;return e.any=!0,this};oe.prototype.choice=function(e){const r=this._baseState;return wt(r.choice===null),r.choice=e,this._useArgs(Object.keys(e).map(function(n){return e[n]})),this};oe.prototype.contains=function(e){const r=this._baseState;return wt(r.use===null),r.contains=e,this};oe.prototype._decode=function(e,r){const n=this._baseState;if(n.parent===null)return e.wrapResult(n.children[0]._decode(e,r));let s=n.default,i=!0,a=null;if(n.key!==null&&(a=e.enterKey(n.key)),n.optional){let u=null;if(n.explicit!==null?u=n.explicit:n.implicit!==null?u=n.implicit:n.tag!==null&&(u=n.tag),u===null&&!n.any){const f=e.save();try{n.choice===null?this._decodeGeneric(n.tag,e,r):this._decodeChoice(e,r),i=!0}catch{i=!1}e.restore(f)}else if(i=this._peekTag(e,u,n.any),e.isError(i))return i}let o;if(n.obj&&i&&(o=e.enterObject()),i){if(n.explicit!==null){const f=this._decodeTag(e,n.explicit);if(e.isError(f))return f;e=f}const u=e.offset;if(n.use===null&&n.choice===null){let f;n.any&&(f=e.save());const p=this._decodeTag(e,n.implicit!==null?n.implicit:n.tag,n.any);if(e.isError(p))return p;n.any?s=e.raw(f):e=p}if(r&&r.track&&n.tag!==null&&r.track(e.path(),u,e.length,"tagged"),r&&r.track&&n.tag!==null&&r.track(e.path(),e.offset,e.length,"content"),n.any||(n.choice===null?s=this._decodeGeneric(n.tag,e,r):s=this._decodeChoice(e,r)),e.isError(s))return s;if(!n.any&&n.choice===null&&n.children!==null&&n.children.forEach(function(p){p._decode(e,r)}),n.contains&&(n.tag==="octstr"||n.tag==="bitstr")){const f=new cv(s);s=this._getUse(n.contains,e._reporterState.obj)._decode(f,r)}}return n.obj&&i&&(s=e.leaveObject(o)),n.key!==null&&(s!==null||i===!0)?e.leaveKey(a,n.key,s):a!==null&&e.exitKey(a),s};oe.prototype._decodeGeneric=function(e,r,n){const s=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(r,e,s.args[0],n):/str$/.test(e)?this._decodeStr(r,e,n):e==="objid"&&s.args?this._decodeObjid(r,s.args[0],s.args[1],n):e==="objid"?this._decodeObjid(r,null,null,n):e==="gentime"||e==="utctime"?this._decodeTime(r,e,n):e==="null_"?this._decodeNull(r,n):e==="bool"?this._decodeBool(r,n):e==="objDesc"?this._decodeStr(r,e,n):e==="int"||e==="enum"?this._decodeInt(r,s.args&&s.args[0],n):s.use!==null?this._getUse(s.use,r._reporterState.obj)._decode(r,n):r.error("unknown tag: "+e)};oe.prototype._getUse=function(e,r){const n=this._baseState;return n.useDecoder=this._use(e,r),wt(n.useDecoder._baseState.parent===null),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder};oe.prototype._decodeChoice=function(e,r){const n=this._baseState;let s=null,i=!1;return Object.keys(n.choice).some(function(a){const o=e.save(),u=n.choice[a];try{const f=u._decode(e,r);if(e.isError(f))return!1;s={type:a,value:f},i=!0}catch{return e.restore(o),!1}return!0},this),i?s:e.error("Choice not matched")};oe.prototype._createEncoderBuffer=function(e){return new ov(e,this.reporter)};oe.prototype._encode=function(e,r,n){const s=this._baseState;if(s.default!==null&&s.default===e)return;const i=this._encodeValue(e,r,n);if(i!==void 0&&!this._skipDefault(i,r,n))return i};oe.prototype._encodeValue=function(e,r,n){const s=this._baseState;if(s.parent===null)return s.children[0]._encode(e,r||new av);let i=null;if(this.reporter=r,s.optional&&e===void 0)if(s.default!==null)e=s.default;else return;let a=null,o=!1;if(s.any)i=this._createEncoderBuffer(e);else if(s.choice)i=this._encodeChoice(e,r);else if(s.contains)a=this._getUse(s.contains,n)._encode(e,r),o=!0;else if(s.children)a=s.children.map(function(u){if(u._baseState.tag==="null_")return u._encode(null,r,e);if(u._baseState.key===null)return r.error("Child should have a key");const f=r.enterKey(u._baseState.key);if(typeof e!="object")return r.error("Child expected, but input is not object");const p=u._encode(e[u._baseState.key],r,e);return r.leaveKey(f),p},this).filter(function(u){return u}),a=this._createEncoderBuffer(a);else if(s.tag==="seqof"||s.tag==="setof"){if(!(s.args&&s.args.length===1))return r.error("Too many args for : "+s.tag);if(!Array.isArray(e))return r.error("seqof/setof, but data is not Array");const u=this.clone();u._baseState.implicit=null,a=this._createEncoderBuffer(e.map(function(f){const p=this._baseState;return this._getUse(p.args[0],e)._encode(f,r)},u))}else s.use!==null?i=this._getUse(s.use,n)._encode(e,r):(a=this._encodePrimitive(s.tag,e),o=!0);if(!s.any&&s.choice===null){const u=s.implicit!==null?s.implicit:s.tag,f=s.implicit===null?"universal":"context";u===null?s.use===null&&r.error("Tag could be omitted only for .use()"):s.use===null&&(i=this._encodeComposite(u,o,f,a))}return s.explicit!==null&&(i=this._encodeComposite(s.explicit,!1,"context",i)),i};oe.prototype._encodeChoice=function(e,r){const n=this._baseState,s=n.choice[e.type];return s||wt(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),s._encode(e.value,r)};oe.prototype._encodePrimitive=function(e,r){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(r,e);if(e==="objid"&&n.args)return this._encodeObjid(r,n.reverseArgs[0],n.args[1]);if(e==="objid")return this._encodeObjid(r,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(r,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(r,n.args&&n.reverseArgs[0]);if(e==="bool")return this._encodeBool(r);if(e==="objDesc")return this._encodeStr(r,e);throw new Error("Unsupported tag: "+e)};oe.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};oe.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)};var Yc={};(function(t){function e(r){const n={};return Object.keys(r).forEach(function(s){(s|0)==s&&(s=s|0);const i=r[s];n[i]=s}),n}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e(t.tag)})(Yc);const dv=en,yr=Xc.Buffer,Rf=xf,Bo=Yc;function kf(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new Xt,this.tree._init(t.body)}var Bf=kf;kf.prototype.encode=function(e,r){return this.tree._encode(e,r).join()};function Xt(t){Rf.call(this,"der",t)}dv(Xt,Rf);Xt.prototype._encodeComposite=function(e,r,n,s){const i=fv(e,r,n,this.reporter);if(s.length<128){const u=yr.alloc(2);return u[0]=i,u[1]=s.length,this._createEncoderBuffer([u,s])}let a=1;for(let u=s.length;u>=256;u>>=8)a++;const o=yr.alloc(2+a);o[0]=i,o[1]=128|a;for(let u=1+a,f=s.length;f>0;u--,f>>=8)o[u]=f&255;return this._createEncoderBuffer([o,s])};Xt.prototype._encodeStr=function(e,r){if(r==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(r==="bmpstr"){const n=yr.alloc(e.length*2);for(let s=0;s<e.length;s++)n.writeUInt16BE(e.charCodeAt(s),s*2);return this._createEncoderBuffer(n)}else return r==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):r==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(r)?this._createEncoderBuffer(e):r==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+r+" unsupported")};Xt.prototype._encodeObjid=function(e,r,n){if(typeof e=="string"){if(!r)return this.reporter.error("string objid given, but no values map found");if(!r.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=r[e].split(/[\s.]+/g);for(let o=0;o<e.length;o++)e[o]|=0}else if(Array.isArray(e)){e=e.slice();for(let o=0;o<e.length;o++)e[o]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let s=0;for(let o=0;o<e.length;o++){let u=e[o];for(s++;u>=128;u>>=7)s++}const i=yr.alloc(s);let a=i.length-1;for(let o=e.length-1;o>=0;o--){let u=e[o];for(i[a--]=u&127;(u>>=7)>0;)i[a--]=128|u&127}return this._createEncoderBuffer(i)};function kt(t){return t<10?"0"+t:t}Xt.prototype._encodeTime=function(e,r){let n;const s=new Date(e);return r==="gentime"?n=[kt(s.getUTCFullYear()),kt(s.getUTCMonth()+1),kt(s.getUTCDate()),kt(s.getUTCHours()),kt(s.getUTCMinutes()),kt(s.getUTCSeconds()),"Z"].join(""):r==="utctime"?n=[kt(s.getUTCFullYear()%100),kt(s.getUTCMonth()+1),kt(s.getUTCDate()),kt(s.getUTCHours()),kt(s.getUTCMinutes()),kt(s.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+r+" time is not supported yet"),this._encodeStr(n,"octstr")};Xt.prototype._encodeNull=function(){return this._createEncoderBuffer("")};Xt.prototype._encodeInt=function(e,r){if(typeof e=="string"){if(!r)return this.reporter.error("String int or enum given, but no values map");if(!r.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=r[e]}if(typeof e!="number"&&!yr.isBuffer(e)){const i=e.toArray();!e.sign&&i[0]&128&&i.unshift(0),e=yr.from(i)}if(yr.isBuffer(e)){let i=e.length;e.length===0&&i++;const a=yr.alloc(i);return e.copy(a),e.length===0&&(a[0]=0),this._createEncoderBuffer(a)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let i=e;i>=256;i>>=8)n++;const s=new Array(n);for(let i=s.length-1;i>=0;i--)s[i]=e&255,e>>=8;return s[0]&128&&s.unshift(0),this._createEncoderBuffer(yr.from(s))};Xt.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};Xt.prototype._use=function(e,r){return typeof e=="function"&&(e=e(r)),e._getEncoder("der").tree};Xt.prototype._skipDefault=function(e,r,n){const s=this._baseState;let i;if(s.default===null)return!1;const a=e.join();if(s.defaultBuffer===void 0&&(s.defaultBuffer=this._encodeValue(s.default,r,n).join()),a.length!==s.defaultBuffer.length)return!1;for(i=0;i<a.length;i++)if(a[i]!==s.defaultBuffer[i])return!1;return!0};function fv(t,e,r,n){let s;if(t==="seqof"?t="seq":t==="setof"&&(t="set"),Bo.tagByName.hasOwnProperty(t))s=Bo.tagByName[t];else if(typeof t=="number"&&(t|0)===t)s=t;else return n.error("Unknown tag: "+t);return s>=31?n.error("Multi-octet tag encoding unsupported"):(e||(s|=32),s|=Bo.tagClassByName[r||"universal"]<<6,s)}const pv=en,Qc=Bf;function eu(t){Qc.call(this,t),this.enc="pem"}pv(eu,Qc);var yv=eu;eu.prototype.encode=function(e,r){const s=Qc.prototype.encode.call(this,e).toString("base64"),i=["-----BEGIN "+r.label+"-----"];for(let a=0;a<s.length;a+=64)i.push(s.slice(a,a+64));return i.push("-----END "+r.label+"-----"),i.join(`
`)};(function(t){const e=t;e.der=Bf,e.pem=yv})(Af);var Pf={},tu={exports:{}};tu.exports;(function(t){(function(e,r){function n(_,c){if(!_)throw new Error(c||"Assertion failed")}function s(_,c){_.super_=c;var h=function(){};h.prototype=c.prototype,_.prototype=new h,_.prototype.constructor=_}function i(_,c,h){if(i.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((c==="le"||c==="be")&&(h=c,c=10),this._init(_||0,c||10,h||"be"))}typeof e=="object"?e.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=ug.Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,h){return c.cmp(h)>0?c:h},i.min=function(c,h){return c.cmp(h)<0?c:h},i.prototype._init=function(c,h,y){if(typeof c=="number")return this._initNumber(c,h,y);if(typeof c=="object")return this._initArray(c,h,y);h==="hex"&&(h=16),n(h===(h|0)&&h>=2&&h<=36),c=c.toString().replace(/\s+/g,"");var g=0;c[0]==="-"&&(g++,this.negative=1),g<c.length&&(h===16?this._parseHex(c,g,y):(this._parseBase(c,h,g),y==="le"&&this._initArray(this.toArray(),h,y)))},i.prototype._initNumber=function(c,h,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),h,y)},i.prototype._initArray=function(c,h,y){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var b,x,R=0;if(y==="be")for(g=c.length-1,b=0;g>=0;g-=3)x=c[g]|c[g-1]<<8|c[g-2]<<16,this.words[b]|=x<<R&67108863,this.words[b+1]=x>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);else if(y==="le")for(g=0,b=0;g<c.length;g+=3)x=c[g]|c[g+1]<<8|c[g+2]<<16,this.words[b]|=x<<R&67108863,this.words[b+1]=x>>>26-R&67108863,R+=24,R>=26&&(R-=26,b++);return this.strip()};function o(_,c){var h=_.charCodeAt(c);return h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:h-48&15}function u(_,c,h){var y=o(_,h);return h-1>=c&&(y|=o(_,h-1)<<4),y}i.prototype._parseHex=function(c,h,y){this.length=Math.ceil((c.length-h)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var b=0,x=0,R;if(y==="be")for(g=c.length-1;g>=h;g-=2)R=u(c,h,g)<<b,this.words[x]|=R&67108863,b>=18?(b-=18,x+=1,this.words[x]|=R>>>26):b+=8;else{var w=c.length-h;for(g=w%2===0?h+1:h;g<c.length;g+=2)R=u(c,h,g)<<b,this.words[x]|=R&67108863,b>=18?(b-=18,x+=1,this.words[x]|=R>>>26):b+=8}this.strip()};function f(_,c,h,y){for(var g=0,b=Math.min(_.length,h),x=c;x<b;x++){var R=_.charCodeAt(x)-48;g*=y,R>=49?g+=R-49+10:R>=17?g+=R-17+10:g+=R}return g}i.prototype._parseBase=function(c,h,y){this.words=[0],this.length=1;for(var g=0,b=1;b<=67108863;b*=h)g++;g--,b=b/h|0;for(var x=c.length-y,R=x%g,w=Math.min(x,x-R)+y,l=0,v=y;v<w;v+=g)l=f(c,v,v+g,h),this.imuln(b),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(R!==0){var q=1;for(l=f(c,v,c.length,h),v=0;v<R;v++)q*=h;this.imuln(q),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var h=0;h<this.length;h++)c.words[h]=this.words[h];c.length=this.length,c.negative=this.negative,c.red=this.red},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,h){c=c||10,h=h|0||1;var y;if(c===16||c==="hex"){y="";for(var g=0,b=0,x=0;x<this.length;x++){var R=this.words[x],w=((R<<g|b)&16777215).toString(16);b=R>>>24-g&16777215,b!==0||x!==this.length-1?y=p[6-w.length]+w+y:y=w+y,g+=2,g>=26&&(g-=26,x--)}for(b!==0&&(y=b.toString(16)+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var l=d[c],v=A[c];y="";var q=this.clone();for(q.negative=0;!q.isZero();){var H=q.modn(v).toString(c);q=q.idivn(v),q.isZero()?y=H+y:y=p[l-H.length]+H+y}for(this.isZero()&&(y="0"+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(c,h){return n(typeof a<"u"),this.toArrayLike(a,c,h)},i.prototype.toArray=function(c,h){return this.toArrayLike(Array,c,h)},i.prototype.toArrayLike=function(c,h,y){var g=this.byteLength(),b=y||Math.max(1,g);n(g<=b,"byte array longer than desired length"),n(b>0,"Requested array length <= 0"),this.strip();var x=h==="le",R=new c(b),w,l,v=this.clone();if(x){for(l=0;!v.isZero();l++)w=v.andln(255),v.iushrn(8),R[l]=w;for(;l<b;l++)R[l]=0}else{for(l=0;l<b-g;l++)R[l]=0;for(l=0;!v.isZero();l++)w=v.andln(255),v.iushrn(8),R[b-l-1]=w}return R},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var h=c,y=0;return h>=4096&&(y+=13,h>>>=13),h>=64&&(y+=7,h>>>=7),h>=8&&(y+=4,h>>>=4),h>=2&&(y+=2,h>>>=2),y+h},i.prototype._zeroBits=function(c){if(c===0)return 26;var h=c,y=0;return h&8191||(y+=13,h>>>=13),h&127||(y+=7,h>>>=7),h&15||(y+=4,h>>>=4),h&3||(y+=2,h>>>=2),h&1||y++,y},i.prototype.bitLength=function(){var c=this.words[this.length-1],h=this._countBits(c);return(this.length-1)*26+h};function T(_){for(var c=new Array(_.bitLength()),h=0;h<c.length;h++){var y=h/26|0,g=h%26;c[h]=(_.words[y]&1<<g)>>>g}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,h=0;h<this.length;h++){var y=this._zeroBits(this.words[h]);if(c+=y,y!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]|c.words[h];return this.strip()},i.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var h;this.length>c.length?h=c:h=this;for(var y=0;y<h.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=h.length,this.strip()},i.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var h,y;this.length>c.length?(h=this,y=c):(h=c,y=this);for(var g=0;g<y.length;g++)this.words[g]=h.words[g]^y.words[g];if(this!==h)for(;g<h.length;g++)this.words[g]=h.words[g];return this.length=h.length,this.strip()},i.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var h=Math.ceil(c/26)|0,y=c%26;this._expand(h),y>0&&h--;for(var g=0;g<h;g++)this.words[g]=~this.words[g]&67108863;return y>0&&(this.words[g]=~this.words[g]&67108863>>26-y),this.strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,h){n(typeof c=="number"&&c>=0);var y=c/26|0,g=c%26;return this._expand(y+1),h?this.words[y]=this.words[y]|1<<g:this.words[y]=this.words[y]&~(1<<g),this.strip()},i.prototype.iadd=function(c){var h;if(this.negative!==0&&c.negative===0)return this.negative=0,h=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,h=this.isub(c),c.negative=1,h._normSign();var y,g;this.length>c.length?(y=this,g=c):(y=c,g=this);for(var b=0,x=0;x<g.length;x++)h=(y.words[x]|0)+(g.words[x]|0)+b,this.words[x]=h&67108863,b=h>>>26;for(;b!==0&&x<y.length;x++)h=(y.words[x]|0)+b,this.words[x]=h&67108863,b=h>>>26;if(this.length=y.length,b!==0)this.words[this.length]=b,this.length++;else if(y!==this)for(;x<y.length;x++)this.words[x]=y.words[x];return this},i.prototype.add=function(c){var h;return c.negative!==0&&this.negative===0?(c.negative=0,h=this.sub(c),c.negative^=1,h):c.negative===0&&this.negative!==0?(this.negative=0,h=c.sub(this),this.negative=1,h):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var h=this.iadd(c);return c.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,b;y>0?(g=this,b=c):(g=c,b=this);for(var x=0,R=0;R<b.length;R++)h=(g.words[R]|0)-(b.words[R]|0)+x,x=h>>26,this.words[R]=h&67108863;for(;x!==0&&R<g.length;R++)h=(g.words[R]|0)+x,x=h>>26,this.words[R]=h&67108863;if(x===0&&R<g.length&&g!==this)for(;R<g.length;R++)this.words[R]=g.words[R];return this.length=Math.max(this.length,R),g!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function m(_,c,h){h.negative=c.negative^_.negative;var y=_.length+c.length|0;h.length=y,y=y-1|0;var g=_.words[0]|0,b=c.words[0]|0,x=g*b,R=x&67108863,w=x/67108864|0;h.words[0]=R;for(var l=1;l<y;l++){for(var v=w>>>26,q=w&67108863,H=Math.min(l,c.length-1),F=Math.max(0,l-_.length+1);F<=H;F++){var G=l-F|0;g=_.words[G]|0,b=c.words[F]|0,x=g*b+q,v+=x/67108864|0,q=x&67108863}h.words[l]=q|0,w=v|0}return w!==0?h.words[l]=w|0:h.length--,h.strip()}var E=function(c,h,y){var g=c.words,b=h.words,x=y.words,R=0,w,l,v,q=g[0]|0,H=q&8191,F=q>>>13,G=g[1]|0,ie=G&8191,ue=G>>>13,wr=g[2]|0,le=wr&8191,pe=wr>>>13,Ku=g[3]|0,be=Ku&8191,ve=Ku>>>13,ju=g[4]|0,_e=ju&8191,Ee=ju>>>13,Wu=g[5]|0,Se=Wu&8191,Ae=Wu>>>13,Vu=g[6]|0,Te=Vu&8191,xe=Vu>>>13,Gu=g[7]|0,Re=Gu&8191,ke=Gu>>>13,Ju=g[8]|0,Be=Ju&8191,Pe=Ju>>>13,Xu=g[9]|0,Ue=Xu&8191,$e=Xu>>>13,Zu=b[0]|0,Me=Zu&8191,Oe=Zu>>>13,Yu=b[1]|0,Ce=Yu&8191,Ie=Yu>>>13,Qu=b[2]|0,De=Qu&8191,Ne=Qu>>>13,el=b[3]|0,Le=el&8191,qe=el>>>13,tl=b[4]|0,He=tl&8191,Fe=tl>>>13,rl=b[5]|0,ze=rl&8191,Ke=rl>>>13,nl=b[6]|0,je=nl&8191,We=nl>>>13,sl=b[7]|0,Ve=sl&8191,Ge=sl>>>13,il=b[8]|0,Je=il&8191,Xe=il>>>13,al=b[9]|0,Ze=al&8191,Ye=al>>>13;y.negative=c.negative^h.negative,y.length=19,w=Math.imul(H,Me),l=Math.imul(H,Oe),l=l+Math.imul(F,Me)|0,v=Math.imul(F,Oe);var Za=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(Za>>>26)|0,Za&=67108863,w=Math.imul(ie,Me),l=Math.imul(ie,Oe),l=l+Math.imul(ue,Me)|0,v=Math.imul(ue,Oe),w=w+Math.imul(H,Ce)|0,l=l+Math.imul(H,Ie)|0,l=l+Math.imul(F,Ce)|0,v=v+Math.imul(F,Ie)|0;var Ya=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(Ya>>>26)|0,Ya&=67108863,w=Math.imul(le,Me),l=Math.imul(le,Oe),l=l+Math.imul(pe,Me)|0,v=Math.imul(pe,Oe),w=w+Math.imul(ie,Ce)|0,l=l+Math.imul(ie,Ie)|0,l=l+Math.imul(ue,Ce)|0,v=v+Math.imul(ue,Ie)|0,w=w+Math.imul(H,De)|0,l=l+Math.imul(H,Ne)|0,l=l+Math.imul(F,De)|0,v=v+Math.imul(F,Ne)|0;var Qa=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(Qa>>>26)|0,Qa&=67108863,w=Math.imul(be,Me),l=Math.imul(be,Oe),l=l+Math.imul(ve,Me)|0,v=Math.imul(ve,Oe),w=w+Math.imul(le,Ce)|0,l=l+Math.imul(le,Ie)|0,l=l+Math.imul(pe,Ce)|0,v=v+Math.imul(pe,Ie)|0,w=w+Math.imul(ie,De)|0,l=l+Math.imul(ie,Ne)|0,l=l+Math.imul(ue,De)|0,v=v+Math.imul(ue,Ne)|0,w=w+Math.imul(H,Le)|0,l=l+Math.imul(H,qe)|0,l=l+Math.imul(F,Le)|0,v=v+Math.imul(F,qe)|0;var eo=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(eo>>>26)|0,eo&=67108863,w=Math.imul(_e,Me),l=Math.imul(_e,Oe),l=l+Math.imul(Ee,Me)|0,v=Math.imul(Ee,Oe),w=w+Math.imul(be,Ce)|0,l=l+Math.imul(be,Ie)|0,l=l+Math.imul(ve,Ce)|0,v=v+Math.imul(ve,Ie)|0,w=w+Math.imul(le,De)|0,l=l+Math.imul(le,Ne)|0,l=l+Math.imul(pe,De)|0,v=v+Math.imul(pe,Ne)|0,w=w+Math.imul(ie,Le)|0,l=l+Math.imul(ie,qe)|0,l=l+Math.imul(ue,Le)|0,v=v+Math.imul(ue,qe)|0,w=w+Math.imul(H,He)|0,l=l+Math.imul(H,Fe)|0,l=l+Math.imul(F,He)|0,v=v+Math.imul(F,Fe)|0;var to=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(to>>>26)|0,to&=67108863,w=Math.imul(Se,Me),l=Math.imul(Se,Oe),l=l+Math.imul(Ae,Me)|0,v=Math.imul(Ae,Oe),w=w+Math.imul(_e,Ce)|0,l=l+Math.imul(_e,Ie)|0,l=l+Math.imul(Ee,Ce)|0,v=v+Math.imul(Ee,Ie)|0,w=w+Math.imul(be,De)|0,l=l+Math.imul(be,Ne)|0,l=l+Math.imul(ve,De)|0,v=v+Math.imul(ve,Ne)|0,w=w+Math.imul(le,Le)|0,l=l+Math.imul(le,qe)|0,l=l+Math.imul(pe,Le)|0,v=v+Math.imul(pe,qe)|0,w=w+Math.imul(ie,He)|0,l=l+Math.imul(ie,Fe)|0,l=l+Math.imul(ue,He)|0,v=v+Math.imul(ue,Fe)|0,w=w+Math.imul(H,ze)|0,l=l+Math.imul(H,Ke)|0,l=l+Math.imul(F,ze)|0,v=v+Math.imul(F,Ke)|0;var ro=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(ro>>>26)|0,ro&=67108863,w=Math.imul(Te,Me),l=Math.imul(Te,Oe),l=l+Math.imul(xe,Me)|0,v=Math.imul(xe,Oe),w=w+Math.imul(Se,Ce)|0,l=l+Math.imul(Se,Ie)|0,l=l+Math.imul(Ae,Ce)|0,v=v+Math.imul(Ae,Ie)|0,w=w+Math.imul(_e,De)|0,l=l+Math.imul(_e,Ne)|0,l=l+Math.imul(Ee,De)|0,v=v+Math.imul(Ee,Ne)|0,w=w+Math.imul(be,Le)|0,l=l+Math.imul(be,qe)|0,l=l+Math.imul(ve,Le)|0,v=v+Math.imul(ve,qe)|0,w=w+Math.imul(le,He)|0,l=l+Math.imul(le,Fe)|0,l=l+Math.imul(pe,He)|0,v=v+Math.imul(pe,Fe)|0,w=w+Math.imul(ie,ze)|0,l=l+Math.imul(ie,Ke)|0,l=l+Math.imul(ue,ze)|0,v=v+Math.imul(ue,Ke)|0,w=w+Math.imul(H,je)|0,l=l+Math.imul(H,We)|0,l=l+Math.imul(F,je)|0,v=v+Math.imul(F,We)|0;var no=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(no>>>26)|0,no&=67108863,w=Math.imul(Re,Me),l=Math.imul(Re,Oe),l=l+Math.imul(ke,Me)|0,v=Math.imul(ke,Oe),w=w+Math.imul(Te,Ce)|0,l=l+Math.imul(Te,Ie)|0,l=l+Math.imul(xe,Ce)|0,v=v+Math.imul(xe,Ie)|0,w=w+Math.imul(Se,De)|0,l=l+Math.imul(Se,Ne)|0,l=l+Math.imul(Ae,De)|0,v=v+Math.imul(Ae,Ne)|0,w=w+Math.imul(_e,Le)|0,l=l+Math.imul(_e,qe)|0,l=l+Math.imul(Ee,Le)|0,v=v+Math.imul(Ee,qe)|0,w=w+Math.imul(be,He)|0,l=l+Math.imul(be,Fe)|0,l=l+Math.imul(ve,He)|0,v=v+Math.imul(ve,Fe)|0,w=w+Math.imul(le,ze)|0,l=l+Math.imul(le,Ke)|0,l=l+Math.imul(pe,ze)|0,v=v+Math.imul(pe,Ke)|0,w=w+Math.imul(ie,je)|0,l=l+Math.imul(ie,We)|0,l=l+Math.imul(ue,je)|0,v=v+Math.imul(ue,We)|0,w=w+Math.imul(H,Ve)|0,l=l+Math.imul(H,Ge)|0,l=l+Math.imul(F,Ve)|0,v=v+Math.imul(F,Ge)|0;var so=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(so>>>26)|0,so&=67108863,w=Math.imul(Be,Me),l=Math.imul(Be,Oe),l=l+Math.imul(Pe,Me)|0,v=Math.imul(Pe,Oe),w=w+Math.imul(Re,Ce)|0,l=l+Math.imul(Re,Ie)|0,l=l+Math.imul(ke,Ce)|0,v=v+Math.imul(ke,Ie)|0,w=w+Math.imul(Te,De)|0,l=l+Math.imul(Te,Ne)|0,l=l+Math.imul(xe,De)|0,v=v+Math.imul(xe,Ne)|0,w=w+Math.imul(Se,Le)|0,l=l+Math.imul(Se,qe)|0,l=l+Math.imul(Ae,Le)|0,v=v+Math.imul(Ae,qe)|0,w=w+Math.imul(_e,He)|0,l=l+Math.imul(_e,Fe)|0,l=l+Math.imul(Ee,He)|0,v=v+Math.imul(Ee,Fe)|0,w=w+Math.imul(be,ze)|0,l=l+Math.imul(be,Ke)|0,l=l+Math.imul(ve,ze)|0,v=v+Math.imul(ve,Ke)|0,w=w+Math.imul(le,je)|0,l=l+Math.imul(le,We)|0,l=l+Math.imul(pe,je)|0,v=v+Math.imul(pe,We)|0,w=w+Math.imul(ie,Ve)|0,l=l+Math.imul(ie,Ge)|0,l=l+Math.imul(ue,Ve)|0,v=v+Math.imul(ue,Ge)|0,w=w+Math.imul(H,Je)|0,l=l+Math.imul(H,Xe)|0,l=l+Math.imul(F,Je)|0,v=v+Math.imul(F,Xe)|0;var io=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(io>>>26)|0,io&=67108863,w=Math.imul(Ue,Me),l=Math.imul(Ue,Oe),l=l+Math.imul($e,Me)|0,v=Math.imul($e,Oe),w=w+Math.imul(Be,Ce)|0,l=l+Math.imul(Be,Ie)|0,l=l+Math.imul(Pe,Ce)|0,v=v+Math.imul(Pe,Ie)|0,w=w+Math.imul(Re,De)|0,l=l+Math.imul(Re,Ne)|0,l=l+Math.imul(ke,De)|0,v=v+Math.imul(ke,Ne)|0,w=w+Math.imul(Te,Le)|0,l=l+Math.imul(Te,qe)|0,l=l+Math.imul(xe,Le)|0,v=v+Math.imul(xe,qe)|0,w=w+Math.imul(Se,He)|0,l=l+Math.imul(Se,Fe)|0,l=l+Math.imul(Ae,He)|0,v=v+Math.imul(Ae,Fe)|0,w=w+Math.imul(_e,ze)|0,l=l+Math.imul(_e,Ke)|0,l=l+Math.imul(Ee,ze)|0,v=v+Math.imul(Ee,Ke)|0,w=w+Math.imul(be,je)|0,l=l+Math.imul(be,We)|0,l=l+Math.imul(ve,je)|0,v=v+Math.imul(ve,We)|0,w=w+Math.imul(le,Ve)|0,l=l+Math.imul(le,Ge)|0,l=l+Math.imul(pe,Ve)|0,v=v+Math.imul(pe,Ge)|0,w=w+Math.imul(ie,Je)|0,l=l+Math.imul(ie,Xe)|0,l=l+Math.imul(ue,Je)|0,v=v+Math.imul(ue,Xe)|0,w=w+Math.imul(H,Ze)|0,l=l+Math.imul(H,Ye)|0,l=l+Math.imul(F,Ze)|0,v=v+Math.imul(F,Ye)|0;var ao=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(ao>>>26)|0,ao&=67108863,w=Math.imul(Ue,Ce),l=Math.imul(Ue,Ie),l=l+Math.imul($e,Ce)|0,v=Math.imul($e,Ie),w=w+Math.imul(Be,De)|0,l=l+Math.imul(Be,Ne)|0,l=l+Math.imul(Pe,De)|0,v=v+Math.imul(Pe,Ne)|0,w=w+Math.imul(Re,Le)|0,l=l+Math.imul(Re,qe)|0,l=l+Math.imul(ke,Le)|0,v=v+Math.imul(ke,qe)|0,w=w+Math.imul(Te,He)|0,l=l+Math.imul(Te,Fe)|0,l=l+Math.imul(xe,He)|0,v=v+Math.imul(xe,Fe)|0,w=w+Math.imul(Se,ze)|0,l=l+Math.imul(Se,Ke)|0,l=l+Math.imul(Ae,ze)|0,v=v+Math.imul(Ae,Ke)|0,w=w+Math.imul(_e,je)|0,l=l+Math.imul(_e,We)|0,l=l+Math.imul(Ee,je)|0,v=v+Math.imul(Ee,We)|0,w=w+Math.imul(be,Ve)|0,l=l+Math.imul(be,Ge)|0,l=l+Math.imul(ve,Ve)|0,v=v+Math.imul(ve,Ge)|0,w=w+Math.imul(le,Je)|0,l=l+Math.imul(le,Xe)|0,l=l+Math.imul(pe,Je)|0,v=v+Math.imul(pe,Xe)|0,w=w+Math.imul(ie,Ze)|0,l=l+Math.imul(ie,Ye)|0,l=l+Math.imul(ue,Ze)|0,v=v+Math.imul(ue,Ye)|0;var oo=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(oo>>>26)|0,oo&=67108863,w=Math.imul(Ue,De),l=Math.imul(Ue,Ne),l=l+Math.imul($e,De)|0,v=Math.imul($e,Ne),w=w+Math.imul(Be,Le)|0,l=l+Math.imul(Be,qe)|0,l=l+Math.imul(Pe,Le)|0,v=v+Math.imul(Pe,qe)|0,w=w+Math.imul(Re,He)|0,l=l+Math.imul(Re,Fe)|0,l=l+Math.imul(ke,He)|0,v=v+Math.imul(ke,Fe)|0,w=w+Math.imul(Te,ze)|0,l=l+Math.imul(Te,Ke)|0,l=l+Math.imul(xe,ze)|0,v=v+Math.imul(xe,Ke)|0,w=w+Math.imul(Se,je)|0,l=l+Math.imul(Se,We)|0,l=l+Math.imul(Ae,je)|0,v=v+Math.imul(Ae,We)|0,w=w+Math.imul(_e,Ve)|0,l=l+Math.imul(_e,Ge)|0,l=l+Math.imul(Ee,Ve)|0,v=v+Math.imul(Ee,Ge)|0,w=w+Math.imul(be,Je)|0,l=l+Math.imul(be,Xe)|0,l=l+Math.imul(ve,Je)|0,v=v+Math.imul(ve,Xe)|0,w=w+Math.imul(le,Ze)|0,l=l+Math.imul(le,Ye)|0,l=l+Math.imul(pe,Ze)|0,v=v+Math.imul(pe,Ye)|0;var co=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(co>>>26)|0,co&=67108863,w=Math.imul(Ue,Le),l=Math.imul(Ue,qe),l=l+Math.imul($e,Le)|0,v=Math.imul($e,qe),w=w+Math.imul(Be,He)|0,l=l+Math.imul(Be,Fe)|0,l=l+Math.imul(Pe,He)|0,v=v+Math.imul(Pe,Fe)|0,w=w+Math.imul(Re,ze)|0,l=l+Math.imul(Re,Ke)|0,l=l+Math.imul(ke,ze)|0,v=v+Math.imul(ke,Ke)|0,w=w+Math.imul(Te,je)|0,l=l+Math.imul(Te,We)|0,l=l+Math.imul(xe,je)|0,v=v+Math.imul(xe,We)|0,w=w+Math.imul(Se,Ve)|0,l=l+Math.imul(Se,Ge)|0,l=l+Math.imul(Ae,Ve)|0,v=v+Math.imul(Ae,Ge)|0,w=w+Math.imul(_e,Je)|0,l=l+Math.imul(_e,Xe)|0,l=l+Math.imul(Ee,Je)|0,v=v+Math.imul(Ee,Xe)|0,w=w+Math.imul(be,Ze)|0,l=l+Math.imul(be,Ye)|0,l=l+Math.imul(ve,Ze)|0,v=v+Math.imul(ve,Ye)|0;var uo=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(uo>>>26)|0,uo&=67108863,w=Math.imul(Ue,He),l=Math.imul(Ue,Fe),l=l+Math.imul($e,He)|0,v=Math.imul($e,Fe),w=w+Math.imul(Be,ze)|0,l=l+Math.imul(Be,Ke)|0,l=l+Math.imul(Pe,ze)|0,v=v+Math.imul(Pe,Ke)|0,w=w+Math.imul(Re,je)|0,l=l+Math.imul(Re,We)|0,l=l+Math.imul(ke,je)|0,v=v+Math.imul(ke,We)|0,w=w+Math.imul(Te,Ve)|0,l=l+Math.imul(Te,Ge)|0,l=l+Math.imul(xe,Ve)|0,v=v+Math.imul(xe,Ge)|0,w=w+Math.imul(Se,Je)|0,l=l+Math.imul(Se,Xe)|0,l=l+Math.imul(Ae,Je)|0,v=v+Math.imul(Ae,Xe)|0,w=w+Math.imul(_e,Ze)|0,l=l+Math.imul(_e,Ye)|0,l=l+Math.imul(Ee,Ze)|0,v=v+Math.imul(Ee,Ye)|0;var lo=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(lo>>>26)|0,lo&=67108863,w=Math.imul(Ue,ze),l=Math.imul(Ue,Ke),l=l+Math.imul($e,ze)|0,v=Math.imul($e,Ke),w=w+Math.imul(Be,je)|0,l=l+Math.imul(Be,We)|0,l=l+Math.imul(Pe,je)|0,v=v+Math.imul(Pe,We)|0,w=w+Math.imul(Re,Ve)|0,l=l+Math.imul(Re,Ge)|0,l=l+Math.imul(ke,Ve)|0,v=v+Math.imul(ke,Ge)|0,w=w+Math.imul(Te,Je)|0,l=l+Math.imul(Te,Xe)|0,l=l+Math.imul(xe,Je)|0,v=v+Math.imul(xe,Xe)|0,w=w+Math.imul(Se,Ze)|0,l=l+Math.imul(Se,Ye)|0,l=l+Math.imul(Ae,Ze)|0,v=v+Math.imul(Ae,Ye)|0;var ho=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(ho>>>26)|0,ho&=67108863,w=Math.imul(Ue,je),l=Math.imul(Ue,We),l=l+Math.imul($e,je)|0,v=Math.imul($e,We),w=w+Math.imul(Be,Ve)|0,l=l+Math.imul(Be,Ge)|0,l=l+Math.imul(Pe,Ve)|0,v=v+Math.imul(Pe,Ge)|0,w=w+Math.imul(Re,Je)|0,l=l+Math.imul(Re,Xe)|0,l=l+Math.imul(ke,Je)|0,v=v+Math.imul(ke,Xe)|0,w=w+Math.imul(Te,Ze)|0,l=l+Math.imul(Te,Ye)|0,l=l+Math.imul(xe,Ze)|0,v=v+Math.imul(xe,Ye)|0;var fo=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(fo>>>26)|0,fo&=67108863,w=Math.imul(Ue,Ve),l=Math.imul(Ue,Ge),l=l+Math.imul($e,Ve)|0,v=Math.imul($e,Ge),w=w+Math.imul(Be,Je)|0,l=l+Math.imul(Be,Xe)|0,l=l+Math.imul(Pe,Je)|0,v=v+Math.imul(Pe,Xe)|0,w=w+Math.imul(Re,Ze)|0,l=l+Math.imul(Re,Ye)|0,l=l+Math.imul(ke,Ze)|0,v=v+Math.imul(ke,Ye)|0;var po=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(po>>>26)|0,po&=67108863,w=Math.imul(Ue,Je),l=Math.imul(Ue,Xe),l=l+Math.imul($e,Je)|0,v=Math.imul($e,Xe),w=w+Math.imul(Be,Ze)|0,l=l+Math.imul(Be,Ye)|0,l=l+Math.imul(Pe,Ze)|0,v=v+Math.imul(Pe,Ye)|0;var yo=(R+w|0)+((l&8191)<<13)|0;R=(v+(l>>>13)|0)+(yo>>>26)|0,yo&=67108863,w=Math.imul(Ue,Ze),l=Math.imul(Ue,Ye),l=l+Math.imul($e,Ze)|0,v=Math.imul($e,Ye);var go=(R+w|0)+((l&8191)<<13)|0;return R=(v+(l>>>13)|0)+(go>>>26)|0,go&=67108863,x[0]=Za,x[1]=Ya,x[2]=Qa,x[3]=eo,x[4]=to,x[5]=ro,x[6]=no,x[7]=so,x[8]=io,x[9]=ao,x[10]=oo,x[11]=co,x[12]=uo,x[13]=lo,x[14]=ho,x[15]=fo,x[16]=po,x[17]=yo,x[18]=go,R!==0&&(x[19]=R,y.length++),y};Math.imul||(E=m);function k(_,c,h){h.negative=c.negative^_.negative,h.length=_.length+c.length;for(var y=0,g=0,b=0;b<h.length-1;b++){var x=g;g=0;for(var R=y&67108863,w=Math.min(b,c.length-1),l=Math.max(0,b-_.length+1);l<=w;l++){var v=b-l,q=_.words[v]|0,H=c.words[l]|0,F=q*H,G=F&67108863;x=x+(F/67108864|0)|0,G=G+R|0,R=G&67108863,x=x+(G>>>26)|0,g+=x>>>26,x&=67108863}h.words[b]=R,y=x,x=g}return y!==0?h.words[b]=y:h.length--,h.strip()}function $(_,c,h){var y=new I;return y.mulp(_,c,h)}i.prototype.mulTo=function(c,h){var y,g=this.length+c.length;return this.length===10&&c.length===10?y=E(this,c,h):g<63?y=m(this,c,h):g<1024?y=k(this,c,h):y=$(this,c,h),y};function I(_,c){this.x=_,this.y=c}I.prototype.makeRBT=function(c){for(var h=new Array(c),y=i.prototype._countBits(c)-1,g=0;g<c;g++)h[g]=this.revBin(g,y,c);return h},I.prototype.revBin=function(c,h,y){if(c===0||c===y-1)return c;for(var g=0,b=0;b<h;b++)g|=(c&1)<<h-b-1,c>>=1;return g},I.prototype.permute=function(c,h,y,g,b,x){for(var R=0;R<x;R++)g[R]=h[c[R]],b[R]=y[c[R]]},I.prototype.transform=function(c,h,y,g,b,x){this.permute(x,c,h,y,g,b);for(var R=1;R<b;R<<=1)for(var w=R<<1,l=Math.cos(2*Math.PI/w),v=Math.sin(2*Math.PI/w),q=0;q<b;q+=w)for(var H=l,F=v,G=0;G<R;G++){var ie=y[q+G],ue=g[q+G],wr=y[q+G+R],le=g[q+G+R],pe=H*wr-F*le;le=H*le+F*wr,wr=pe,y[q+G]=ie+wr,g[q+G]=ue+le,y[q+G+R]=ie-wr,g[q+G+R]=ue-le,G!==w&&(pe=l*H-v*F,F=l*F+v*H,H=pe)}},I.prototype.guessLen13b=function(c,h){var y=Math.max(h,c)|1,g=y&1,b=0;for(y=y/2|0;y;y=y>>>1)b++;return 1<<b+1+g},I.prototype.conjugate=function(c,h,y){if(!(y<=1))for(var g=0;g<y/2;g++){var b=c[g];c[g]=c[y-g-1],c[y-g-1]=b,b=h[g],h[g]=-h[y-g-1],h[y-g-1]=-b}},I.prototype.normalize13b=function(c,h){for(var y=0,g=0;g<h/2;g++){var b=Math.round(c[2*g+1]/h)*8192+Math.round(c[2*g]/h)+y;c[g]=b&67108863,b<67108864?y=0:y=b/67108864|0}return c},I.prototype.convert13b=function(c,h,y,g){for(var b=0,x=0;x<h;x++)b=b+(c[x]|0),y[2*x]=b&8191,b=b>>>13,y[2*x+1]=b&8191,b=b>>>13;for(x=2*h;x<g;++x)y[x]=0;n(b===0),n((b&-8192)===0)},I.prototype.stub=function(c){for(var h=new Array(c),y=0;y<c;y++)h[y]=0;return h},I.prototype.mulp=function(c,h,y){var g=2*this.guessLen13b(c.length,h.length),b=this.makeRBT(g),x=this.stub(g),R=new Array(g),w=new Array(g),l=new Array(g),v=new Array(g),q=new Array(g),H=new Array(g),F=y.words;F.length=g,this.convert13b(c.words,c.length,R,g),this.convert13b(h.words,h.length,v,g),this.transform(R,x,w,l,g,b),this.transform(v,x,q,H,g,b);for(var G=0;G<g;G++){var ie=w[G]*q[G]-l[G]*H[G];l[G]=w[G]*H[G]+l[G]*q[G],w[G]=ie}return this.conjugate(w,l,g),this.transform(w,l,F,x,g,b),this.conjugate(F,x,g),this.normalize13b(F,g),y.negative=c.negative^h.negative,y.length=c.length+h.length,y.strip()},i.prototype.mul=function(c){var h=new i(null);return h.words=new Array(this.length+c.length),this.mulTo(c,h)},i.prototype.mulf=function(c){var h=new i(null);return h.words=new Array(this.length+c.length),$(this,c,h)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){n(typeof c=="number"),n(c<67108864);for(var h=0,y=0;y<this.length;y++){var g=(this.words[y]|0)*c,b=(g&67108863)+(h&67108863);h>>=26,h+=g/67108864|0,h+=b>>>26,this.words[y]=b&67108863}return h!==0&&(this.words[y]=h,this.length++),this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var h=T(c);if(h.length===0)return new i(1);for(var y=this,g=0;g<h.length&&h[g]===0;g++,y=y.sqr());if(++g<h.length)for(var b=y.sqr();g<h.length;g++,b=b.sqr())h[g]!==0&&(y=y.mul(b));return y},i.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var h=c%26,y=(c-h)/26,g=67108863>>>26-h<<26-h,b;if(h!==0){var x=0;for(b=0;b<this.length;b++){var R=this.words[b]&g,w=(this.words[b]|0)-R<<h;this.words[b]=w|x,x=R>>>26-h}x&&(this.words[b]=x,this.length++)}if(y!==0){for(b=this.length-1;b>=0;b--)this.words[b+y]=this.words[b];for(b=0;b<y;b++)this.words[b]=0;this.length+=y}return this.strip()},i.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,h,y){n(typeof c=="number"&&c>=0);var g;h?g=(h-h%26)/26:g=0;var b=c%26,x=Math.min((c-b)/26,this.length),R=67108863^67108863>>>b<<b,w=y;if(g-=x,g=Math.max(0,g),w){for(var l=0;l<x;l++)w.words[l]=this.words[l];w.length=x}if(x!==0)if(this.length>x)for(this.length-=x,l=0;l<this.length;l++)this.words[l]=this.words[l+x];else this.words[0]=0,this.length=1;var v=0;for(l=this.length-1;l>=0&&(v!==0||l>=g);l--){var q=this.words[l]|0;this.words[l]=v<<26-b|q>>>b,v=q&R}return w&&v!==0&&(w.words[w.length++]=v),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(c,h,y){return n(this.negative===0),this.iushrn(c,h,y)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var h=c%26,y=(c-h)/26,g=1<<h;if(this.length<=y)return!1;var b=this.words[y];return!!(b&g)},i.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var h=c%26,y=(c-h)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(h!==0&&y++,this.length=Math.min(y,this.length),h!==0){var g=67108863^67108863>>>h<<h;this.words[this.length-1]&=g}return this.strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this.strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,h,y){var g=c.length+y,b;this._expand(g);var x,R=0;for(b=0;b<c.length;b++){x=(this.words[b+y]|0)+R;var w=(c.words[b]|0)*h;x-=w&67108863,R=(x>>26)-(w/67108864|0),this.words[b+y]=x&67108863}for(;b<this.length-y;b++)x=(this.words[b+y]|0)+R,R=x>>26,this.words[b+y]=x&67108863;if(R===0)return this.strip();for(n(R===-1),R=0,b=0;b<this.length;b++)x=-(this.words[b]|0)+R,R=x>>26,this.words[b]=x&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(c,h){var y=this.length-c.length,g=this.clone(),b=c,x=b.words[b.length-1]|0,R=this._countBits(x);y=26-R,y!==0&&(b=b.ushln(y),g.iushln(y),x=b.words[b.length-1]|0);var w=g.length-b.length,l;if(h!=="mod"){l=new i(null),l.length=w+1,l.words=new Array(l.length);for(var v=0;v<l.length;v++)l.words[v]=0}var q=g.clone()._ishlnsubmul(b,1,w);q.negative===0&&(g=q,l&&(l.words[w]=1));for(var H=w-1;H>=0;H--){var F=(g.words[b.length+H]|0)*67108864+(g.words[b.length+H-1]|0);for(F=Math.min(F/x|0,67108863),g._ishlnsubmul(b,F,H);g.negative!==0;)F--,g.negative=0,g._ishlnsubmul(b,1,H),g.isZero()||(g.negative^=1);l&&(l.words[H]=F)}return l&&l.strip(),g.strip(),h!=="div"&&y!==0&&g.iushrn(y),{div:l||null,mod:g}},i.prototype.divmod=function(c,h,y){if(n(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var g,b,x;return this.negative!==0&&c.negative===0?(x=this.neg().divmod(c,h),h!=="mod"&&(g=x.div.neg()),h!=="div"&&(b=x.mod.neg(),y&&b.negative!==0&&b.iadd(c)),{div:g,mod:b}):this.negative===0&&c.negative!==0?(x=this.divmod(c.neg(),h),h!=="mod"&&(g=x.div.neg()),{div:g,mod:x.mod}):this.negative&c.negative?(x=this.neg().divmod(c.neg(),h),h!=="div"&&(b=x.mod.neg(),y&&b.negative!==0&&b.isub(c)),{div:x.div,mod:b}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?h==="div"?{div:this.divn(c.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modn(c.words[0]))}:this._wordDiv(c,h)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var h=this.divmod(c);if(h.mod.isZero())return h.div;var y=h.div.negative!==0?h.mod.isub(c):h.mod,g=c.ushrn(1),b=c.andln(1),x=y.cmp(g);return x<0||b===1&&x===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modn=function(c){n(c<=67108863);for(var h=(1<<26)%c,y=0,g=this.length-1;g>=0;g--)y=(h*y+(this.words[g]|0))%c;return y},i.prototype.idivn=function(c){n(c<=67108863);for(var h=0,y=this.length-1;y>=0;y--){var g=(this.words[y]|0)+h*67108864;this.words[y]=g/c|0,h=g%c}return this.strip()},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var h=this,y=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var g=new i(1),b=new i(0),x=new i(0),R=new i(1),w=0;h.isEven()&&y.isEven();)h.iushrn(1),y.iushrn(1),++w;for(var l=y.clone(),v=h.clone();!h.isZero();){for(var q=0,H=1;!(h.words[0]&H)&&q<26;++q,H<<=1);if(q>0)for(h.iushrn(q);q-- >0;)(g.isOdd()||b.isOdd())&&(g.iadd(l),b.isub(v)),g.iushrn(1),b.iushrn(1);for(var F=0,G=1;!(y.words[0]&G)&&F<26;++F,G<<=1);if(F>0)for(y.iushrn(F);F-- >0;)(x.isOdd()||R.isOdd())&&(x.iadd(l),R.isub(v)),x.iushrn(1),R.iushrn(1);h.cmp(y)>=0?(h.isub(y),g.isub(x),b.isub(R)):(y.isub(h),x.isub(g),R.isub(b))}return{a:x,b:R,gcd:y.iushln(w)}},i.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var h=this,y=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var g=new i(1),b=new i(0),x=y.clone();h.cmpn(1)>0&&y.cmpn(1)>0;){for(var R=0,w=1;!(h.words[0]&w)&&R<26;++R,w<<=1);if(R>0)for(h.iushrn(R);R-- >0;)g.isOdd()&&g.iadd(x),g.iushrn(1);for(var l=0,v=1;!(y.words[0]&v)&&l<26;++l,v<<=1);if(l>0)for(y.iushrn(l);l-- >0;)b.isOdd()&&b.iadd(x),b.iushrn(1);h.cmp(y)>=0?(h.isub(y),g.isub(b)):(y.isub(h),b.isub(g))}var q;return h.cmpn(1)===0?q=g:q=b,q.cmpn(0)<0&&q.iadd(c),q},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var h=this.clone(),y=c.clone();h.negative=0,y.negative=0;for(var g=0;h.isEven()&&y.isEven();g++)h.iushrn(1),y.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;y.isEven();)y.iushrn(1);var b=h.cmp(y);if(b<0){var x=h;h=y,y=x}else if(b===0||y.cmpn(1)===0)break;h.isub(y)}while(!0);return y.iushln(g)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){n(typeof c=="number");var h=c%26,y=(c-h)/26,g=1<<h;if(this.length<=y)return this._expand(y+1),this.words[y]|=g,this;for(var b=g,x=y;b!==0&&x<this.length;x++){var R=this.words[x]|0;R+=b,b=R>>>26,R&=67108863,this.words[x]=R}return b!==0&&(this.words[x]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var h=c<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this.strip();var y;if(this.length>1)y=1;else{h&&(c=-c),n(c<=67108863,"Number is too big");var g=this.words[0]|0;y=g===c?0:g<c?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var h=this.ucmp(c);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var h=0,y=this.length-1;y>=0;y--){var g=this.words[y]|0,b=c.words[y]|0;if(g!==b){g<b?h=-1:g>b&&(h=1);break}}return h},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new K(c)},i.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var U={k256:null,p224:null,p192:null,p25519:null};function B(_,c){this.name=_,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}B.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},B.prototype.ireduce=function(c){var h=c,y;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),y=h.bitLength();while(y>this.n);var g=y<this.n?-1:h.ucmp(this.p);return g===0?(h.words[0]=0,h.length=1):g>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},B.prototype.split=function(c,h){c.iushrn(this.n,0,h)},B.prototype.imulK=function(c){return c.imul(this.k)};function P(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(P,B),P.prototype.split=function(c,h){for(var y=4194303,g=Math.min(c.length,9),b=0;b<g;b++)h.words[b]=c.words[b];if(h.length=g,c.length<=9){c.words[0]=0,c.length=1;return}var x=c.words[9];for(h.words[h.length++]=x&y,b=10;b<c.length;b++){var R=c.words[b]|0;c.words[b-10]=(R&y)<<4|x>>>22,x=R}x>>>=22,c.words[b-10]=x,x===0&&c.length>10?c.length-=10:c.length-=9},P.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var h=0,y=0;y<c.length;y++){var g=c.words[y]|0;h+=g*977,c.words[y]=h&67108863,h=g*64+(h/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function D(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(D,B);function N(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(N,B);function L(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(L,B),L.prototype.imulK=function(c){for(var h=0,y=0;y<c.length;y++){var g=(c.words[y]|0)*19+h,b=g&67108863;g>>>=26,c.words[y]=b,h=g}return h!==0&&(c.words[c.length++]=h),c},i._prime=function(c){if(U[c])return U[c];var h;if(c==="k256")h=new P;else if(c==="p224")h=new D;else if(c==="p192")h=new N;else if(c==="p25519")h=new L;else throw new Error("Unknown prime "+c);return U[c]=h,h};function K(_){if(typeof _=="string"){var c=i._prime(_);this.m=c.p,this.prime=c}else n(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}K.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},K.prototype._verify2=function(c,h){n((c.negative|h.negative)===0,"red works only with positives"),n(c.red&&c.red===h.red,"red works only with red numbers")},K.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):c.umod(this.m)._forceRed(this)},K.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},K.prototype.add=function(c,h){this._verify2(c,h);var y=c.add(h);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},K.prototype.iadd=function(c,h){this._verify2(c,h);var y=c.iadd(h);return y.cmp(this.m)>=0&&y.isub(this.m),y},K.prototype.sub=function(c,h){this._verify2(c,h);var y=c.sub(h);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},K.prototype.isub=function(c,h){this._verify2(c,h);var y=c.isub(h);return y.cmpn(0)<0&&y.iadd(this.m),y},K.prototype.shl=function(c,h){return this._verify1(c),this.imod(c.ushln(h))},K.prototype.imul=function(c,h){return this._verify2(c,h),this.imod(c.imul(h))},K.prototype.mul=function(c,h){return this._verify2(c,h),this.imod(c.mul(h))},K.prototype.isqr=function(c){return this.imul(c,c.clone())},K.prototype.sqr=function(c){return this.mul(c,c)},K.prototype.sqrt=function(c){if(c.isZero())return c.clone();var h=this.m.andln(3);if(n(h%2===1),h===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(c,y)}for(var g=this.m.subn(1),b=0;!g.isZero()&&g.andln(1)===0;)b++,g.iushrn(1);n(!g.isZero());var x=new i(1).toRed(this),R=x.redNeg(),w=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);this.pow(l,w).cmp(R)!==0;)l.redIAdd(R);for(var v=this.pow(l,g),q=this.pow(c,g.addn(1).iushrn(1)),H=this.pow(c,g),F=b;H.cmp(x)!==0;){for(var G=H,ie=0;G.cmp(x)!==0;ie++)G=G.redSqr();n(ie<F);var ue=this.pow(v,new i(1).iushln(F-ie-1));q=q.redMul(ue),v=ue.redSqr(),H=H.redMul(v),F=ie}return q},K.prototype.invm=function(c){var h=c._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},K.prototype.pow=function(c,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return c.clone();var y=4,g=new Array(1<<y);g[0]=new i(1).toRed(this),g[1]=c;for(var b=2;b<g.length;b++)g[b]=this.mul(g[b-1],c);var x=g[0],R=0,w=0,l=h.bitLength()%26;for(l===0&&(l=26),b=h.length-1;b>=0;b--){for(var v=h.words[b],q=l-1;q>=0;q--){var H=v>>q&1;if(x!==g[0]&&(x=this.sqr(x)),H===0&&R===0){w=0;continue}R<<=1,R|=H,w++,!(w!==y&&(b!==0||q!==0))&&(x=this.mul(x,g[R]),w=0,R=0)}l=26}return x},K.prototype.convertTo=function(c){var h=c.umod(this.m);return h===c?h.clone():h},K.prototype.convertFrom=function(c){var h=c.clone();return h.red=null,h},i.mont=function(c){return new fe(c)};function fe(_){K.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(fe,K),fe.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},fe.prototype.convertFrom=function(c){var h=this.imod(c.mul(this.rinv));return h.red=null,h},fe.prototype.imul=function(c,h){if(c.isZero()||h.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(h),g=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=y.isub(g).iushrn(this.shift),x=b;return b.cmp(this.m)>=0?x=b.isub(this.m):b.cmpn(0)<0&&(x=b.iadd(this.m)),x._forceRed(this)},fe.prototype.mul=function(c,h){if(c.isZero()||h.isZero())return new i(0)._forceRed(this);var y=c.mul(h),g=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=y.isub(g).iushrn(this.shift),x=b;return b.cmp(this.m)>=0?x=b.isub(this.m):b.cmpn(0)<0&&(x=b.iadd(this.m)),x._forceRed(this)},fe.prototype.invm=function(c){var h=this.imod(c._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(t,z)})(tu);var Uf=tu.exports;const $f=Cr(Uf),gv=en,mv=Uf,Xl=Is.DecoderBuffer,Mf=xf,Zl=Yc;function Of(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new Tt,this.tree._init(t.body)}var Cf=Of;Of.prototype.decode=function(e,r){return Xl.isDecoderBuffer(e)||(e=new Xl(e,r)),this.tree._decode(e,r)};function Tt(t){Mf.call(this,"der",t)}gv(Tt,Mf);Tt.prototype._peekTag=function(e,r,n){if(e.isEmpty())return!1;const s=e.save(),i=ru(e,'Failed to peek tag: "'+r+'"');return e.isError(i)?i:(e.restore(s),i.tag===r||i.tagStr===r||i.tagStr+"of"===r||n)};Tt.prototype._decodeTag=function(e,r,n){const s=ru(e,'Failed to decode tag of "'+r+'"');if(e.isError(s))return s;let i=If(e,s.primitive,'Failed to get length of "'+r+'"');if(e.isError(i))return i;if(!n&&s.tag!==r&&s.tagStr!==r&&s.tagStr+"of"!==r)return e.error('Failed to match tag: "'+r+'"');if(s.primitive||i!==null)return e.skip(i,'Failed to match body of: "'+r+'"');const a=e.save(),o=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(o)?o:(i=e.offset-a.offset,e.restore(a),e.skip(i,'Failed to match body of: "'+r+'"'))};Tt.prototype._skipUntilEnd=function(e,r){for(;;){const n=ru(e,r);if(e.isError(n))return n;const s=If(e,n.primitive,r);if(e.isError(s))return s;let i;if(n.primitive||s!==null?i=e.skip(s):i=this._skipUntilEnd(e,r),e.isError(i))return i;if(n.tagStr==="end")break}};Tt.prototype._decodeList=function(e,r,n,s){const i=[];for(;!e.isEmpty();){const a=this._peekTag(e,"end");if(e.isError(a))return a;const o=n.decode(e,"der",s);if(e.isError(o)&&a)break;i.push(o)}return i};Tt.prototype._decodeStr=function(e,r){if(r==="bitstr"){const n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}else if(r==="bmpstr"){const n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let s="";for(let i=0;i<n.length/2;i++)s+=String.fromCharCode(n.readUInt16BE(i*2));return s}else if(r==="numstr"){const n=e.raw().toString("ascii");return this._isNumstr(n)?n:e.error("Decoding of string type: numstr unsupported characters")}else{if(r==="octstr")return e.raw();if(r==="objDesc")return e.raw();if(r==="printstr"){const n=e.raw().toString("ascii");return this._isPrintstr(n)?n:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(r)?e.raw().toString():e.error("Decoding of string type: "+r+" unsupported")}};Tt.prototype._decodeObjid=function(e,r,n){let s;const i=[];let a=0,o=0;for(;!e.isEmpty();)o=e.readUInt8(),a<<=7,a|=o&127,o&128||(i.push(a),a=0);o&128&&i.push(a);const u=i[0]/40|0,f=i[0]%40;if(n?s=i:s=[u,f].concat(i.slice(1)),r){let p=r[s.join(" ")];p===void 0&&(p=r[s.join(".")]),p!==void 0&&(s=p)}return s};Tt.prototype._decodeTime=function(e,r){const n=e.raw().toString();let s,i,a,o,u,f;if(r==="gentime")s=n.slice(0,4)|0,i=n.slice(4,6)|0,a=n.slice(6,8)|0,o=n.slice(8,10)|0,u=n.slice(10,12)|0,f=n.slice(12,14)|0;else if(r==="utctime")s=n.slice(0,2)|0,i=n.slice(2,4)|0,a=n.slice(4,6)|0,o=n.slice(6,8)|0,u=n.slice(8,10)|0,f=n.slice(10,12)|0,s<70?s=2e3+s:s=1900+s;else return e.error("Decoding "+r+" time is not supported yet");return Date.UTC(s,i-1,a,o,u,f,0)};Tt.prototype._decodeNull=function(){return null};Tt.prototype._decodeBool=function(e){const r=e.readUInt8();return e.isError(r)?r:r!==0};Tt.prototype._decodeInt=function(e,r){const n=e.raw();let s=new mv(n);return r&&(s=r[s.toString(10)]||s),s};Tt.prototype._use=function(e,r){return typeof e=="function"&&(e=e(r)),e._getDecoder("der").tree};function ru(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;const n=Zl.tagClass[r>>6],s=(r&32)===0;if((r&31)===31){let a=r;for(r=0;(a&128)===128;){if(a=t.readUInt8(e),t.isError(a))return a;r<<=7,r|=a&127}}else r&=31;const i=Zl.tag[r];return{cls:n,primitive:s,tag:r,tagStr:i}}function If(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&n===128)return null;if(!(n&128))return n;const s=n&127;if(s>4)return t.error("length octect is too long");n=0;for(let i=0;i<s;i++){n<<=8;const a=t.readUInt8(r);if(t.isError(a))return a;n|=a}return n}const wv=en,bv=Xc.Buffer,nu=Cf;function su(t){nu.call(this,t),this.enc="pem"}wv(su,nu);var vv=su;su.prototype.decode=function(e,r){const n=e.toString().split(/[\r\n]+/g),s=r.label.toUpperCase(),i=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,o=-1;for(let p=0;p<n.length;p++){const d=n[p].match(i);if(d!==null&&d[2]===s)if(a===-1){if(d[1]!=="BEGIN")break;a=p}else{if(d[1]!=="END")break;o=p;break}}if(a===-1||o===-1)throw new Error("PEM section not found for: "+s);const u=n.slice(a+1,o).join("");u.replace(/[^a-z0-9+/=]+/gi,"");const f=bv.from(u,"base64");return nu.prototype.decode.call(this,f,r)};(function(t){const e=t;e.der=Cf,e.pem=vv})(Pf);(function(t){const e=Af,r=Pf,n=en,s=t;s.define=function(o,u){return new i(o,u)};function i(a,o){this.name=a,this.body=o,this.decoders={},this.encoders={}}i.prototype._createNamed=function(o){const u=this.name;function f(p){this._initNamed(p,u)}return n(f,o),f.prototype._initNamed=function(d,A){o.call(this,d,A)},new f(this)},i.prototype._getDecoder=function(o){return o=o||"der",this.decoders.hasOwnProperty(o)||(this.decoders[o]=this._createNamed(r[o])),this.decoders[o]},i.prototype.decode=function(o,u,f){return this._getDecoder(u).decode(o,f)},i.prototype._getEncoder=function(o){return o=o||"der",this.encoders.hasOwnProperty(o)||(this.encoders[o]=this._createNamed(e[o])),this.encoders[o]},i.prototype.encode=function(o,u,f){return this._getEncoder(u).encode(o,f)}})(Sf);const _v=Cr(Sf),tn=_v.define,Ev=tn("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),Df=tn("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())});tn("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Df),this.key("publicKey").bitstr())});const Nf=tn("Version",function(){this.int({0:"two-prime",1:"multi"})}),Sv=tn("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),Av=tn("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(Nf),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(Sv))});tn("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(Nf),this.key("algorithm").use(Df),this.key("privateKey").bitstr())});function Tv(t){return{n:Er(t.n),e:Er(t.e),d:t.d&&Er(t.d),p:t.p&&Er(t.p),q:t.q&&Er(t.q),dp:t.dp&&Er(t.dp),dq:t.dq&&Er(t.dq),qi:t.qi&&Er(t.qi)}}function xv(t){return new $f(Buffer.from(t,"base64"))}function Er(t){return/^[0-9]+$/.test(t)?new $f(t,10):xv(t)}function Rv(t){const e=Tv(t),r=!!e.d,n=r?"PRIVATE":"PUBLIC",s="-----BEGIN RSA "+n+` KEY-----
`,i=`
-----END RSA `+n+` KEY-----
`;let a=Buffer.alloc(0);r?(e.version="two-prime",a=Av.encode(e,"der")):a=Ev.encode(e,"der");const o=a.toString("base64").match(/.{1,64}/g).join(`
`);return s+o+i}class ta extends Ef{constructor(r){super(Rv(r),r.n);S(this,"jwk");this.jwk=r}get publicKey(){if(!this.pk)throw new Error("ArweaveSigner - pk is undefined");return J.toBuffer(this.pk)}sign(r){return ct().sign(this.jwk,r)}static async verify(r,n,s){return await ct().verify(r,n,s)}}class Lf{constructor(e){S(this,"_publicKey");S(this,"ownerLength",de[2].pubLength);S(this,"signatureLength",de[2].sigLength);S(this,"signatureType",2);S(this,"pem");S(this,"provider");if(this.provider=e,!this.provider.publicKey)throw new Error("InjectedSolanaSigner - provider.publicKey is undefined");this._publicKey=this.provider.publicKey.toBuffer()}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");return await this.provider.signMessage(e)}static async verify(e,r,n){let s=e;return typeof e=="string"&&(s=J.toBuffer(e)),qi(Buffer.from(n),Buffer.from(r),Buffer.from(s))}}class kv{constructor(e){S(this,"signer");S(this,"publicKey");S(this,"ownerLength",de[Y.ETHEREUM].pubLength);S(this,"signatureLength",de[Y.ETHEREUM].sigLength);S(this,"signatureType",Y.ETHEREUM);this.signer=e.getSigner()}async setPublicKey(){const e="sign this message to connect to Bundlr.Network",r=await this.signer.signMessage(e),n=await zh(e),s=lg(nc(n),r);this.publicKey=Buffer.from(nc(s))}async sign(e){this.publicKey||await this.setPublicKey();const r=await this.signer.signMessage(e);return Buffer.from(r.slice(2),"hex")}static verify(e,r,n){const s=hg(e);return dg(r,n)===s}}var si=Mc.Buffer;function Bv(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var a=t.length,o=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function p(T){if((Array.isArray(T)||T instanceof Uint8Array)&&(T=si.from(T)),!si.isBuffer(T))throw new TypeError("Expected Buffer");if(T.length===0)return"";for(var m=0,E=0,k=0,$=T.length;k!==$&&T[k]===0;)k++,m++;for(var I=($-k)*f+1>>>0,U=new Uint8Array(I);k!==$;){for(var B=T[k],P=0,D=I-1;(B!==0||P<E)&&D!==-1;D--,P++)B+=256*U[D]>>>0,U[D]=B%a>>>0,B=B/a>>>0;if(B!==0)throw new Error("Non-zero carry");E=P,k++}for(var N=I-E;N!==I&&U[N]===0;)N++;for(var L=o.repeat(m);N<I;++N)L+=t.charAt(U[N]);return L}function d(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return si.alloc(0);for(var m=0,E=0,k=0;T[m]===o;)E++,m++;for(var $=(T.length-m)*u+1>>>0,I=new Uint8Array($);T[m];){var U=e[T.charCodeAt(m)];if(U===255)return;for(var B=0,P=$-1;(U!==0||B<k)&&P!==-1;P--,B++)U+=a*I[P]>>>0,I[P]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");k=B,m++}for(var D=$-k;D!==$&&I[D]===0;)D++;var N=si.allocUnsafe(E+($-D));N.fill(0,0,E);for(var L=E;D!==$;)N[L++]=I[D++];return N}function A(T){var m=d(T);if(m)return m;throw new Error("Non-base"+a+" character")}return{encode:p,decodeUnsafe:d,decode:A}}var Pv=Bv,Uv=Pv,$v="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Mv=Uv($v);const ns=Cr(Mv);class iu extends $s{get publicKey(){return ns.decode(this.pk)}get key(){return ns.decode(this._key)}constructor(e){const r=ns.decode(e);super(ns.encode(r.subarray(0,32)),ns.encode(r.subarray(32,64)))}}const se={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function Ut(t,e){if(!t)throw new Error(e)}function Q(t,e,r){if(Ut(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){const n=r.join(", "),s=`Expected ${t} to be an Uint8Array with length [${n}]`;Ut(r.includes(e.length),s)}else{const n=`Expected ${t} to be an Uint8Array with length ${r}`;Ut(e.length===r,n)}}function Lr(t){Ut(mn(t)==="Boolean","Expected compressed to be a Boolean")}function jt(t=r=>new Uint8Array(r),e){return typeof t=="function"&&(t=t(e)),Q("output",t,e),t}function mn(t){return Object.prototype.toString.call(t).slice(8,-1)}var Ov=t=>({contextRandomize(e){switch(Ut(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&Q("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(se.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return Q("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(Q("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(se.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,r){switch(Q("private key",e,32),Q("tweak",r,32),t.privateKeyTweakAdd(e,r)){case 0:return e;case 1:throw new Error(se.TWEAK_ADD)}},privateKeyTweakMul(e,r){switch(Q("private key",e,32),Q("tweak",r,32),t.privateKeyTweakMul(e,r)){case 0:return e;case 1:throw new Error(se.TWEAK_MUL)}},publicKeyVerify(e){return Q("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,r=!0,n){switch(Q("private key",e,32),Lr(r),n=jt(n,r?33:65),t.publicKeyCreate(n,e)){case 0:return n;case 1:throw new Error(se.SECKEY_INVALID);case 2:throw new Error(se.PUBKEY_SERIALIZE)}},publicKeyConvert(e,r=!0,n){switch(Q("public key",e,[33,65]),Lr(r),n=jt(n,r?33:65),t.publicKeyConvert(n,e)){case 0:return n;case 1:throw new Error(se.PUBKEY_PARSE);case 2:throw new Error(se.PUBKEY_SERIALIZE)}},publicKeyNegate(e,r=!0,n){switch(Q("public key",e,[33,65]),Lr(r),n=jt(n,r?33:65),t.publicKeyNegate(n,e)){case 0:return n;case 1:throw new Error(se.PUBKEY_PARSE);case 2:throw new Error(se.IMPOSSIBLE_CASE);case 3:throw new Error(se.PUBKEY_SERIALIZE)}},publicKeyCombine(e,r=!0,n){Ut(Array.isArray(e),"Expected public keys to be an Array"),Ut(e.length>0,"Expected public keys array will have more than zero items");for(const s of e)Q("public key",s,[33,65]);switch(Lr(r),n=jt(n,r?33:65),t.publicKeyCombine(n,e)){case 0:return n;case 1:throw new Error(se.PUBKEY_PARSE);case 2:throw new Error(se.PUBKEY_COMBINE);case 3:throw new Error(se.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,r,n=!0,s){switch(Q("public key",e,[33,65]),Q("tweak",r,32),Lr(n),s=jt(s,n?33:65),t.publicKeyTweakAdd(s,e,r)){case 0:return s;case 1:throw new Error(se.PUBKEY_PARSE);case 2:throw new Error(se.TWEAK_ADD)}},publicKeyTweakMul(e,r,n=!0,s){switch(Q("public key",e,[33,65]),Q("tweak",r,32),Lr(n),s=jt(s,n?33:65),t.publicKeyTweakMul(s,e,r)){case 0:return s;case 1:throw new Error(se.PUBKEY_PARSE);case 2:throw new Error(se.TWEAK_MUL)}},signatureNormalize(e){switch(Q("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(se.SIG_PARSE)}},signatureExport(e,r){Q("signature",e,64),r=jt(r,72);const n={output:r,outputlen:72};switch(t.signatureExport(n,e)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(se.SIG_PARSE);case 2:throw new Error(se.IMPOSSIBLE_CASE)}},signatureImport(e,r){switch(Q("signature",e),r=jt(r,64),t.signatureImport(r,e)){case 0:return r;case 1:throw new Error(se.SIG_PARSE);case 2:throw new Error(se.IMPOSSIBLE_CASE)}},ecdsaSign(e,r,n={},s){Q("message",e,32),Q("private key",r,32),Ut(mn(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Q("options.data",n.data),n.noncefn!==void 0&&Ut(mn(n.noncefn)==="Function","Expected options.noncefn to be a Function"),s=jt(s,64);const i={signature:s,recid:null};switch(t.ecdsaSign(i,e,r,n.data,n.noncefn)){case 0:return i;case 1:throw new Error(se.SIGN);case 2:throw new Error(se.IMPOSSIBLE_CASE)}},ecdsaVerify(e,r,n){switch(Q("signature",e,64),Q("message",r,32),Q("public key",n,[33,65]),t.ecdsaVerify(e,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(se.SIG_PARSE);case 2:throw new Error(se.PUBKEY_PARSE)}},ecdsaRecover(e,r,n,s=!0,i){switch(Q("signature",e,64),Ut(mn(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),Q("message",n,32),Lr(s),i=jt(i,s?33:65),t.ecdsaRecover(i,e,r,n)){case 0:return i;case 1:throw new Error(se.SIG_PARSE);case 2:throw new Error(se.RECOVER);case 3:throw new Error(se.IMPOSSIBLE_CASE)}},ecdh(e,r,n={},s){switch(Q("public key",e,[33,65]),Q("private key",r,32),Ut(mn(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Q("options.data",n.data),n.hashfn!==void 0?(Ut(mn(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&Q("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&Q("options.ybuf",n.ybuf,32),Q("output",s)):s=jt(s,32),t.ecdh(s,e,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return s;case 1:throw new Error(se.PUBKEY_PARSE);case 2:throw new Error(se.ECDH)}}});const Cv=fg().ec,er=new Cv("secp256k1"),X=er.curve,ce=X.n.constructor;function Iv(t,e){let r=new ce(e);if(r.cmp(X.p)>=0)return null;r=r.toRed(X.red);let n=r.redSqr().redIMul(r).redIAdd(X.b).redSqrt();return t===3!==n.isOdd()&&(n=n.redNeg()),er.keyPair({pub:{x:r,y:n}})}function Dv(t,e,r){let n=new ce(e),s=new ce(r);if(n.cmp(X.p)>=0||s.cmp(X.p)>=0||(n=n.toRed(X.red),s=s.toRed(X.red),(t===6||t===7)&&s.isOdd()!==(t===7)))return null;const i=n.redSqr().redIMul(n);return s.redSqr().redISub(i.redIAdd(X.b)).isZero()?er.keyPair({pub:{x:n,y:s}}):null}function Sr(t){const e=t[0];switch(e){case 2:case 3:return t.length!==33?null:Iv(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:Dv(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function qr(t,e){const r=e.encode(null,t.length===33);for(let n=0;n<t.length;++n)t[n]=r[n]}var Nv={contextRandomize(){return 0},privateKeyVerify(t){const e=new ce(t);return e.cmp(X.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){const e=new ce(t),r=X.n.sub(e).umod(X.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){const r=new ce(e);if(r.cmp(X.n)>=0||(r.iadd(new ce(t)),r.cmp(X.n)>=0&&r.isub(X.n),r.isZero()))return 1;const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakMul(t,e){let r=new ce(e);if(r.cmp(X.n)>=0||r.isZero())return 1;r.imul(new ce(t)),r.cmp(X.n)>=0&&(r=r.umod(X.n));const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},publicKeyVerify(t){return Sr(t)===null?1:0},publicKeyCreate(t,e){const r=new ce(e);if(r.cmp(X.n)>=0||r.isZero())return 1;const n=er.keyFromPrivate(e).getPublic();return qr(t,n),0},publicKeyConvert(t,e){const r=Sr(e);if(r===null)return 1;const n=r.getPublic();return qr(t,n),0},publicKeyNegate(t,e){const r=Sr(e);if(r===null)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),qr(t,n),0},publicKeyCombine(t,e){const r=new Array(e.length);for(let s=0;s<e.length;++s)if(r[s]=Sr(e[s]),r[s]===null)return 1;let n=r[0].getPublic();for(let s=1;s<r.length;++s)n=n.add(r[s].pub);return n.isInfinity()?2:(qr(t,n),0)},publicKeyTweakAdd(t,e,r){const n=Sr(e);if(n===null)return 1;if(r=new ce(r),r.cmp(X.n)>=0)return 2;const s=n.getPublic().add(X.g.mul(r));return s.isInfinity()?2:(qr(t,s),0)},publicKeyTweakMul(t,e,r){const n=Sr(e);if(n===null)return 1;if(r=new ce(r),r.cmp(X.n)>=0||r.isZero())return 2;const s=n.getPublic().mul(r);return qr(t,s),0},signatureNormalize(t){const e=new ce(t.subarray(0,32)),r=new ce(t.subarray(32,64));return e.cmp(X.n)>=0||r.cmp(X.n)>=0?1:(r.cmp(er.nh)===1&&t.set(X.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){const r=e.subarray(0,32),n=e.subarray(32,64);if(new ce(r).cmp(X.n)>=0||new ce(n).cmp(X.n)>=0)return 1;const{output:s}=t;let i=s.subarray(4,37);i[0]=0,i.set(r,1);let a=33,o=0;for(;a>1&&i[o]===0&&!(i[o+1]&128);--a,++o);if(i=i.subarray(o),i[0]&128||a>1&&i[0]===0&&!(i[1]&128))return 1;let u=s.subarray(39,72);u[0]=0,u.set(n,1);let f=33,p=0;for(;f>1&&u[p]===0&&!(u[p+1]&128);--f,++p);return u=u.subarray(p),u[0]&128||f>1&&u[0]===0&&!(u[1]&128)?1:(t.outputlen=6+a+f,s[0]=48,s[1]=t.outputlen-2,s[2]=2,s[3]=i.length,s.set(i,4),s[4+a]=2,s[5+a]=u.length,s.set(u,6+a),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;const r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return 1;const n=e[5+r];if(n===0||6+r+n!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||n>1&&e[r+6]===0&&!(e[r+7]&128))return 1;let s=e.subarray(4,4+r);if(s.length===33&&s[0]===0&&(s=s.subarray(1)),s.length>32)return 1;let i=e.subarray(6+r);if(i.length===33&&i[0]===0&&(i=i.slice(1)),i.length>32)throw new Error("S length is too long");let a=new ce(s);a.cmp(X.n)>=0&&(a=new ce(0));let o=new ce(e.subarray(6+r));return o.cmp(X.n)>=0&&(o=new ce(0)),t.set(a.toArrayLike(Uint8Array,"be",32),0),t.set(o.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,n,s){if(s){const o=s;s=u=>{const f=o(e,r,null,n,u);if(!(f instanceof Uint8Array&&f.length===32))throw new Error("This is the way");return new ce(f)}}const i=new ce(r);if(i.cmp(X.n)>=0||i.isZero())return 1;let a;try{a=er.sign(e,r,{canonical:!0,k:s,pers:n})}catch{return 1}return t.signature.set(a.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(a.s.toArrayLike(Uint8Array,"be",32),32),t.recid=a.recoveryParam,0},ecdsaVerify(t,e,r){const n={r:t.subarray(0,32),s:t.subarray(32,64)},s=new ce(n.r),i=new ce(n.s);if(s.cmp(X.n)>=0||i.cmp(X.n)>=0)return 1;if(i.cmp(er.nh)===1||s.isZero()||i.isZero())return 3;const a=Sr(r);if(a===null)return 2;const o=a.getPublic();return er.verify(e,n,o)?0:3},ecdsaRecover(t,e,r,n){const s={r:e.slice(0,32),s:e.slice(32,64)},i=new ce(s.r),a=new ce(s.s);if(i.cmp(X.n)>=0||a.cmp(X.n)>=0)return 1;if(i.isZero()||a.isZero())return 2;let o;try{o=er.recoverPubKey(n,s,r)}catch{return 2}return qr(t,o),0},ecdh(t,e,r,n,s,i,a){const o=Sr(e);if(o===null)return 1;const u=new ce(r);if(u.cmp(X.n)>=0||u.isZero())return 2;const f=o.getPublic().mul(u);if(s===void 0){const p=f.encode(null,!0),d=er.hash().update(p).digest();for(let A=0;A<32;++A)t[A]=d[A]}else{i||(i=new Uint8Array(32));const p=f.getX().toArray("be",32);for(let m=0;m<32;++m)i[m]=p[m];a||(a=new Uint8Array(32));const d=f.getY().toArray("be",32);for(let m=0;m<32;++m)a[m]=d[m];const A=s(i,a,n);if(!(A instanceof Uint8Array&&A.length===t.length))return 2;t.set(A)}return 0}},Lv=Ov(Nv);const ki=Cr(Lv);function vs(t){return t=qf(t),pg("keccak256").update(t).digest()}function qf(t){if(!bt.Buffer.isBuffer(t))if(Array.isArray(t))t=bt.Buffer.from(t);else if(typeof t=="string")Hf(t)?t=bt.Buffer.from(au(Ff(t)),"hex"):t=bt.Buffer.from(t);else if(typeof t=="number")t=Kf(t);else if(t==null)t=bt.Buffer.allocUnsafe(0);else if(Kh.isBN(t))t=t.toArrayLike(bt.Buffer);else if(t.toArray)t=bt.Buffer.from(t.toArray());else throw new Error("invalid type");return t}function Hf(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}function au(t){if(typeof t!="string")throw new Error(`while padding to even, value must be string, is currently ${typeof t}, while padToEven.`);return t.length%2&&(t=`0${t}`),t}function Ff(t){return typeof t!="string"?t:zf(t)?t.slice(2):t}function zf(t){if(typeof t!="string")throw new Error("value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.startsWith("0x")}function Kf(t){const e=jf(t);return bt.Buffer.from(au(e.slice(2)),"hex")}function jf(t){return`0x${t.toString(16)}`}typeof window<"u"&&(window.keccak256=vs);const qv={intToBuffer:Kf,intToHex:jf,isHexPrefixed:zf,stripHexPrefix:Ff,padToEven:au,isHexString:Hf,toBuffer:qf};class Wf{constructor(e,r){S(this,"_key");S(this,"ownerLength",de[Y.ETHEREUM].pubLength);S(this,"signatureLength",de[Y.ETHEREUM].sigLength);S(this,"signatureType",Y.ETHEREUM);S(this,"pk");this._key=e,this.pk=r.toString("hex")}get publicKey(){throw new Error("You must implement `publicKey`")}get key(){return Buffer.from(this._key,"hex")}static async verify(e,r,n){let s=e;typeof e=="string"&&(s=J.toBuffer(e));let i=!1;try{i=ki.ecdsaVerify(n,vs(Buffer.from(r)),s)}catch{}return i}async sign(e){return ki.ecdsaSign(vs(Buffer.from(e)),Buffer.from(this.key)).signature}}class ra extends Wf{get publicKey(){return Buffer.from(this.pk,"hex")}constructor(e){e.startsWith("0x")&&(e=e.slice(2));const r=Buffer.from(e,"hex"),n=ki.publicKeyCreate(r,!1);super(e,Buffer.from(n))}async sign(e){return new jh(this._key).signMessage(e).then(n=>Buffer.from(n.slice(2),"hex"))}static async verify(e,r,n){return ki.ecdsaVerify(n.length===65?n.slice(0,-1):n,nc(zh(r)),typeof e=="string"?J.toBuffer(e):e)}}class Hv extends ra{}class _c extends iu{constructor(e){super(e.replace("ed25519:",""))}}class Fv extends $s{get publicKey(){return Buffer.from(this.pk)}get key(){return Buffer.from(this._key)}constructor(e,r){super(e.subarray(0,32),r)}}let Bi=class extends Lf{constructor(r){super(r);S(this,"signatureType",4)}async sign(r){return super.sign(Buffer.from(Buffer.from(r).toString("hex")))}static async verify(r,n,s){return super.verify(r,Buffer.from(Buffer.from(n).toString("hex")),s)}};class zv extends iu{constructor(r){super(r);S(this,"signatureType",4)}async sign(r){return super.sign(Buffer.from(Buffer.from(r).toString("hex")))}static async verify(r,n,s){return super.verify(r,Buffer.from(Buffer.from(n).toString("hex")),s)}}class Kv extends $s{constructor(e,r){super(e,r)}get publicKey(){return Buffer.from(this.pk.slice(2),"hex")}get key(){return Buffer.from(this._key.slice(2),"hex")}}class Pi{constructor(e,r){S(this,"_publicKey");S(this,"ownerLength",de[Y.INJECTEDAPTOS].pubLength);S(this,"signatureLength",de[Y.INJECTEDAPTOS].sigLength);S(this,"signatureType",Y.INJECTEDAPTOS);S(this,"pem");S(this,"provider");this.provider=e,this._publicKey=r}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");const r=await this.provider.signMessage({message:Buffer.from(e).toString("hex"),nonce:"bundlr"});return Buffer.from(r.signature,"hex")}static async verify(e,r,n){const s=e;return qi(Buffer.from(n),Buffer.from(`APTOS
message: ${Buffer.from(r).toString("hex")}
nonce: bundlr`),Buffer.from(s))}}class Vf{constructor(e,r){S(this,"_publicKey");S(this,"ownerLength",de[Y.MULTIAPTOS].pubLength);S(this,"signatureLength",de[Y.MULTIAPTOS].sigLength);S(this,"signatureType",Y.MULTIAPTOS);S(this,"collectSignatures");S(this,"provider");this._publicKey=e,this.collectSignatures=r}get publicKey(){return this._publicKey}async sign(e){const{signatures:r,bitmap:n}=await this.collectSignatures(e),s=128,i=new Uint8Array([0,0,0,0]),a=new Set;n.forEach(f=>{if(f>=32)throw new Error(`Invalid bit value ${f}.`);if(a.has(f))throw new Error("Duplicated bits detected.");a.add(f);const p=Math.floor(f/8);let d=i[p];d|=s>>f%8,i[p]=d});const o=Buffer.alloc(this.signatureLength);let u=0;for(let f=0;f<32;f++)n.includes(f)&&o.set(r[u++],f*64);return o.set(i,this.signatureLength-4),o}static async verify(e,r,n){const i=de[Y.MULTIAPTOS].sigLength-4,a=n.slice(0,i),o=n.slice(i);let u=!1;for(let f=0;f<32;f++){const p=Math.floor(f/8),d=f-p*8;if((o[p]&128>>d)!==0){const T=a.slice(f*64,(f+1)*64),m=e.slice(f*32,(f+1)*32);await qi(Buffer.from(T),Buffer.from(r),Buffer.from(m))||(u=!0)}}return!u}}class Gf extends ra{constructor(r){super(r);S(this,"ownerLength",de[Y.TYPEDETHEREUM].pubLength);S(this,"signatureLength",de[Y.TYPEDETHEREUM].sigLength);S(this,"signatureType",Y.TYPEDETHEREUM);S(this,"address");S(this,"signer");this.address="0x"+vs(super.publicKey.slice(1)).slice(-20).toString("hex"),this.signer=new jh(r)}get publicKey(){return Buffer.from(this.address)}async sign(r){const n=await this.signer._signTypedData(Ui,$i,{address:this.address,"Transaction hash":r});return Buffer.from(n.slice(2),"hex")}static async verify(r,n,s){const i=r.toString(),a=Wh(Ui,$i,{address:i,"Transaction hash":n},s);return i.toLowerCase()===a.toLowerCase()}}const Ui={name:"Bundlr",version:"1"},$i={Bundlr:[{name:"Transaction hash",type:"bytes"},{name:"address",type:"address"}]};class ou{constructor(e){S(this,"ownerLength",de[Y.TYPEDETHEREUM].pubLength);S(this,"signatureLength",de[Y.TYPEDETHEREUM].sigLength);S(this,"signatureType",Y.TYPEDETHEREUM);S(this,"address");S(this,"signer");S(this,"publicKey");this.signer=e.getSigner()}async ready(){this.address=(await this.signer.getAddress()).toString().toLowerCase(),this.publicKey=Buffer.from(this.address)}async sign(e){const r=await this.signer._signTypedData(Ui,$i,{address:this.address,"Transaction hash":e});return Buffer.from(r.slice(2),"hex")}static verify(e,r,n){const s=e.toString(),i=Wh(Ui,$i,{address:s,"Transaction hash":r},n);return s.toLowerCase()===i.toLowerCase()}}class jv{constructor(e,r){S(this,"signer");S(this,"publicKey");S(this,"ownerLength",de[Y.ARWEAVE].pubLength);S(this,"signatureLength",de[Y.ARWEAVE].sigLength);S(this,"signatureType",Y.ARWEAVE);S(this,"arweave");this.signer=e,this.arweave=r}async setPublicKey(){const e=await this.signer.getActivePublicKey();this.publicKey=J.toBuffer(e)}async sign(e){this.publicKey||await this.setPublicKey();const r={name:"RSA-PSS",saltLength:32},n=await this.signer.signature(e,r);return new Uint8Array(Object.values(n).map(i=>+i))}static async verify(e,r,n){return await ct().verify(e,r,n)}}const cu={1:ta,2:$s,3:ra,4:Bi,5:Pi,6:Vf,7:Gf};async function Ec(t){return Fn([ne("dataitem"),ne("1"),ne(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData])}function Ds(t,e){const r=new Uint8Array(t);if(e<0)throw new Error("Array is unsigned, cannot represent -ve numbers");if(e>2**(t*8)-1)throw new Error(`Number ${e} is too large for an array of ${t} bytes`);for(let n=0;n<r.length;n++){const s=e&255;r[n]=s,e=(e-s)/256}return r}function Sc(t){return Ds(8,t)}function Jf(t){return Ds(2,t)}function Wv(t){return Ds(16,t)}function Ac(t){return Ds(32,t)}function st(t){let e=0;for(let r=t.length-1;r>=0;r--)e=e*256+t[r];return e}class uu{constructor(e=Buffer.alloc(hu),r=0){S(this,"buf");S(this,"pos");this.buf=e,this.pos=r}writeTags(e){if(!Array.isArray(e))throw new Error("input must be array");const r=e.length;let n;if(r)for(this.writeLong(r),n=0;n<r;n++){const s=e[n];if(typeof(s==null?void 0:s.name)!="string"||typeof(s==null?void 0:s.value)!="string")throw new Error(`Invalid tag format for ${s}, expected {name:string, value: string}`);this.writeString(s.name),this.writeString(s.value)}this.writeLong(0)}toBuffer(){const e=Buffer.alloc(this.pos);if(this.pos>this.buf.length)throw new Error(`Too many tag bytes (${this.pos} > ${this.buf.length})`);return this.buf.copy(e,0,0,this.pos),e}writeLong(e){const r=this.buf;let n,s;if(e>=-1073741824&&e<1073741824){s=e>=0?e<<1:~e<<1|1;do r[this.pos]=s&127,s>>=7;while(s&&(r[this.pos++]|=128))}else{n=e>=0?e*2:-e*2-1;do r[this.pos]=n&127,n/=128;while(n>=1&&(r[this.pos++]|=128))}this.pos++,this.buf=r}writeString(e){const r=Buffer.byteLength(e),n=this.buf;this.writeLong(r);let s=this.pos;if(this.pos+=r,!(this.pos>n.length)){if(r>64)this.buf.write(e,this.pos-r,r,"utf8");else{let i,a,o,u;for(i=0,a=r;i<a;i++)o=e.charCodeAt(i),o<128?n[s++]=o:o<2048?(n[s++]=o>>6|192,n[s++]=o&63|128):(o&64512)===55296&&((u=e.charCodeAt(i+1))&64512)===56320?(o=65536+((o&1023)<<10)+(u&1023),i++,n[s++]=o>>18|240,n[s++]=o>>12&63|128,n[s++]=o>>6&63|128,n[s++]=o&63|128):(n[s++]=o>>12|224,n[s++]=o>>6&63|128,n[s++]=o&63|128)}this.buf=n}}readLong(){let e=0,r=0;const n=this.buf;let s,i,a,o;do s=n[this.pos++],i=s&128,e|=(s&127)<<r,r+=7;while(i&&r<28);if(i){a=e,o=268435456;do s=n[this.pos++],a+=(s&127)*o,o*=128;while(s&128);return(a%2?-(a+1):a)/2}return e>>1^-(e&1)}skipLong(){const e=this.buf;for(;e[this.pos++]&128;);}readTags(){const e=[];let r;for(;r=this.readLong();)for(r<0&&(r=-r,this.skipLong());r--;){const n=this.readString(),s=this.readString();e.push({name:n,value:s})}return e}readString(){const e=this.readLong(),r=this.pos,n=this.buf;if(this.pos+=e,this.pos>n.length)throw new Error("TAP Position out of range");return this.buf.slice(r,r+e).toString()}}function Xf(t){if((t==null?void 0:t.length)===0)return Buffer.allocUnsafe(0);const e=new uu;return e.writeTags(t),e.toBuffer()}function Mi(t){return new uu(t).readTags()}const lu=80,hu=4096;class gr{constructor(e){S(this,"binary");S(this,"_id");this.binary=e}static isDataItem(e){return e.binary!==void 0}get signatureType(){const e=st(this.binary.subarray(0,2));if((Y==null?void 0:Y[e])!==void 0)return e;throw new Error("Unknown signature type: "+e)}async isValid(){return gr.verify(this.binary)}get id(){return J.encode(this.rawId)}set id(e){this._id=J.toBuffer(e)}get rawId(){return Jr.createHash("sha256").update(this.rawSignature).digest()}set rawId(e){this._id=e}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return J.encode(this.rawSignature)}set rawOwner(e){if(e.byteLength!=this.ownerLength)throw new Error(`Expected raw owner (pubkey) to be ${this.ownerLength} bytes, got ${e.byteLength} bytes.`);this.binary.set(e,2+this.signatureLength)}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get signatureLength(){return de[this.signatureType].sigLength}get owner(){return J.encode(this.rawOwner)}get ownerLength(){return de[this.signatureType].pubLength}get rawTarget(){const e=this.getTargetStart();return this.binary[e]==1?this.binary.subarray(e+1,e+33):bt.Buffer.alloc(0)}get target(){return J.encode(this.rawTarget)}get rawAnchor(){const e=this.getAnchorStart();return this.binary[e]==1?this.binary.subarray(e+1,e+33):bt.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){const e=this.getTagsStart(),r=st(this.binary.subarray(e+8,e+16));return this.binary.subarray(e+16,e+16+r)}get tags(){const e=this.getTagsStart();if(st(this.binary.subarray(e,e+8))==0)return[];const n=st(this.binary.subarray(e+8,e+16));return Mi(bt.Buffer.from(this.binary.subarray(e+16,e+16+n)))}get tagsB64Url(){return this.tags.map(r=>({name:J.encode(r.name),value:J.encode(r.value)}))}getStartOfData(){const e=this.getTagsStart(),r=this.binary.subarray(e+8,e+16),n=st(r);return e+16+n}get rawData(){const e=this.getTagsStart(),r=this.binary.subarray(e+8,e+16),n=st(r),s=e+16+n;return this.binary.subarray(s,this.binary.length)}get data(){return J.encode(this.rawData)}getRaw(){return this.binary}async sign(e){return this._id=await fu(this,e),this.rawId}async setSignature(e){this.binary.set(e,2),this._id=bt.Buffer.from(await ct().hash(e))}isSigned(){var e;return(((e=this._id)==null?void 0:e.length)??0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(e=>({name:J.encode(e.name),value:J.encode(e.value)})),data:this.data}}static async verify(e){if(e.byteLength<lu)return!1;const r=new gr(e),n=r.signatureType,s=r.getTagsStart(),i=st(e.subarray(s,s+8)),a=e.subarray(s+8,s+16),o=st(a);if(o>hu)return!1;if(i>0)try{if(Mi(bt.Buffer.from(e.subarray(s+16,s+16+o))).length!==i)return!1}catch{return!1}const u=cu[n],f=await Ec(r);return await u.verify(r.rawOwner,f,r.rawSignature)}async getSignatureData(){return Ec(this)}getTagsStart(){const e=this.getTargetStart(),r=this.binary[e]==1;let n=e+(r?33:1);const s=this.binary[n]==1;return n+=s?33:1,n}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let e=this.getTargetStart()+1;const r=this.binary[this.getTargetStart()]==1;return e+=r?32:0,e}}const Yt=32;class du{constructor(e){S(this,"length");S(this,"items");S(this,"binary");this.binary=e,this.length=this.getDataItemCount(),this.items=this.getItems()}getRaw(){return this.binary}get(e){if(typeof e=="number"){if(e>=this.length)throw new RangeError("Index out of range");return this.getByIndex(e)}else return this.getById(e)}getSizes(){const e=[];for(let r=Yt;r<Yt+64*this.length;r+=64)e.push(st(this.binary.subarray(r,r+32)));return e}getIds(){const e=[];for(let r=Yt;r<Yt+64*this.length;r+=64){const n=this.binary.subarray(r+32,r+64);if(n.length===0)throw new Error("Invalid bundle, id specified in headers doesn't exist");e.push(J.encode(n))}return e}getIdBy(e){if(e>this.length-1)throw new RangeError("Index of bundle out of range");const r=64+64*e;return J.encode(this.binary.subarray(r,r+32))}async toTransaction(e,r,n){const s=await r.createTransaction({data:this.binary,...e},n);return s.addTag("Bundle-Format","binary"),s.addTag("Bundle-Version","2.0.0"),s}async verify(){for(const e of this.items){const r=await e.isValid(),n=J(Jr.createHash("sha256").update(e.rawSignature).digest());if(!(r&&e.id===n))return!1}return!0}getOffset(e){let r=0;for(let n=Yt;n<Yt+64*this.length;n+=64){const s=st(this.binary.subarray(n,n+32));r+=s;const i=this.binary.subarray(n+32,n+64);if(Buffer.compare(i,e)===0)return{startOffset:r,size:s}}return{startOffset:-1,size:-1}}getByIndex(e){let r=0;const n=this.getBundleStart();let s=0,i,a;for(let p=Yt;p<Yt+64*this.length;p+=64){if(i=st(this.binary.subarray(p,p+32)),s++===e){a=this.binary.subarray(p+32,p+64);break}r+=i}const o=n+r,u=this.binary.subarray(o,o+i),f=new gr(u);return f.rawId=a,f}getById(e){const r=J.toBuffer(e),n=this.getOffset(r);if(n.startOffset===-1)throw new Error("Transaction not found");const i=this.getBundleStart()+n.startOffset;return new gr(this.binary.subarray(i,i+n.size))}getDataItemCount(){return st(this.binary.subarray(0,32))}getBundleStart(){return 32+64*this.length}getItems(){const e=new Array(this.length);let r=0;const n=this.getBundleStart();let s=0;for(let i=Yt;i<Yt+64*this.length;i+=64){const a=st(this.binary.subarray(i,i+32)),o=this.binary.subarray(i+32,i+64);if(o.length===0)throw new Error("Invalid bundle, id specified in headers doesn't exist");const u=n+r,f=this.binary.subarray(u,u+a);r+=a;const p=new gr(f);p.rawId=o,e[s]=p,s++}return e}}function Vv(t){return new du(t)}async function Zf(t,e){const r=new Uint8Array(64*t.length),n=await Promise.all(t.map(async(i,a)=>{const o=i.isSigned()?i.rawId:await fu(i,e),u=new Uint8Array(64);return u.set(Ac(i.getRaw().byteLength),0),u.set(o,32),r.set(u,64*a),i.getRaw()})).then(i=>Buffer.concat(i)),s=Buffer.concat([Buffer.from(Ac(t.length)),Buffer.from(r),n]);return new du(s)}async function Yf(t,e){const r=await Ec(t),n=await e.sign(r),s=await ct().hash(n);return{signature:Buffer.from(n),id:Buffer.from(s)}}async function fu(t,e){const{signature:r,id:n}=await Yf(t,e);return t.getRaw().set(r,2),n}function pu(t,e,r){var U,B;const n=e.publicKey,s=r!=null&&r.target?J.toBuffer(r.target):null,i=1+((s==null?void 0:s.byteLength)??0),a=r!=null&&r.anchor?Buffer.from(r.anchor):null,o=1+((a==null?void 0:a.byteLength)??0),u=(((U=r==null?void 0:r.tags)==null?void 0:U.length)??0)>0?Xf(r==null?void 0:r.tags):null,f=16+(u?u.byteLength:0),p=Buffer.from(t),d=p.byteLength,A=2+e.signatureLength+e.ownerLength+i+o+f+d,T=Buffer.alloc(A);if(T.set(Jf(e.signatureType),0),T.set(new Uint8Array(e.signatureLength).fill(0),2),n.byteLength!==e.ownerLength)throw new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${n.byteLength}`);T.set(n,2+e.signatureLength);const m=2+e.signatureLength+e.ownerLength;if(T[m]=s?1:0,s){if(s.byteLength!==32)throw new Error(`Target must be 32 bytes but was incorrectly ${s.byteLength}`);T.set(s,m+1)}const E=m+i;let k=E+1;if(T[E]=a?1:0,a){if(k+=a.byteLength,a.byteLength!==32)throw new Error("Anchor must be 32 bytes");T.set(a,E+1)}T.set(Sc(((B=r==null?void 0:r.tags)==null?void 0:B.length)??0),k);const $=Sc((u==null?void 0:u.byteLength)??0);T.set($,k+8),u&&T.set(u,k+16);const I=k+f;return T.set(p,I),new gr(T)}class Gv{constructor(){S(this,"signatureType");S(this,"rawSignature");S(this,"signature");S(this,"signatureLength");S(this,"rawOwner");S(this,"owner");S(this,"ownerLength");S(this,"rawTarget");S(this,"target");S(this,"rawAnchor");S(this,"anchor");S(this,"rawTags");S(this,"tags");S(this,"rawData");S(this,"data")}static async verify(...e){throw new Error("You must implement `verify`")}}const Jv=Object.freeze(Object.defineProperty({__proto__:null,AVSCTap:uu,AlgorandSigner:Fv,AptosSigner:Kv,ArconnectSigner:jv,Arweave:Jc,ArweaveSigner:ta,Bundle:du,BundleItem:Gv,CryptoDriver:_f,Curve25519:$s,DataItem:gr,EthereumSigner:ra,HexInjectedSolanaSigner:Bi,HexSolanaSigner:zv,InjectedAptosSigner:Pi,InjectedEthereumSigner:kv,InjectedSolanaSigner:Lf,InjectedTypedEthereumSigner:ou,MAX_TAG_BYTES:hu,MIN_BINARY_SIZE:lu,MultiSignatureAptosSigner:Vf,NearSigner:_c,PolygonSigner:Hv,Rsa4096:Ef,SIG_CONFIG:de,get SignatureConfig(){return Y},Signer:Tw,SolanaSigner:iu,TypedEthereumSigner:Gf,bundleAndSignData:Zf,byteArrayToLong:st,concatBuffers:pt,createData:pu,deepHash:Fn,deserializeTags:Mi,exportForTesting:qv,getCryptoDriver:ct,getSignatureAndId:Yf,indexToType:cu,keccak256:vs,longTo16ByteArray:Wv,longTo32ByteArray:Ac,longTo8ByteArray:Sc,longToNByteArray:Ds,secp256k1:Wf,serializeTags:Xf,shortTo2ByteArray:Jf,sign:fu,stringToBuffer:ne,unbundleData:Vv},Symbol.toStringTag,{value:"Module"}));async function Yl(t){const e=Qf(t);let r=(await e.next()).value;r=await ft(e,r,32);const n=st(r.subarray(0,32));r=r.subarray(32);const s=64*n;r=await ft(e,r,s);const i=new Array(n);for(let u=0;u<s;u+=64)i[u/64]=[st(r.subarray(u,u+32)),J(Buffer.from(r.subarray(u+32,u+64)))];r=r.subarray(s);let a=32+s;const o=[];for(const[u,f]of i){r=await ft(e,r,lu),r=await ft(e,r,2);const p=st(r.subarray(0,2));r=r.subarray(2);const{sigLength:d,pubLength:A,sigName:T}=de[p];r=await ft(e,r,d);const m=r.subarray(0,d);r=r.subarray(d),r=await ft(e,r,A);const E=r.subarray(0,A);r=r.subarray(A),r=await ft(e,r,1);const k=r[0]===1;k&&(r=await ft(e,r,33));const $=k?r.subarray(1,33):Buffer.allocUnsafe(0);r=r.subarray(k?33:1),r=await ft(e,r,1);const I=r[0]===1;I&&(r=await ft(e,r,33));const U=I?r.subarray(1,33):Buffer.allocUnsafe(0);r=r.subarray(I?33:1),r=await ft(e,r,8);const B=st(r.subarray(0,8));r=r.subarray(8),r=await ft(e,r,8);const P=st(r.subarray(0,8));r=r.subarray(8),r=await ft(e,r,P);const D=r.subarray(0,P),N=B!==0&&P!==0?Mi(Buffer.from(D)):[];if(N.length!==B)throw new Error("Tags lengths don't match");r=r.subarray(P);const L=new gs.Transform;L._transform=function(h,y,g){this.push(h),g()};const K=Fn([ne("dataitem"),ne("1"),ne(p.toString()),E,$,U,D,L]),fe=2+d+A+(k?33:1)+(I?33:1)+16+P,_=u-fe;if(r.byteLength>_)L.write(r.subarray(0,_)),r=r.subarray(_);else{let h=r.byteLength;for(L.write(r);_>h;){if(r=(await e.next()).value,!r)throw new Error(`Not enough data bytes  expected: ${_} received: ${h}`);h+=r.byteLength,h>_?L.write(r.subarray(0,r.byteLength-(h-_))):L.write(r)}r=r.subarray(r.byteLength-(h-_))}if(L.end(),f!==J(Jr.createHash("sha256").update(m).digest()))throw new Error("ID doesn't match signature");if(!await cu[p].verify(E,await K,m))throw new Error("Invalid signature");o.push({id:f,sigName:T,signature:J(Buffer.from(m)),target:J(Buffer.from($)),anchor:J(Buffer.from(U)),owner:J(Buffer.from(E)),tags:N,dataOffset:a+fe,dataSize:_}),a+=fe+_}return o}async function Xv(t,e,r,n){const s=pu("",r,n),i=new gs.PassThrough,a=[ne("dataitem"),ne("1"),ne(s.signatureType.toString()),s.rawOwner,s.rawTarget,s.rawAnchor,s.rawTags,t],o=await Fn(a),u=Buffer.from(await r.sign(o));return s.setSignature(u),i.write(s.getRaw()),e.pipe(i)}async function ft(t,e,r){if(e.byteLength>=r)return e;const{done:n,value:s}=await t.next();if(n&&!s)throw new Error("Invalid buffer");return ft(t,Buffer.concat([Buffer.from(e),Buffer.from(s)]),r)}async function*Qf(t){for await(const e of t)yield e}const Zv={readBytes:ft,getReader:Qf},Yv=Object.freeze(Object.defineProperty({__proto__:null,default:Yl,processStream:Yl,streamExportForTesting:Zv,streamSigner:Xv},Symbol.toStringTag,{value:"Module"})),Qv={...Jv,stream:Yv};globalThis.arbundles??(globalThis.arbundles=Qv);const e_=Object.freeze(Object.defineProperty({__proto__:null,DataItem:gr,bundleAndSignData:Zf,createData:pu,deepHash:Fn,getCryptoDriver:ct,stringToBuffer:ne},Symbol.toStringTag,{value:"Module"}));class na{constructor(e){S(this,"base");S(this,"wallet");S(this,"_address");S(this,"providerUrl");S(this,"providerInstance");S(this,"ticker");S(this,"name");S(this,"irys");S(this,"minConfirm",5);S(this,"isSlow",!1);S(this,"needsFee",!0);S(this,"inheritsRPC",!1);Object.assign(this,e)}get address(){return this._address}async ready(){this._address=this.wallet?this.ownerToAddress(await this.getPublicKey()):void 0}async getId(e){return J.encode(Buffer.from(await ct().hash(await e.rawSignature())))}async price(){return ep(this.ticker)}}async function ep(t){const e=await me.get(`https://api.redstone.finance/prices?symbol=${t}&provider=redstone&limit=1`);return await ut.checkAndThrow(e,"Getting price data"),e.data[0].value}const t_=ou;class sa extends na{constructor(r){super(r);S(this,"signer");S(this,"w3signer");S(this,"inheritsRPC",!0);this.base=["wei",1e18]}async getTx(r){const s=await this.providerInstance.getTransaction(r);if(!s)throw new Error("Tx doesn't exist");if(!s.to)throw new Error(`Unable to resolve transactions ${r} receiver`);return{from:s.from,to:s.to,blockHeight:s.blockNumber?new j(s.blockNumber):void 0,amount:new j(s.value.toHexString(),16),pending:!s.blockNumber,confirmed:s.confirmations>=this.minConfirm}}ownerToAddress(r){return r.toString().toLowerCase()}async sign(r){return(await this.getSigner()).sign(r)}getSigner(){return this.signer||(this.signer=new ou(this.wallet)),this.signer}async verify(r,n,s){return t_.verify(r,n,s)}async getCurrentHeight(){const n=await this.providerInstance.send("eth_blockNumber",[]);return new j(n,16)}async getFee(r,n){const s=this.providerInstance,i={to:n,from:this.address,value:"0x"+new j(r).toString(16)},a=await s.estimateGas(i),o=await s.getGasPrice();return new j(a.mul(o).toString())}async sendTx(r){const s=await this.w3signer.sendTransaction(r);return s?s.hash:void 0}async createTx(r,n,s){const i=ol.from(new j(r).toFixed()),a=this.w3signer,o=await a.estimateGas({to:n,from:this.address,value:i.toHexString()});let u=await a.getGasPrice();return this.name==="matic"&&(u=ol.from(new j(u.toString()).multipliedBy(10).decimalPlaces(0).toString())),{txId:void 0,tx:await a.populateTransaction({to:n,from:this.address,value:i.toHexString(),gasPrice:u,gasLimit:o})}}async getPublicKey(){return this.address}async ready(){var r,n;this.w3signer=await this.wallet.getSigner(),this._address=(await this.w3signer.getAddress()).toString().toLowerCase(),await this.getSigner().ready(),this.providerInstance=this.wallet,await((n=(r=this.providerInstance)==null?void 0:r._ready)==null?void 0:n.call(r))}}var ia={},aa={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyType=void 0,function(e){e[e.ED25519=0]="ED25519"}(t.KeyType||(t.KeyType={}))})(aa);var oa={},Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.KeyPairBase=void 0;let r_=class{};Ns.KeyPairBase=r_;var Ls={},it={},ii=Mc.Buffer;function n_(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var a=t.length,o=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function p(T){if((Array.isArray(T)||T instanceof Uint8Array)&&(T=ii.from(T)),!ii.isBuffer(T))throw new TypeError("Expected Buffer");if(T.length===0)return"";for(var m=0,E=0,k=0,$=T.length;k!==$&&T[k]===0;)k++,m++;for(var I=($-k)*f+1>>>0,U=new Uint8Array(I);k!==$;){for(var B=T[k],P=0,D=I-1;(B!==0||P<E)&&D!==-1;D--,P++)B+=256*U[D]>>>0,U[D]=B%a>>>0,B=B/a>>>0;if(B!==0)throw new Error("Non-zero carry");E=P,k++}for(var N=I-E;N!==I&&U[N]===0;)N++;for(var L=o.repeat(m);N<I;++N)L+=t.charAt(U[N]);return L}function d(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return ii.alloc(0);for(var m=0,E=0,k=0;T[m]===o;)E++,m++;for(var $=(T.length-m)*u+1>>>0,I=new Uint8Array($);T[m];){var U=e[T.charCodeAt(m)];if(U===255)return;for(var B=0,P=$-1;(U!==0||B<k)&&P!==-1;P--,B++)U+=a*I[P]>>>0,I[P]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");k=B,m++}for(var D=$-k;D!==$&&I[D]===0;)D++;var N=ii.allocUnsafe(E+($-D));N.fill(0,0,E);for(var L=E;D!==$;)N[L++]=I[D++];return N}function A(T){var m=d(T);if(m)return m;throw new Error("Non-base"+a+" character")}return{encode:p,decodeUnsafe:d,decode:A}}var s_=n_,i_=s_,a_="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",o_=i_(a_),c_=z&&z.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),u_=z&&z.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lr=z&&z.__decorate||function(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(i=(s<3?a(i):s>3?a(e,r,i):a(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i},l_=z&&z.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&c_(e,t,r);return u_(e,t),e},tp=z&&z.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(it,"__esModule",{value:!0});it.deserializeUnchecked=it.deserialize=it.serialize=it.BinaryReader=it.BinaryWriter=it.BorshError=it.baseDecode=it.baseEncode=void 0;const $r=tp(Vh),rp=tp(o_),h_=l_(Gh),d_=typeof TextDecoder!="function"?h_.TextDecoder:TextDecoder,f_=new d_("utf-8",{fatal:!0});function p_(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),rp.default.encode(Buffer.from(t))}it.baseEncode=p_;function y_(t){return Buffer.from(rp.default.decode(t))}it.baseDecode=y_;const Po=1024;let yt=class extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};it.BorshError=yt;let np=class{constructor(){this.buf=Buffer.alloc(Po),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Po)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new $r.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new $r.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new $r.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new $r.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(Po)]),this.length+=e.length}writeString(e){this.maybeResize();const r=Buffer.from(e,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,r){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}};it.BinaryWriter=np;function hr(t,e,r){const n=r.value;r.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const a=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new yt("Reached the end of buffer when deserializing")}throw i}}}let xt=class{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new $r.default(e,"le")}readU128(){const e=this.readBuffer(16);return new $r.default(e,"le")}readU256(){const e=this.readBuffer(32);return new $r.default(e,"le")}readU512(){const e=this.readBuffer(64);return new $r.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new yt(`Expected buffer length ${e} isn't within bounds`);const r=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,r}readString(){const e=this.readU32(),r=this.readBuffer(e);try{return f_.decode(r)}catch(n){throw new yt(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const r=this.readU32(),n=Array();for(let s=0;s<r;++s)n.push(e());return n}};lr([hr],xt.prototype,"readU8",null);lr([hr],xt.prototype,"readU16",null);lr([hr],xt.prototype,"readU32",null);lr([hr],xt.prototype,"readU64",null);lr([hr],xt.prototype,"readU128",null);lr([hr],xt.prototype,"readU256",null);lr([hr],xt.prototype,"readU512",null);lr([hr],xt.prototype,"readString",null);lr([hr],xt.prototype,"readFixedArray",null);lr([hr],xt.prototype,"readArray",null);it.BinaryReader=xt;function sp(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Hr(t,e,r,n,s){try{if(typeof n=="string")s[`write${sp(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new yt(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);s.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new yt(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let i=0;i<n[1];i++)Hr(t,null,r[i],n[0],s)}else s.writeArray(r,i=>{Hr(t,e,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?s.writeU8(0):(s.writeU8(1),Hr(t,e,r,n.type,s));break}case"map":{s.writeU32(r.size),r.forEach((i,a)=>{Hr(t,e,a,n.key,s),Hr(t,e,i,n.value,s)});break}default:throw new yt(`FieldType ${n} unrecognized`)}else ip(t,r,s)}catch(i){throw i instanceof yt&&i.addToFieldPath(e),i}}function ip(t,e,r){if(typeof e.borshSerialize=="function"){e.borshSerialize(r);return}const n=t.get(e.constructor);if(!n)throw new yt(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{Hr(t,s,e[s],i,r)});else if(n.kind==="enum"){const s=e[n.field];for(let i=0;i<n.values.length;++i){const[a,o]=n.values[i];if(a===s){r.writeU8(i),Hr(t,a,e[a],o,r);break}}}else throw new yt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function g_(t,e,r=np){const n=new r;return ip(t,e,n),n.toArray()}it.serialize=g_;function Fr(t,e,r,n){try{if(typeof r=="string")return n[`read${sp(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){const s=[];for(let i=0;i<r[1];i++)s.push(Fr(t,null,r[0],n));return s}else return n.readArray(()=>Fr(t,e,r[0],n))}if(r.kind==="option")return n.readU8()?Fr(t,e,r.type,n):void 0;if(r.kind==="map"){let s=new Map;const i=n.readU32();for(let a=0;a<i;a++){const o=Fr(t,e,r.key,n),u=Fr(t,e,r.value,n);s.set(o,u)}return s}return yu(t,r,n)}catch(s){throw s instanceof yt&&s.addToFieldPath(e),s}}function yu(t,e,r){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(r);const n=t.get(e);if(!n)throw new yt(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,a]of t.get(e).fields)s[i]=Fr(t,i,a,r);return new e(s)}if(n.kind==="enum"){const s=r.readU8();if(s>=n.values.length)throw new yt(`Enum index: ${s} is out of range`);const[i,a]=n.values[s],o=Fr(t,i,a,r);return new e({[i]:o})}throw new yt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function m_(t,e,r,n=xt){const s=new n(r),i=yu(t,e,s);if(s.offset<r.length)throw new yt(`Unexpected ${r.length-s.offset} bytes after deserialized data`);return i}it.deserialize=m_;function w_(t,e,r,n=xt){const s=new n(r);return yu(t,e,s)}it.deserializeUnchecked=w_;var qs={},ap={},ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.Assignable=void 0;let b_=class{constructor(e){Object.keys(e).map(r=>{this[r]=e[r]})}};ca.Assignable=b_;var ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.ErrorContext=ir.TypedError=ir.ArgumentTypeError=ir.PositionalArgsError=void 0;let v_=class extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}};ir.PositionalArgsError=v_;let __=class extends Error{constructor(e,r,n){super(`Expected ${r} for '${e}' argument, but got '${JSON.stringify(n)}'`)}};ir.ArgumentTypeError=__;let E_=class extends Error{constructor(e,r,n){super(e),this.type=r||"UntypedError",this.context=n}};ir.TypedError=E_;let S_=class{constructor(e){this.transactionHash=e}};ir.ErrorContext=S_;var op={},cp={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.IdType=void 0,function(e){e.Transaction="transaction",e.Receipt="receipt"}(t.IdType||(t.IdType={}))})(cp);var up={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(e){e.Unknown="Unknown",e.Pending="Pending",e.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(e){e.NotStarted="NotStarted",e.Started="Started",e.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={}))})(up);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=t.IdType=void 0;var e=cp;Object.defineProperty(t,"IdType",{enumerable:!0,get:function(){return e.IdType}});var r=up;Object.defineProperty(t,"ExecutionStatusBasic",{enumerable:!0,get:function(){return r.ExecutionStatusBasic}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return r.FinalExecutionStatusBasic}})})(op);(function(t){var e=z&&z.__createBinding||(Object.create?function(n,s,i,a){a===void 0&&(a=i);var o=Object.getOwnPropertyDescriptor(s,i);(!o||("get"in o?!s.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,a,o)}:function(n,s,i,a){a===void 0&&(a=i),n[a]=s[i]}),r=z&&z.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(ca,t),r(ir,t),r(op,t)})(ap);var A_=z&&z.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qs,"__esModule",{value:!0});qs.PublicKey=void 0;const T_=ap,Uo=it,x_=A_(Hi),Oi=aa;function R_(t){switch(t){case Oi.KeyType.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${t}`)}}function k_(t){switch(t.toLowerCase()){case"ed25519":return Oi.KeyType.ED25519;default:throw new Error(`Unknown key type ${t}`)}}let B_=class bi extends T_.Assignable{static from(e){return typeof e=="string"?bi.fromString(e):e}static fromString(e){const r=e.split(":");if(r.length===1)return new bi({keyType:Oi.KeyType.ED25519,data:(0,Uo.baseDecode)(r[0])});if(r.length===2)return new bi({keyType:k_(r[0]),data:(0,Uo.baseDecode)(r[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${R_(this.keyType)}:${(0,Uo.baseEncode)(this.data)}`}verify(e,r){switch(this.keyType){case Oi.KeyType.ED25519:return x_.default.sign.detached.verify(e,r,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}};qs.PublicKey=B_;var P_=z&&z.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.KeyPairEd25519=void 0;const $o=it,Mo=P_(Hi),U_=aa,$_=Ns,M_=qs;let O_=class lp extends $_.KeyPairBase{constructor(e){super();const r=Mo.default.sign.keyPair.fromSecretKey((0,$o.baseDecode)(e));this.publicKey=new M_.PublicKey({keyType:U_.KeyType.ED25519,data:r.publicKey}),this.secretKey=e}static fromRandom(){const e=Mo.default.sign.keyPair();return new lp((0,$o.baseEncode)(e.secretKey))}sign(e){return{signature:Mo.default.sign.detached(e,(0,$o.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(e,r){return this.publicKey.verify(e,r)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}};Ls.KeyPairEd25519=O_;Object.defineProperty(oa,"__esModule",{value:!0});oa.KeyPair=void 0;const C_=Ns,Oo=Ls;let I_=class extends C_.KeyPairBase{static fromRandom(e){switch(e.toUpperCase()){case"ED25519":return Oo.KeyPairEd25519.fromRandom();default:throw new Error(`Unknown curve ${e}`)}}static fromString(e){const r=e.split(":");if(r.length===1)return new Oo.KeyPairEd25519(r[0]);if(r.length===2)switch(r[0].toUpperCase()){case"ED25519":return new Oo.KeyPairEd25519(r[1]);default:throw new Error(`Unknown curve: ${r[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}};oa.KeyPair=I_;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.KeyPairEd25519=t.KeyPair=t.KeyType=void 0;var e=aa;Object.defineProperty(t,"KeyType",{enumerable:!0,get:function(){return e.KeyType}});var r=oa;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return r.KeyPair}});var n=Ls;Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return n.KeyPairEd25519}});var s=qs;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return s.PublicKey}})})(ia);var hp={},ua={},dp={},la={},Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.KeyStore=void 0;class D_{}Kn.KeyStore=D_;var hn=z&&z.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(p){try{f(n.next(p))}catch(d){a(d)}}function u(p){try{f(n.throw(p))}catch(d){a(d)}}function f(p){p.done?i(p.value):s(p.value).then(o,u)}f((n=n.apply(t,e||[])).next())})};Object.defineProperty(la,"__esModule",{value:!0});la.InMemoryKeyStore=void 0;const N_=ia,L_=Kn;class q_ extends L_.KeyStore{constructor(){super(),this.keys={}}setKey(e,r,n){return hn(this,void 0,void 0,function*(){this.keys[`${r}:${e}`]=n.toString()})}getKey(e,r){return hn(this,void 0,void 0,function*(){const n=this.keys[`${r}:${e}`];return n?N_.KeyPair.fromString(n):null})}removeKey(e,r){return hn(this,void 0,void 0,function*(){delete this.keys[`${r}:${e}`]})}clear(){return hn(this,void 0,void 0,function*(){this.keys={}})}getNetworks(){return hn(this,void 0,void 0,function*(){const e=new Set;return Object.keys(this.keys).forEach(r=>{const n=r.split(":");e.add(n[1])}),Array.from(e.values())})}getAccounts(e){return hn(this,void 0,void 0,function*(){const r=new Array;return Object.keys(this.keys).forEach(n=>{const s=n.split(":");s[s.length-1]===e&&r.push(s.slice(0,s.length-1).join(":"))}),r})}toString(){return"InMemoryKeyStore"}}la.InMemoryKeyStore=q_;var ha={},dn=z&&z.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(p){try{f(n.next(p))}catch(d){a(d)}}function u(p){try{f(n.throw(p))}catch(d){a(d)}}function f(p){p.done?i(p.value):s(p.value).then(o,u)}f((n=n.apply(t,e||[])).next())})};Object.defineProperty(ha,"__esModule",{value:!0});ha.MergeKeyStore=void 0;const H_=Kn;class F_ extends H_.KeyStore{constructor(e,r={writeKeyStoreIndex:0}){super(),this.options=r,this.keyStores=e}setKey(e,r,n){return dn(this,void 0,void 0,function*(){yield this.keyStores[this.options.writeKeyStoreIndex].setKey(e,r,n)})}getKey(e,r){return dn(this,void 0,void 0,function*(){for(const n of this.keyStores){const s=yield n.getKey(e,r);if(s)return s}return null})}removeKey(e,r){return dn(this,void 0,void 0,function*(){for(const n of this.keyStores)yield n.removeKey(e,r)})}clear(){return dn(this,void 0,void 0,function*(){for(const e of this.keyStores)yield e.clear()})}getNetworks(){return dn(this,void 0,void 0,function*(){const e=new Set;for(const r of this.keyStores)for(const n of yield r.getNetworks())e.add(n);return Array.from(e)})}getAccounts(e){return dn(this,void 0,void 0,function*(){const r=new Set;for(const n of this.keyStores)for(const s of yield n.getAccounts(e))r.add(s);return Array.from(r)})}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}ha.MergeKeyStore=F_;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.KeyStore=t.InMemoryKeyStore=void 0;var e=la;Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return e.InMemoryKeyStore}});var r=Kn;Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return r.KeyStore}});var n=ha;Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return n.MergeKeyStore}})})(dp);var fn=z&&z.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(p){try{f(n.next(p))}catch(d){a(d)}}function u(p){try{f(n.throw(p))}catch(d){a(d)}}function f(p){p.done?i(p.value):s(p.value).then(o,u)}f((n=n.apply(t,e||[])).next())})};Object.defineProperty(ua,"__esModule",{value:!0});ua.BrowserLocalStorageKeyStore=void 0;const z_=ia,K_=dp,j_="near-api-js:keystore:";class W_ extends K_.KeyStore{constructor(e=window.localStorage,r=j_){super(),this.localStorage=e,this.prefix=r}setKey(e,r,n){return fn(this,void 0,void 0,function*(){this.localStorage.setItem(this.storageKeyForSecretKey(e,r),n.toString())})}getKey(e,r){return fn(this,void 0,void 0,function*(){const n=this.localStorage.getItem(this.storageKeyForSecretKey(e,r));return n?z_.KeyPair.fromString(n):null})}removeKey(e,r){return fn(this,void 0,void 0,function*(){this.localStorage.removeItem(this.storageKeyForSecretKey(e,r))})}clear(){return fn(this,void 0,void 0,function*(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)})}getNetworks(){return fn(this,void 0,void 0,function*(){const e=new Set;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const n=r.substring(this.prefix.length).split(":");e.add(n[1])}return Array.from(e.values())})}getAccounts(e){return fn(this,void 0,void 0,function*(){const r=new Array;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const s=n.substring(this.prefix.length).split(":");s[1]===e&&r.push(s[0])}return r})}storageKeyForSecretKey(e,r){return`${this.prefix}${r}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}ua.BrowserLocalStorageKeyStore=W_;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserLocalStorageKeyStore=void 0;var e=ua;Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return e.BrowserLocalStorageKeyStore}})})(hp);var wn={},$n={},Z={},rn={},da={};Object.defineProperty(da,"__esModule",{value:!0});da.Assignable=void 0;class V_{constructor(e){Object.keys(e).map(r=>{this[r]=e[r]})}}da.Assignable=V_;var ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.ErrorContext=ar.TypedError=ar.ArgumentTypeError=ar.PositionalArgsError=void 0;class G_ extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}ar.PositionalArgsError=G_;class J_ extends Error{constructor(e,r,n){super(`Expected ${r} for '${e}' argument, but got '${JSON.stringify(n)}'`)}}ar.ArgumentTypeError=J_;class X_ extends Error{constructor(e,r,n){super(e),this.type=r||"UntypedError",this.context=n}}ar.TypedError=X_;class Z_{constructor(e){this.transactionHash=e}}ar.ErrorContext=Z_;var fp={},pp={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.IdType=void 0,function(e){e.Transaction="transaction",e.Receipt="receipt"}(t.IdType||(t.IdType={}))})(pp);var yp={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(e){e.Unknown="Unknown",e.Pending="Pending",e.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(e){e.NotStarted="NotStarted",e.Started="Started",e.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={}))})(yp);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=t.IdType=void 0;var e=pp;Object.defineProperty(t,"IdType",{enumerable:!0,get:function(){return e.IdType}});var r=yp;Object.defineProperty(t,"ExecutionStatusBasic",{enumerable:!0,get:function(){return r.ExecutionStatusBasic}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return r.FinalExecutionStatusBasic}})})(fp);(function(t){var e=z&&z.__createBinding||(Object.create?function(n,s,i,a){a===void 0&&(a=i);var o=Object.getOwnPropertyDescriptor(s,i);(!o||("get"in o?!s.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,a,o)}:function(n,s,i,a){a===void 0&&(a=i),n[a]=s[i]}),r=z&&z.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(da,t),r(ar,t),r(fp,t)})(rn);Object.defineProperty(Z,"__esModule",{value:!0});Z.Action=Z.SignedDelegate=Z.DeleteAccount=Z.DeleteKey=Z.AddKey=Z.Stake=Z.Transfer=Z.FunctionCall=Z.DeployContract=Z.CreateAccount=Z.IAction=Z.AccessKey=Z.AccessKeyPermission=Z.FullAccessPermission=Z.FunctionCallPermission=void 0;const fa=rn;class gp{constructor(e){if(Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(r=>{this[r]=e[r],this.enum=r})}}class Y_ extends fa.Assignable{}Z.FunctionCallPermission=Y_;class Q_ extends fa.Assignable{}Z.FullAccessPermission=Q_;class eE extends gp{}Z.AccessKeyPermission=eE;class tE extends fa.Assignable{}Z.AccessKey=tE;class dr extends fa.Assignable{}Z.IAction=dr;class rE extends dr{}Z.CreateAccount=rE;class nE extends dr{}Z.DeployContract=nE;class sE extends dr{}Z.FunctionCall=sE;class iE extends dr{}Z.Transfer=iE;class aE extends dr{}Z.Stake=aE;class oE extends dr{}Z.AddKey=oE;class cE extends dr{}Z.DeleteKey=cE;class uE extends dr{}Z.DeleteAccount=uE;class lE extends dr{}Z.SignedDelegate=lE;class hE extends gp{}Z.Action=hE;Object.defineProperty($n,"__esModule",{value:!0});$n.actionCreators=$n.stringifyJsonOrBytes=void 0;const he=Z;function dE(){return new he.AccessKey({permission:new he.AccessKeyPermission({fullAccess:new he.FullAccessPermission({})})})}function fE(t,e,r){return new he.AccessKey({permission:new he.AccessKeyPermission({functionCall:new he.FunctionCallPermission({receiverId:t,allowance:r,methodNames:e})})})}function pE(){return new he.Action({createAccount:new he.CreateAccount({})})}function yE(t){return new he.Action({deployContract:new he.DeployContract({code:t})})}function mp(t){return t.byteLength!==void 0&&t.byteLength===t.length?t:Buffer.from(JSON.stringify(t))}$n.stringifyJsonOrBytes=mp;function gE(t,e,r,n,s=mp,i=!1){return i?new he.Action({functionCall:new he.FunctionCall({methodName:t,args:e,gas:r,deposit:n})}):new he.Action({functionCall:new he.FunctionCall({methodName:t,args:s(e),gas:r,deposit:n})})}function mE(t){return new he.Action({transfer:new he.Transfer({deposit:t})})}function wE(t,e){return new he.Action({stake:new he.Stake({stake:t,publicKey:e})})}function bE(t,e){return new he.Action({addKey:new he.AddKey({publicKey:t,accessKey:e})})}function vE(t){return new he.Action({deleteKey:new he.DeleteKey({publicKey:t})})}function _E(t){return new he.Action({deleteAccount:new he.DeleteAccount({beneficiaryId:t})})}function EE({delegateAction:t,signature:e}){return new he.Action({signedDelegate:new he.SignedDelegate({delegateAction:t,signature:e})})}$n.actionCreators={addKey:bE,createAccount:pE,deleteAccount:_E,deleteKey:vE,deployContract:yE,fullAccessKey:dE,functionCall:gE,functionCallAccessKey:fE,signedDelegate:EE,stake:wE,transfer:mE};var Hs={},pa={},wp={},ya={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyType=void 0,function(e){e[e.ED25519=0]="ED25519"}(t.KeyType||(t.KeyType={}))})(ya);var ga={},Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.KeyPairBase=void 0;class SE{}Fs.KeyPairBase=SE;var zs={},Qe={},ai=Mc.Buffer;function AE(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var a=t.length,o=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function p(T){if((Array.isArray(T)||T instanceof Uint8Array)&&(T=ai.from(T)),!ai.isBuffer(T))throw new TypeError("Expected Buffer");if(T.length===0)return"";for(var m=0,E=0,k=0,$=T.length;k!==$&&T[k]===0;)k++,m++;for(var I=($-k)*f+1>>>0,U=new Uint8Array(I);k!==$;){for(var B=T[k],P=0,D=I-1;(B!==0||P<E)&&D!==-1;D--,P++)B+=256*U[D]>>>0,U[D]=B%a>>>0,B=B/a>>>0;if(B!==0)throw new Error("Non-zero carry");E=P,k++}for(var N=I-E;N!==I&&U[N]===0;)N++;for(var L=o.repeat(m);N<I;++N)L+=t.charAt(U[N]);return L}function d(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return ai.alloc(0);for(var m=0,E=0,k=0;T[m]===o;)E++,m++;for(var $=(T.length-m)*u+1>>>0,I=new Uint8Array($);T[m];){var U=e[T.charCodeAt(m)];if(U===255)return;for(var B=0,P=$-1;(U!==0||B<k)&&P!==-1;P--,B++)U+=a*I[P]>>>0,I[P]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");k=B,m++}for(var D=$-k;D!==$&&I[D]===0;)D++;var N=ai.allocUnsafe(E+($-D));N.fill(0,0,E);for(var L=E;D!==$;)N[L++]=I[D++];return N}function A(T){var m=d(T);if(m)return m;throw new Error("Non-base"+a+" character")}return{encode:p,decodeUnsafe:d,decode:A}}var TE=AE,xE=TE,RE="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",kE=xE(RE),BE=z&&z.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),PE=z&&z.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fr=z&&z.__decorate||function(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(i=(s<3?a(i):s>3?a(e,r,i):a(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i},UE=z&&z.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&BE(e,t,r);return PE(e,t),e},bp=z&&z.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.deserializeUnchecked=Qe.deserialize=Qe.serialize=Qe.BinaryReader=Qe.BinaryWriter=Qe.BorshError=Qe.baseDecode=Qe.baseEncode=void 0;const Mr=bp(Vh),vp=bp(kE),$E=UE(Gh),ME=typeof TextDecoder!="function"?$E.TextDecoder:TextDecoder,OE=new ME("utf-8",{fatal:!0});function CE(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),vp.default.encode(Buffer.from(t))}Qe.baseEncode=CE;function IE(t){return Buffer.from(vp.default.decode(t))}Qe.baseDecode=IE;const Co=1024;class gt extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Qe.BorshError=gt;class _p{constructor(){this.buf=Buffer.alloc(Co),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Co)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Mr.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Mr.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Mr.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Mr.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(Co)]),this.length+=e.length}writeString(e){this.maybeResize();const r=Buffer.from(e,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,r){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}}Qe.BinaryWriter=_p;function pr(t,e,r){const n=r.value;r.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const a=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new gt("Reached the end of buffer when deserializing")}throw i}}}class Rt{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Mr.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Mr.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Mr.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Mr.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new gt(`Expected buffer length ${e} isn't within bounds`);const r=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,r}readString(){const e=this.readU32(),r=this.readBuffer(e);try{return OE.decode(r)}catch(n){throw new gt(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const r=this.readU32(),n=Array();for(let s=0;s<r;++s)n.push(e());return n}}fr([pr],Rt.prototype,"readU8",null);fr([pr],Rt.prototype,"readU16",null);fr([pr],Rt.prototype,"readU32",null);fr([pr],Rt.prototype,"readU64",null);fr([pr],Rt.prototype,"readU128",null);fr([pr],Rt.prototype,"readU256",null);fr([pr],Rt.prototype,"readU512",null);fr([pr],Rt.prototype,"readString",null);fr([pr],Rt.prototype,"readFixedArray",null);fr([pr],Rt.prototype,"readArray",null);Qe.BinaryReader=Rt;function Ep(t){return t.charAt(0).toUpperCase()+t.slice(1)}function zr(t,e,r,n,s){try{if(typeof n=="string")s[`write${Ep(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new gt(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);s.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new gt(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let i=0;i<n[1];i++)zr(t,null,r[i],n[0],s)}else s.writeArray(r,i=>{zr(t,e,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?s.writeU8(0):(s.writeU8(1),zr(t,e,r,n.type,s));break}case"map":{s.writeU32(r.size),r.forEach((i,a)=>{zr(t,e,a,n.key,s),zr(t,e,i,n.value,s)});break}default:throw new gt(`FieldType ${n} unrecognized`)}else Sp(t,r,s)}catch(i){throw i instanceof gt&&i.addToFieldPath(e),i}}function Sp(t,e,r){if(typeof e.borshSerialize=="function"){e.borshSerialize(r);return}const n=t.get(e.constructor);if(!n)throw new gt(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{zr(t,s,e[s],i,r)});else if(n.kind==="enum"){const s=e[n.field];for(let i=0;i<n.values.length;++i){const[a,o]=n.values[i];if(a===s){r.writeU8(i),zr(t,a,e[a],o,r);break}}}else throw new gt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function DE(t,e,r=_p){const n=new r;return Sp(t,e,n),n.toArray()}Qe.serialize=DE;function Kr(t,e,r,n){try{if(typeof r=="string")return n[`read${Ep(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){const s=[];for(let i=0;i<r[1];i++)s.push(Kr(t,null,r[0],n));return s}else return n.readArray(()=>Kr(t,e,r[0],n))}if(r.kind==="option")return n.readU8()?Kr(t,e,r.type,n):void 0;if(r.kind==="map"){let s=new Map;const i=n.readU32();for(let a=0;a<i;a++){const o=Kr(t,e,r.key,n),u=Kr(t,e,r.value,n);s.set(o,u)}return s}return gu(t,r,n)}catch(s){throw s instanceof gt&&s.addToFieldPath(e),s}}function gu(t,e,r){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(r);const n=t.get(e);if(!n)throw new gt(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,a]of t.get(e).fields)s[i]=Kr(t,i,a,r);return new e(s)}if(n.kind==="enum"){const s=r.readU8();if(s>=n.values.length)throw new gt(`Enum index: ${s} is out of range`);const[i,a]=n.values[s],o=Kr(t,i,a,r);return new e({[i]:o})}throw new gt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function NE(t,e,r,n=Rt){const s=new n(r),i=gu(t,e,s);if(s.offset<r.length)throw new gt(`Unexpected ${r.length-s.offset} bytes after deserialized data`);return i}Qe.deserialize=NE;function LE(t,e,r,n=Rt){const s=new n(r);return gu(t,e,s)}Qe.deserializeUnchecked=LE;var Ks={},qE=z&&z.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.PublicKey=void 0;const HE=rn,Io=Qe,FE=qE(Hi),Ci=ya;function zE(t){switch(t){case Ci.KeyType.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${t}`)}}function KE(t){switch(t.toLowerCase()){case"ed25519":return Ci.KeyType.ED25519;default:throw new Error(`Unknown key type ${t}`)}}class ys extends HE.Assignable{static from(e){return typeof e=="string"?ys.fromString(e):e}static fromString(e){const r=e.split(":");if(r.length===1)return new ys({keyType:Ci.KeyType.ED25519,data:(0,Io.baseDecode)(r[0])});if(r.length===2)return new ys({keyType:KE(r[0]),data:(0,Io.baseDecode)(r[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${zE(this.keyType)}:${(0,Io.baseEncode)(this.data)}`}verify(e,r){switch(this.keyType){case Ci.KeyType.ED25519:return FE.default.sign.detached.verify(e,r,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}Ks.PublicKey=ys;var jE=z&&z.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zs,"__esModule",{value:!0});zs.KeyPairEd25519=void 0;const Do=Qe,No=jE(Hi),WE=ya,VE=Fs,GE=Ks;class mu extends VE.KeyPairBase{constructor(e){super();const r=No.default.sign.keyPair.fromSecretKey((0,Do.baseDecode)(e));this.publicKey=new GE.PublicKey({keyType:WE.KeyType.ED25519,data:r.publicKey}),this.secretKey=e}static fromRandom(){const e=No.default.sign.keyPair();return new mu((0,Do.baseEncode)(e.secretKey))}sign(e){return{signature:No.default.sign.detached(e,(0,Do.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(e,r){return this.publicKey.verify(e,r)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}zs.KeyPairEd25519=mu;Object.defineProperty(ga,"__esModule",{value:!0});ga.KeyPair=void 0;const JE=Fs,Lo=zs;class XE extends JE.KeyPairBase{static fromRandom(e){switch(e.toUpperCase()){case"ED25519":return Lo.KeyPairEd25519.fromRandom();default:throw new Error(`Unknown curve ${e}`)}}static fromString(e){const r=e.split(":");if(r.length===1)return new Lo.KeyPairEd25519(r[0]);if(r.length===2)switch(r[0].toUpperCase()){case"ED25519":return new Lo.KeyPairEd25519(r[1]);default:throw new Error(`Unknown curve: ${r[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}ga.KeyPair=XE;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.KeyPairEd25519=t.KeyPair=t.KeyType=void 0;var e=ya;Object.defineProperty(t,"KeyType",{enumerable:!0,get:function(){return e.KeyType}});var r=ga;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return r.KeyPair}});var n=zs;Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return n.KeyPairEd25519}});var s=Ks;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return s.PublicKey}})})(wp);var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.buildDelegateAction=Xr.DelegateAction=void 0;const ZE=rn;class Ap extends ZE.Assignable{}Xr.DelegateAction=Ap;function YE({actions:t,maxBlockHeight:e,nonce:r,publicKey:n,receiverId:s,senderId:i}){return new Ap({senderId:i,receiverId:s,actions:t,nonce:r,maxBlockHeight:e,publicKey:n})}Xr.buildDelegateAction=YE;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.DelegateActionPrefix=void 0;const QE=rn,e1=Math.pow(2,30),t1={MetaTransactions:366};class r1 extends QE.Assignable{}class n1 extends r1{constructor(e){super({prefix:e1+e})}}class s1 extends n1{constructor(){super(t1.MetaTransactions)}}ma.DelegateActionPrefix=s1;var jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.Signature=void 0;const i1=rn;class a1 extends i1.Assignable{}jn.Signature=a1;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SCHEMA=t.SignedTransaction=t.Transaction=t.decodeSignedTransaction=t.decodeTransaction=t.encodeTransaction=t.encodeSignedDelegate=t.encodeDelegateAction=void 0;const e=wp,r=rn,n=Qe,s=Z,i=Xr,a=ma,o=jn;function u(E){return new Uint8Array([...(0,n.serialize)(t.SCHEMA,new a.DelegateActionPrefix),...(0,n.serialize)(t.SCHEMA,E)])}t.encodeDelegateAction=u;function f(E){return(0,n.serialize)(t.SCHEMA,E)}t.encodeSignedDelegate=f;function p(E){return(0,n.serialize)(t.SCHEMA,E)}t.encodeTransaction=p;function d(E){return(0,n.deserialize)(t.SCHEMA,T,E)}t.decodeTransaction=d;function A(E){return(0,n.deserialize)(t.SCHEMA,m,E)}t.decodeSignedTransaction=A;class T extends r.Assignable{encode(){return p(this)}static decode(k){return d(k)}}t.Transaction=T;class m extends r.Assignable{encode(){return p(this)}static decode(k){return A(k)}}t.SignedTransaction=m,t.SCHEMA=new Map([[o.Signature,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[m,{kind:"struct",fields:[["transaction",T],["signature",o.Signature]]}],[T,{kind:"struct",fields:[["signerId","string"],["publicKey",e.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[s.Action]]]}],[e.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[s.AccessKey,{kind:"struct",fields:[["nonce","u64"],["permission",s.AccessKeyPermission]]}],[s.AccessKeyPermission,{kind:"enum",field:"enum",values:[["functionCall",s.FunctionCallPermission],["fullAccess",s.FullAccessPermission]]}],[s.FunctionCallPermission,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[s.FullAccessPermission,{kind:"struct",fields:[]}],[s.Action,{kind:"enum",field:"enum",values:[["createAccount",s.CreateAccount],["deployContract",s.DeployContract],["functionCall",s.FunctionCall],["transfer",s.Transfer],["stake",s.Stake],["addKey",s.AddKey],["deleteKey",s.DeleteKey],["deleteAccount",s.DeleteAccount],["signedDelegate",s.SignedDelegate]]}],[s.CreateAccount,{kind:"struct",fields:[]}],[s.DeployContract,{kind:"struct",fields:[["code",["u8"]]]}],[s.FunctionCall,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[s.Transfer,{kind:"struct",fields:[["deposit","u128"]]}],[s.Stake,{kind:"struct",fields:[["stake","u128"],["publicKey",e.PublicKey]]}],[s.AddKey,{kind:"struct",fields:[["publicKey",e.PublicKey],["accessKey",s.AccessKey]]}],[s.DeleteKey,{kind:"struct",fields:[["publicKey",e.PublicKey]]}],[s.DeleteAccount,{kind:"struct",fields:[["beneficiaryId","string"]]}],[i.DelegateAction,{kind:"struct",fields:[["senderId","string"],["receiverId","string"],["actions",[s.Action]],["nonce","u64"],["maxBlockHeight","u64"],["publicKey",e.PublicKey]]}],[a.DelegateActionPrefix,{kind:"struct",fields:[["prefix","u32"]]}],[s.SignedDelegate,{kind:"struct",fields:[["delegateAction",i.DelegateAction],["signature",o.Signature]]}]])})(pa);Object.defineProperty(Hs,"__esModule",{value:!0});Hs.createTransaction=void 0;const o1=pa;function c1(t,e,r,n,s,i){return new o1.Transaction({signerId:t,publicKey:e,nonce:n,receiverId:r,actions:s,blockHash:i})}Hs.createTransaction=c1;var Mn={},wu=z&&z.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(p){try{f(n.next(p))}catch(d){a(d)}}function u(p){try{f(n.throw(p))}catch(d){a(d)}}function f(p){p.done?i(p.value):s(p.value).then(o,u)}f((n=n.apply(t,e||[])).next())})},u1=z&&z.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.signDelegateAction=Mn.signTransaction=void 0;const Tp=u1(Jh),l1=Z,h1=Hs,Ii=pa,xp=jn;function Ql(t,e,r,n){return wu(this,void 0,void 0,function*(){const s=(0,Ii.encodeTransaction)(t),i=new Uint8Array(Tp.default.sha256.array(s)),a=yield e.signMessage(s,r,n),o=new Ii.SignedTransaction({transaction:t,signature:new xp.Signature({keyType:t.publicKey.keyType,data:a.signature})});return[i,o]})}function d1(...t){return wu(this,void 0,void 0,function*(){if(t[0].constructor===Ii.Transaction){const[e,r,n,s]=t;return Ql(e,r,n,s)}else{const[e,r,n,s,i,a,o]=t,u=yield i.getPublicKey(a,o),f=(0,h1.createTransaction)(a,u,e,r,n,s);return Ql(f,i,a,o)}})}Mn.signTransaction=d1;function f1({delegateAction:t,signer:e}){return wu(this,void 0,void 0,function*(){const r=(0,Ii.encodeDelegateAction)(t),n=yield e.sign(r),s=new l1.SignedDelegate({delegateAction:t,signature:new xp.Signature({keyType:t.publicKey.keyType,data:n})});return{hash:new Uint8Array(Tp.default.sha256.array(r)),signedDelegateAction:s}})}Mn.signDelegateAction=f1;(function(t){var e=z&&z.__createBinding||(Object.create?function(n,s,i,a){a===void 0&&(a=i);var o=Object.getOwnPropertyDescriptor(s,i);(!o||("get"in o?!s.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,a,o)}:function(n,s,i,a){a===void 0&&(a=i),n[a]=s[i]}),r=z&&z.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r($n,t),r(Z,t),r(Hs,t),r(Xr,t),r(pa,t),r(Mn,t),r(jn,t)})(wn);class p1 extends na{constructor(r){super(r);S(this,"keyPair");S(this,"near");this.near=this.wallet._near,this.base=["yoctoNEAR",1e25]}async ready(){if(!this.wallet.isSignedIn())throw new Error("Wallet has not been signed in!");const r=new hp.BrowserLocalStorageKeyStore,n=this.wallet.account();if(this.keyPair=await r.getKey(this.wallet._networkId,n.accountId),!this.keyPair){this.keyPair=ia.KeyPair.fromRandom("ed25519");const s=this.keyPair.getPublicKey().toString();await r.setKey(this.wallet._networkId,n.accountId,this.keyPair),await n.addKey(s)}this._address=await this.wallet.getAccountId(),this.providerInstance=this.wallet._near.connection.provider}async getTx(r){const n=await this.providerInstance,[s,i]=r.split(":"),a=await n.txStatusReceipts(cs.decode(i),s),o=await n.block(a.transaction_outcome.block_hash),u=(await n.block({finality:"final"})).header.height;if(a.receipts_outcome[0].outcome.status.SuccessValue!=="")throw new Error("Transaction failed!");const f=a.receipts[0].receipt.Action.actions[0].Transfer.deposit??0;return{from:s,to:a.transaction.receiver_id,amount:new j(f),blockHeight:new j(o.header.height),pending:!1,confirmed:u-o.header.height>=this.minConfirm}}ownerToAddress(r){const n=typeof r=="string"?r:cs.encode(r);return Buffer.from(cs.decode(n.replace("ed25519:",""))).toString("hex")}async sign(r){return this.getSigner().sign(r)}getSigner(){return new _c(this.keyPair.secretKey)}async verify(r,n,s){return _c.verify(r,n,s)}async getCurrentHeight(){const r=await this.providerInstance.status();return new j(r.sync_info.latest_block_height)}async getFee(r,n){const s=(await this.providerInstance.block({finality:"final"})).header.height,i=await this.providerInstance.gasPrice(s);return new j(i.gas_price).multipliedBy(45e10)}async sendTx(r){const n=await this.providerInstance.sendTransaction(r);return`${this.address}:${n.transaction.hash}`}async createTx(r,n,s){if(!this.address)throw new Error("Address is undefined - you might be missing a wallet, or have not run Irys.ready()");const i=await this.providerInstance.query({request_type:"view_access_key",finality:"final",account_id:this.address,public_key:this.keyPair.getPublicKey().toString()}),a=++i.nonce,o=Buffer.from(cs.decode(i.block_hash)),u=[wn.actionCreators.transfer(new Kh(new j(r).toString()))],f=wn.createTransaction(this.address,this.keyPair.getPublicKey(),n,a,u,o),p=yg(wn.SCHEMA,f),d=new Uint8Array(Jh.sha256.array(p)),A=this.keyPair.sign(d);return{tx:new wn.SignedTransaction({transaction:f,signature:new wn.Signature({keyType:f.publicKey.keyType,data:A.signature})}),txId:void 0}}async getPublicKey(){return Buffer.from(this.keyPair.getPublicKey().data)}}class y1 extends na{constructor(r){super(r);S(this,"signer");S(this,"minConfirm",1);this.base=["lamports",1e9]}async getProvider(){return this.providerInstance||(this.providerInstance=new gg(this.providerUrl,{confirmTransactionInitialTimeout:6e4,commitment:"confirmed"})),this.providerInstance}async getTx(r){const n=await this.getProvider(),s=await n.getTransaction(r,{commitment:"confirmed"});if(!s)throw new Error("Confirmed tx not found");const i=await n.getSlot("confirmed");if(!s.meta)throw new Error(`Unable to resolve transaction ${r}`);const a=new j(s.meta.postBalances[1]).minus(new j(s.meta.preBalances[1]));return{from:s.transaction.message.accountKeys[0].toBase58(),to:s.transaction.message.accountKeys[1].toBase58(),amount:a,blockHeight:new j(s.slot),pending:!1,confirmed:i-s.slot>=1}}ownerToAddress(r){return typeof r=="string"&&(r=Buffer.from(r)),cs.encode(r)}async sign(r){return await(await this.getSigner()).sign(r)}getSigner(){return this.signer||(this.signer=new Bi(this.wallet)),this.signer}verify(r,n,s){return Bi.verify(r,n,s)}async getCurrentHeight(){return new j((await(await this.getProvider()).getEpochInfo()).blockHeight??0)}async getFee(r,n){return new j(5e3)}async sendTx(r){return await this.wallet.sendTransaction(r,await this.getProvider(),{skipPreflight:!0})}async createTx(r,n,s){const i=new cl(await this.getPublicKey()),a=await Ir(async u=>{var f;try{return await(await this.getProvider()).getRecentBlockhash()}catch(p){throw(f=p.message)!=null&&f.includes("blockhash")?p:(u(p),new Error("Unreachable"))}},{retries:3,minTimeout:1e3}),o=new mg({recentBlockhash:a.blockhash,feePayer:i});return o.add(wg.transfer({fromPubkey:i,toPubkey:new cl(n),lamports:+new j(r).toNumber()})),{tx:o,txId:void 0}}async getPublicKey(){if(!this.wallet.publicKey)throw new Error("Wallet.publicKey is undefined");return this.wallet.publicKey.toBuffer()}}class g1 extends sa{constructor(r){super(r);S(this,"contractInstance");S(this,"contractAddress");this.contractAddress=r.contractAddress}async getContract(){return this.contractInstance||(this.contractInstance=new bg(this.contractAddress,m1,this.w3signer),this.base=["wei",Math.pow(10,await this.contractInstance.decimals())]),this.contractInstance}async getTx(r){const n=await this.providerInstance.getTransaction(r);if(!n)throw new Error("Tx doesn't exist");if(n.data.length!==138||n.data.slice(2,10)!=="a9059cbb")throw new Error("Tx isn't a ERC20 transfer");const s=`0x${n.data.slice(34,74)}`,i=new j(n.data.slice(74),16);return{from:n.from,to:s,blockHeight:n.blockNumber?new j(n.blockNumber):void 0,amount:i,pending:!n.blockNumber,confirmed:n.confirmations>=this.minConfirm}}async getFee(r,n){const s="0x"+new j(r).toString(16),i=await this.getContract(),a=await this.providerInstance.getGasPrice(),o=await i.estimateGas.transfer(n,s),u=new j(a.mul(o).toString()),[f]=await this.getGas(),p=f.multipliedBy(u),d=new j(await this.price());return new j(p).dividedToIntegerBy(d)}async createTx(r,n,s){const i=await this.getContract(),a="0x"+new j(r).toString(16),o=await i.populateTransaction.transfer(n,a);if(o.gasPrice=await this.providerInstance.getGasPrice(),o.gasLimit=await i.estimateGas.transfer(n,a),o.chainId=(await this.providerInstance.getNetwork()).chainId,!this.address)throw new Error("Address is undefined - you might be missing a wallet, or have not run Irys.ready()");return o.nonce=await this.providerInstance.getTransactionCount(this.address),{txId:void 0,tx:o}}async getGas(){return[new j(await ep("ETH")),1e18]}}const m1=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];var Et={},ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.output=ot.exists=ot.hash=ot.bytes=ot.bool=ot.number=void 0;function Di(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}ot.number=Di;function Rp(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}ot.bool=Rp;function bu(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}ot.bytes=bu;function kp(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Di(t.outputLen),Di(t.blockLen)}ot.hash=kp;function Bp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}ot.exists=Bp;function Pp(t,e){bu(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}ot.output=Pp;const w1={number:Di,bool:Rp,bytes:bu,hash:kp,exists:Bp,output:Pp};ot.default=w1;var On={},Up={},js={},wa={};Object.defineProperty(wa,"__esModule",{value:!0});wa.crypto=void 0;wa.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const e=wa,r=B=>new Uint8Array(B.buffer,B.byteOffset,B.byteLength);t.u8=r;const n=B=>new Uint32Array(B.buffer,B.byteOffset,Math.floor(B.byteLength/4));t.u32=n;const s=B=>new DataView(B.buffer,B.byteOffset,B.byteLength);t.createView=s;const i=(B,P)=>B<<32-P|B>>>P;if(t.rotr=i,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const a=Array.from({length:256},(B,P)=>P.toString(16).padStart(2,"0"));function o(B){if(!(B instanceof Uint8Array))throw new Error("Uint8Array expected");let P="";for(let D=0;D<B.length;D++)P+=a[B[D]];return P}t.bytesToHex=o;function u(B){if(typeof B!="string")throw new TypeError("hexToBytes: expected string, got "+typeof B);if(B.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const P=new Uint8Array(B.length/2);for(let D=0;D<P.length;D++){const N=D*2,L=B.slice(N,N+2),K=Number.parseInt(L,16);if(Number.isNaN(K)||K<0)throw new Error("Invalid byte sequence");P[D]=K}return P}t.hexToBytes=u;const f=async()=>{};t.nextTick=f;async function p(B,P,D){let N=Date.now();for(let L=0;L<B;L++){D(L);const K=Date.now()-N;K>=0&&K<P||(await(0,t.nextTick)(),N+=K)}}t.asyncLoop=p;function d(B){if(typeof B!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof B}`);return new TextEncoder().encode(B)}t.utf8ToBytes=d;function A(B){if(typeof B=="string"&&(B=d(B)),!(B instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof B})`);return B}t.toBytes=A;function T(...B){if(!B.every(N=>N instanceof Uint8Array))throw new Error("Uint8Array list expected");if(B.length===1)return B[0];const P=B.reduce((N,L)=>N+L.length,0),D=new Uint8Array(P);for(let N=0,L=0;N<B.length;N++){const K=B[N];D.set(K,L),L+=K.length}return D}t.concatBytes=T;class m{clone(){return this._cloneInto()}}t.Hash=m;const E=B=>Object.prototype.toString.call(B)==="[object Object]"&&B.constructor===Object;function k(B,P){if(P!==void 0&&(typeof P!="object"||!E(P)))throw new TypeError("Options should be object or undefined");return Object.assign(B,P)}t.checkOpts=k;function $(B){const P=N=>B().update(A(N)).digest(),D=B();return P.outputLen=D.outputLen,P.blockLen=D.blockLen,P.create=()=>B(),P}t.wrapConstructor=$;function I(B){const P=(N,L)=>B(L).update(A(N)).digest(),D=B({});return P.outputLen=D.outputLen,P.blockLen=D.blockLen,P.create=N=>B(N),P}t.wrapConstructorWithOpts=I;function U(B=32){if(e.crypto.web)return e.crypto.web.getRandomValues(new Uint8Array(B));if(e.crypto.node)return new Uint8Array(e.crypto.node.randomBytes(B).buffer);throw new Error("The environment doesn't have randomBytes function")}t.randomBytes=U})(js);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=void 0;const e=ot,r=js;class n extends r.Hash{constructor(a,o){super(),this.finished=!1,this.destroyed=!1,e.default.hash(a);const u=(0,r.toBytes)(o);if(this.iHash=a.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const f=this.blockLen,p=new Uint8Array(f);p.set(u.length>f?a.create().update(u).digest():u);for(let d=0;d<p.length;d++)p[d]^=54;this.iHash.update(p),this.oHash=a.create();for(let d=0;d<p.length;d++)p[d]^=106;this.oHash.update(p),p.fill(0)}update(a){return e.default.exists(this),this.iHash.update(a),this}digestInto(a){e.default.exists(this),e.default.bytes(a,this.outputLen),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){const a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||(a=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:u,finished:f,destroyed:p,blockLen:d,outputLen:A}=this;return a=a,a.finished=f,a.destroyed=p,a.blockLen=d,a.outputLen=A,a.oHash=o._cloneInto(a.oHash),a.iHash=u._cloneInto(a.iHash),a}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s=(i,a,o)=>new n(i,a).update(o).digest();t.hmac=s,t.hmac.create=(i,a)=>new n(i,a)})(Up);Object.defineProperty(On,"__esModule",{value:!0});On.pbkdf2Async=On.pbkdf2=void 0;const oi=ot,b1=Up,Sn=js;function $p(t,e,r,n){oi.default.hash(t);const s=(0,Sn.checkOpts)({dkLen:32,asyncTick:10},n),{c:i,dkLen:a,asyncTick:o}=s;if(oi.default.number(i),oi.default.number(a),oi.default.number(o),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const u=(0,Sn.toBytes)(e),f=(0,Sn.toBytes)(r),p=new Uint8Array(a),d=b1.hmac.create(t,u),A=d._cloneInto().update(f);return{c:i,dkLen:a,asyncTick:o,DK:p,PRF:d,PRFSalt:A}}function Mp(t,e,r,n,s){return t.destroy(),e.destroy(),n&&n.destroy(),s.fill(0),r}function v1(t,e,r,n){const{c:s,dkLen:i,DK:a,PRF:o,PRFSalt:u}=$p(t,e,r,n);let f;const p=new Uint8Array(4),d=(0,Sn.createView)(p),A=new Uint8Array(o.outputLen);for(let T=1,m=0;m<i;T++,m+=o.outputLen){const E=a.subarray(m,m+o.outputLen);d.setInt32(0,T,!1),(f=u._cloneInto(f)).update(p).digestInto(A),E.set(A.subarray(0,E.length));for(let k=1;k<s;k++){o._cloneInto(f).update(A).digestInto(A);for(let $=0;$<E.length;$++)E[$]^=A[$]}}return Mp(o,u,a,f,A)}On.pbkdf2=v1;async function _1(t,e,r,n){const{c:s,dkLen:i,asyncTick:a,DK:o,PRF:u,PRFSalt:f}=$p(t,e,r,n);let p;const d=new Uint8Array(4),A=(0,Sn.createView)(d),T=new Uint8Array(u.outputLen);for(let m=1,E=0;E<i;m++,E+=u.outputLen){const k=o.subarray(E,E+u.outputLen);A.setInt32(0,m,!1),(p=f._cloneInto(p)).update(d).digestInto(T),k.set(T.subarray(0,k.length)),await(0,Sn.asyncLoop)(s-1,a,$=>{u._cloneInto(p).update(T).digestInto(T);for(let I=0;I<k.length;I++)k[I]^=T[I]})}return Mp(u,f,o,p,T)}On.pbkdf2Async=_1;var ba={},va={};Object.defineProperty(va,"__esModule",{value:!0});va.SHA2=void 0;const qo=ot,ss=js;function E1(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),a=Number(r>>s&i),o=Number(r&i),u=n?4:0,f=n?0:4;t.setUint32(e+u,a,n),t.setUint32(e+f,o,n)}let S1=class extends ss.Hash{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,ss.createView)(this.buffer)}update(e){qo.default.exists(this);const{view:r,buffer:n,blockLen:s}=this;e=(0,ss.toBytes)(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const u=(0,ss.createView)(e);for(;s<=i-a;a+=s)this.process(u,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){qo.default.exists(this),qo.default.output(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let u=a;u<s;u++)r[u]=0;E1(n,s-8,BigInt(this.length*8),i),this.process(n,0);const o=(0,ss.createView)(e);this.get().forEach((u,f)=>o.setUint32(4*f,u,i))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:a,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=a,s%r&&e.buffer.set(n),e}};va.SHA2=S1;Object.defineProperty(ba,"__esModule",{value:!0});ba.sha256=void 0;const A1=va,Vt=js,T1=(t,e,r)=>t&e^~t&r,x1=(t,e,r)=>t&e^t&r^e&r,R1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ar=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Tr=new Uint32Array(64);class k1 extends A1.SHA2{constructor(){super(64,32,8,!1),this.A=Ar[0]|0,this.B=Ar[1]|0,this.C=Ar[2]|0,this.D=Ar[3]|0,this.E=Ar[4]|0,this.F=Ar[5]|0,this.G=Ar[6]|0,this.H=Ar[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:a,G:o,H:u}=this;return[e,r,n,s,i,a,o,u]}set(e,r,n,s,i,a,o,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=u|0}process(e,r){for(let d=0;d<16;d++,r+=4)Tr[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const A=Tr[d-15],T=Tr[d-2],m=(0,Vt.rotr)(A,7)^(0,Vt.rotr)(A,18)^A>>>3,E=(0,Vt.rotr)(T,17)^(0,Vt.rotr)(T,19)^T>>>10;Tr[d]=E+Tr[d-7]+m+Tr[d-16]|0}let{A:n,B:s,C:i,D:a,E:o,F:u,G:f,H:p}=this;for(let d=0;d<64;d++){const A=(0,Vt.rotr)(o,6)^(0,Vt.rotr)(o,11)^(0,Vt.rotr)(o,25),T=p+A+T1(o,u,f)+R1[d]+Tr[d]|0,E=((0,Vt.rotr)(n,2)^(0,Vt.rotr)(n,13)^(0,Vt.rotr)(n,22))+x1(n,s,i)|0;p=f,f=u,u=o,o=a+T|0,a=i,i=s,s=n,n=T+E|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,u=u+this.F|0,f=f+this.G|0,p=p+this.H|0,this.set(n,s,i,a,o,u,f,p)}roundClean(){Tr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}ba.sha256=(0,Vt.wrapConstructor)(()=>new k1);function Tc(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function B1(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function Op(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function P1(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Tc(t.outputLen),Tc(t.blockLen)}function U1(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function $1(t,e){Op(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const St={number:Tc,bool:B1,bytes:Op,hash:P1,exists:U1,output:$1},eh={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const M1=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),Cp=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),vi=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),O1=(t,e)=>t<<32-e|t>>>e,Ip=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ip)throw new Error("Non little-endian hardware is not supported");const C1=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function vu(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=C1[t[r]];return e}function _u(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=r*2,s=t.slice(n,n+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[r]=i}return e}const Dp=async()=>{};async function I1(t,e,r){let n=Date.now();for(let s=0;s<t;s++){r(s);const i=Date.now()-n;i>=0&&i<e||(await Dp(),n+=i)}}function Np(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function Wn(t){if(typeof t=="string"&&(t=Np(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}function D1(...t){if(!t.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((n,s)=>n+s.length,0),r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}class _a{clone(){return this._cloneInto()}}const N1=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function L1(t,e){if(e!==void 0&&(typeof e!="object"||!N1(e)))throw new TypeError("Options should be object or undefined");return Object.assign(t,e)}function Ws(t){const e=n=>t().update(Wn(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Lp(t){const e=(n,s)=>t(s).update(Wn(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function q1(t=32){if(eh.web)return eh.web.getRandomValues(new Uint8Array(t));throw new Error("The environment doesn't have randomBytes function")}const H1=Object.freeze(Object.defineProperty({__proto__:null,Hash:_a,asyncLoop:I1,bytesToHex:vu,checkOpts:L1,concatBytes:D1,createView:vi,hexToBytes:_u,isLE:Ip,nextTick:Dp,randomBytes:q1,rotr:O1,toBytes:Wn,u32:Cp,u8:M1,utf8ToBytes:Np,wrapConstructor:Ws,wrapConstructorWithOpts:Lp},Symbol.toStringTag,{value:"Module"}));function F1(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),a=Number(r>>s&i),o=Number(r&i),u=n?4:0,f=n?0:4;t.setUint32(e+u,a,n),t.setUint32(e+f,o,n)}class z1 extends _a{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=vi(this.buffer)}update(e){St.exists(this);const{view:r,buffer:n,blockLen:s}=this;e=Wn(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const u=vi(e);for(;s<=i-a;a+=s)this.process(u,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){St.exists(this),St.output(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let u=a;u<s;u++)r[u]=0;F1(n,s-8,BigInt(this.length*8),i),this.process(n,0);const o=vi(e);this.get().forEach((u,f)=>o.setUint32(4*f,u,i))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:a,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=a,s%r&&e.buffer.set(n),e}}const ci=BigInt(2**32-1),xc=BigInt(32);function qp(t,e=!1){return e?{h:Number(t&ci),l:Number(t>>xc&ci)}:{h:Number(t>>xc&ci)|0,l:Number(t&ci)|0}}function K1(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=qp(t[s],e);[r[s],n[s]]=[i,a]}return[r,n]}const j1=(t,e)=>BigInt(t>>>0)<<xc|BigInt(e>>>0),W1=(t,e,r)=>t>>>r,V1=(t,e,r)=>t<<32-r|e>>>r,G1=(t,e,r)=>t>>>r|e<<32-r,J1=(t,e,r)=>t<<32-r|e>>>r,X1=(t,e,r)=>t<<64-r|e>>>r-32,Z1=(t,e,r)=>t>>>r-32|e<<64-r,Y1=(t,e)=>e,Q1=(t,e)=>t,eS=(t,e,r)=>t<<r|e>>>32-r,tS=(t,e,r)=>e<<r|t>>>32-r,rS=(t,e,r)=>e<<r-32|t>>>64-r,nS=(t,e,r)=>t<<r-32|e>>>64-r;function sS(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const iS=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),aS=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,oS=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),cS=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,uS=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),lS=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,W={fromBig:qp,split:K1,toBig:j1,shrSH:W1,shrSL:V1,rotrSH:G1,rotrSL:J1,rotrBH:X1,rotrBL:Z1,rotr32H:Y1,rotr32L:Q1,rotlSH:eS,rotlSL:tS,rotlBH:rS,rotlBL:nS,add:sS,add3L:iS,add3H:aS,add4L:oS,add4H:cS,add5H:lS,add5L:uS},[hS,dS]=W.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),xr=new Uint32Array(80),Rr=new Uint32Array(80);class Ea extends z1{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:a,Dh:o,Dl:u,Eh:f,El:p,Fh:d,Fl:A,Gh:T,Gl:m,Hh:E,Hl:k}=this;return[e,r,n,s,i,a,o,u,f,p,d,A,T,m,E,k]}set(e,r,n,s,i,a,o,u,f,p,d,A,T,m,E,k){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=u|0,this.Eh=f|0,this.El=p|0,this.Fh=d|0,this.Fl=A|0,this.Gh=T|0,this.Gl=m|0,this.Hh=E|0,this.Hl=k|0}process(e,r){for(let U=0;U<16;U++,r+=4)xr[U]=e.getUint32(r),Rr[U]=e.getUint32(r+=4);for(let U=16;U<80;U++){const B=xr[U-15]|0,P=Rr[U-15]|0,D=W.rotrSH(B,P,1)^W.rotrSH(B,P,8)^W.shrSH(B,P,7),N=W.rotrSL(B,P,1)^W.rotrSL(B,P,8)^W.shrSL(B,P,7),L=xr[U-2]|0,K=Rr[U-2]|0,fe=W.rotrSH(L,K,19)^W.rotrBH(L,K,61)^W.shrSH(L,K,6),_=W.rotrSL(L,K,19)^W.rotrBL(L,K,61)^W.shrSL(L,K,6),c=W.add4L(N,_,Rr[U-7],Rr[U-16]),h=W.add4H(c,D,fe,xr[U-7],xr[U-16]);xr[U]=h|0,Rr[U]=c|0}let{Ah:n,Al:s,Bh:i,Bl:a,Ch:o,Cl:u,Dh:f,Dl:p,Eh:d,El:A,Fh:T,Fl:m,Gh:E,Gl:k,Hh:$,Hl:I}=this;for(let U=0;U<80;U++){const B=W.rotrSH(d,A,14)^W.rotrSH(d,A,18)^W.rotrBH(d,A,41),P=W.rotrSL(d,A,14)^W.rotrSL(d,A,18)^W.rotrBL(d,A,41),D=d&T^~d&E,N=A&m^~A&k,L=W.add5L(I,P,N,dS[U],Rr[U]),K=W.add5H(L,$,B,D,hS[U],xr[U]),fe=L|0,_=W.rotrSH(n,s,28)^W.rotrBH(n,s,34)^W.rotrBH(n,s,39),c=W.rotrSL(n,s,28)^W.rotrBL(n,s,34)^W.rotrBL(n,s,39),h=n&i^n&o^i&o,y=s&a^s&u^a&u;$=E|0,I=k|0,E=T|0,k=m|0,T=d|0,m=A|0,{h:d,l:A}=W.add(f|0,p|0,K|0,fe|0),f=o|0,p=u|0,o=i|0,u=a|0,i=n|0,a=s|0;const g=W.add3L(fe,c,y);n=W.add3H(g,K,_,h),s=g|0}({h:n,l:s}=W.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:a}=W.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l:u}=W.add(this.Ch|0,this.Cl|0,o|0,u|0),{h:f,l:p}=W.add(this.Dh|0,this.Dl|0,f|0,p|0),{h:d,l:A}=W.add(this.Eh|0,this.El|0,d|0,A|0),{h:T,l:m}=W.add(this.Fh|0,this.Fl|0,T|0,m|0),{h:E,l:k}=W.add(this.Gh|0,this.Gl|0,E|0,k|0),{h:$,l:I}=W.add(this.Hh|0,this.Hl|0,$|0,I|0),this.set(n,s,i,a,o,u,f,p,d,A,T,m,E,k,$,I)}roundClean(){xr.fill(0),Rr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class fS extends Ea{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class pS extends Ea{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Eu=Ws(()=>new Ea),yS=Ws(()=>new fS),gS=Ws(()=>new pS),mS=Object.freeze(Object.defineProperty({__proto__:null,SHA512:Ea,sha384:gS,sha512:Eu,sha512_256:yS},Symbol.toStringTag,{value:"Module"})),wS=Xh(mS),bS=Xh(H1);Object.defineProperty(Et,"__esModule",{value:!0});var Hp=Et.mnemonicToSeedSync=Et.mnemonicToSeed=Et.validateMnemonic=Et.entropyToMnemonic=Et.mnemonicToEntropy=Et.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const Fp=ot,zp=On,vS=ba,Kp=wS,_S=bS,ui=vg,ES=t=>t[0]==="あいこくしん";function jp(t){if(typeof t!="string")throw new TypeError(`Invalid mnemonic type: ${typeof t}`);return t.normalize("NFKD")}function Su(t){const e=jp(t),r=e.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:r}}function Wp(t){Fp.default.bytes(t,16,20,24,28,32)}function SS(t,e=128){if(Fp.default.number(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return Jp((0,_S.randomBytes)(e/8),t)}Et.generateMnemonic=SS;const AS=t=>{const e=8-t.length/4;return new Uint8Array([(0,vS.sha256)(t)[0]>>e<<e])};function Vp(t){if(!Array.isArray(t)||t.length!==2**11||typeof t[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return t.forEach(e=>{if(typeof e!="string")throw new Error(`Wordlist: non-string element: ${e}`)}),ui.utils.chain(ui.utils.checksum(1,AS),ui.utils.radix2(11,!0),ui.utils.alphabet(t))}function Gp(t,e){const{words:r}=Su(t),n=Vp(e).decode(r);return Wp(n),n}Et.mnemonicToEntropy=Gp;function Jp(t,e){return Wp(t),Vp(e).encode(t).join(ES(e)?"　":" ")}Et.entropyToMnemonic=Jp;function TS(t,e){try{Gp(t,e)}catch{return!1}return!0}Et.validateMnemonic=TS;const Xp=t=>jp(`mnemonic${t}`);function xS(t,e=""){return(0,zp.pbkdf2Async)(Kp.sha512,Su(t).nfkd,Xp(e),{c:2048,dkLen:64})}Et.mnemonicToSeed=xS;function RS(t,e=""){return(0,zp.pbkdf2)(Kp.sha512,Su(t).nfkd,Xp(e),{c:2048,dkLen:64})}Hp=Et.mnemonicToSeedSync=RS;const[Zp,Yp,Qp]=[[],[],[]],kS=BigInt(0),is=BigInt(1),BS=BigInt(2),PS=BigInt(7),US=BigInt(256),$S=BigInt(113);for(let t=0,e=is,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Zp.push(2*(5*n+r)),Yp.push((t+1)*(t+2)/2%64);let s=kS;for(let i=0;i<7;i++)e=(e<<is^(e>>PS)*$S)%US,e&BS&&(s^=is<<(is<<BigInt(i))-is);Qp.push(s)}const[MS,OS]=W.split(Qp,!0),th=(t,e,r)=>r>32?W.rotlBH(t,e,r):W.rotlSH(t,e,r),rh=(t,e,r)=>r>32?W.rotlBL(t,e,r):W.rotlSL(t,e,r);function CS(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let a=0;a<10;a++)r[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,u=(a+2)%10,f=r[u],p=r[u+1],d=th(f,p,1)^r[o],A=rh(f,p,1)^r[o+1];for(let T=0;T<50;T+=10)t[a+T]^=d,t[a+T+1]^=A}let s=t[2],i=t[3];for(let a=0;a<24;a++){const o=Yp[a],u=th(s,i,o),f=rh(s,i,o),p=Zp[a];s=t[p],i=t[p+1],t[p]=u,t[p+1]=f}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)r[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~r[(o+2)%10]&r[(o+4)%10]}t[0]^=MS[n],t[1]^=OS[n]}r.fill(0)}class Sa extends _a{constructor(e,r,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,St.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Cp(this.state)}keccak(){CS(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){St.exists(this);const{blockLen:r,state:n}=this;e=Wn(e);const s=e.length;for(let i=0;i<s;){const a=Math.min(r-this.pos,s-i);for(let o=0;o<a;o++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,r&128&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){St.exists(this,!1),St.bytes(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return St.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(St.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new Sa(r,n,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}}const Dr=(t,e,r)=>Ws(()=>new Sa(e,t,r));Dr(6,144,224/8);const Cn=Dr(6,136,256/8);Dr(6,104,384/8);Dr(6,72,512/8);Dr(1,144,224/8);Dr(1,136,256/8);Dr(1,104,384/8);Dr(1,72,512/8);const ey=(t,e,r)=>Lp((n={})=>new Sa(e,t,n.dkLen===void 0?r:n.dkLen,!0));ey(31,168,128/8);ey(31,136,256/8);class ty extends _a{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,St.hash(e);const n=Wn(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(e){return St.exists(this),this.iHash.update(e),this}digestInto(e){St.exists(this),St.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Au=(t,e,r)=>new ty(t,e).update(r).digest();Au.create=(t,e)=>new ty(t,e);var Tu={exports:{}},ry=function(e,r){return function(){for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];return e.apply(r,s)}},IS=ry,xu=Object.prototype.toString,Ru=function(t){return function(e){var r=xu.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function nn(t){return t=t.toLowerCase(),function(r){return Ru(r)===t}}function ku(t){return Array.isArray(t)}function Ni(t){return typeof t>"u"}function DS(t){return t!==null&&!Ni(t)&&t.constructor!==null&&!Ni(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var ny=nn("ArrayBuffer");function NS(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ny(t.buffer),e}function LS(t){return typeof t=="string"}function qS(t){return typeof t=="number"}function sy(t){return t!==null&&typeof t=="object"}function _i(t){if(Ru(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var HS=nn("Date"),FS=nn("File"),zS=nn("Blob"),KS=nn("FileList");function Bu(t){return xu.call(t)==="[object Function]"}function jS(t){return sy(t)&&Bu(t.pipe)}function WS(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||xu.call(t)===e||Bu(t.toString)&&t.toString()===e)}var VS=nn("URLSearchParams");function GS(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function JS(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Pu(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),ku(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}function Rc(){var t={};function e(s,i){_i(t[i])&&_i(s)?t[i]=Rc(t[i],s):_i(s)?t[i]=Rc({},s):ku(s)?t[i]=s.slice():t[i]=s}for(var r=0,n=arguments.length;r<n;r++)Pu(arguments[r],e);return t}function XS(t,e,r){return Pu(e,function(s,i){r&&typeof s=="function"?t[i]=IS(s,r):t[i]=s}),t}function ZS(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function YS(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function QS(t,e,r){var n,s,i,a={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),s=n.length;s-- >0;)i=n[s],a[i]||(e[i]=t[i],a[i]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function eA(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function tA(t){if(!t)return null;var e=t.length;if(Ni(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var rA=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),ht={isArray:ku,isArrayBuffer:ny,isBuffer:DS,isFormData:WS,isArrayBufferView:NS,isString:LS,isNumber:qS,isObject:sy,isPlainObject:_i,isUndefined:Ni,isDate:HS,isFile:FS,isBlob:zS,isFunction:Bu,isStream:jS,isURLSearchParams:VS,isStandardBrowserEnv:JS,forEach:Pu,merge:Rc,extend:XS,trim:GS,stripBOM:ZS,inherits:YS,toFlatObject:QS,kindOf:Ru,kindOfTest:nn,endsWith:eA,toArray:tA,isTypedArray:rA,isFileList:KS},pn=ht;function nh(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var iy=function(e,r,n){if(!r)return e;var s;if(n)s=n(r);else if(pn.isURLSearchParams(r))s=r.toString();else{var i=[];pn.forEach(r,function(u,f){u===null||typeof u>"u"||(pn.isArray(u)?f=f+"[]":u=[u],pn.forEach(u,function(d){pn.isDate(d)?d=d.toISOString():pn.isObject(d)&&(d=JSON.stringify(d)),i.push(nh(f)+"="+nh(d))}))}),s=i.join("&")}if(s){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e},nA=ht;function Aa(){this.handlers=[]}Aa.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Aa.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Aa.prototype.forEach=function(e){nA.forEach(this.handlers,function(n){n!==null&&e(n)})};var sA=Aa,iA=ht,aA=function(e,r){iA.forEach(e,function(s,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(e[r]=s,delete e[i])})},ay=ht;function In(t,e,r,n,s){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}ay.inherits(In,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var oy=In.prototype,cy={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){cy[t]={value:t}});Object.defineProperties(In,cy);Object.defineProperty(oy,"isAxiosError",{value:!0});In.from=function(t,e,r,n,s,i){var a=Object.create(oy);return ay.toFlatObject(t,a,function(u){return u!==Error.prototype}),In.call(a,t.message,e,r,n,s),a.name=t.name,i&&Object.assign(a,i),a};var Vn=In,uy={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wt=ht;function oA(t,e){e=e||new FormData;var r=[];function n(i){return i===null?"":Wt.isDate(i)?i.toISOString():Wt.isArrayBuffer(i)||Wt.isTypedArray(i)?typeof Blob=="function"?new Blob([i]):Buffer.from(i):i}function s(i,a){if(Wt.isPlainObject(i)||Wt.isArray(i)){if(r.indexOf(i)!==-1)throw Error("Circular reference detected in "+a);r.push(i),Wt.forEach(i,function(u,f){if(!Wt.isUndefined(u)){var p=a?a+"."+f:f,d;if(u&&!a&&typeof u=="object"){if(Wt.endsWith(f,"{}"))u=JSON.stringify(u);else if(Wt.endsWith(f,"[]")&&(d=Wt.toArray(u))){d.forEach(function(A){!Wt.isUndefined(A)&&e.append(p,n(A))});return}}s(u,p)}}),r.pop()}else e.append(a,n(i))}return s(t),e}var ly=oA,Ho,sh;function cA(){if(sh)return Ho;sh=1;var t=Vn;return Ho=function(r,n,s){var i=s.config.validateStatus;!s.status||!i||i(s.status)?r(s):n(new t("Request failed with status code "+s.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))},Ho}var Fo,ih;function uA(){if(ih)return Fo;ih=1;var t=ht;return Fo=t.isStandardBrowserEnv()?function(){return{write:function(n,s,i,a,o,u){var f=[];f.push(n+"="+encodeURIComponent(s)),t.isNumber(i)&&f.push("expires="+new Date(i).toGMTString()),t.isString(a)&&f.push("path="+a),t.isString(o)&&f.push("domain="+o),u===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(n){var s=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Fo}var lA=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},hA=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},dA=lA,fA=hA,hy=function(e,r){return e&&!dA(r)?fA(e,r):r},zo,ah;function pA(){if(ah)return zo;ah=1;var t=ht,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return zo=function(n){var s={},i,a,o;return n&&t.forEach(n.split(`
`),function(f){if(o=f.indexOf(":"),i=t.trim(f.substr(0,o)).toLowerCase(),a=t.trim(f.substr(o+1)),i){if(s[i]&&e.indexOf(i)>=0)return;i==="set-cookie"?s[i]=(s[i]?s[i]:[]).concat([a]):s[i]=s[i]?s[i]+", "+a:a}}),s},zo}var Ko,oh;function yA(){if(oh)return Ko;oh=1;var t=ht;return Ko=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),s;function i(a){var o=a;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=i(window.location.href),function(o){var u=t.isString(o)?i(o):o;return u.protocol===s.protocol&&u.host===s.host}}():function(){return function(){return!0}}(),Ko}var jo,ch;function Ta(){if(ch)return jo;ch=1;var t=Vn,e=ht;function r(n){t.call(this,n??"canceled",t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),jo=r,jo}var Wo,uh;function gA(){return uh||(uh=1,Wo=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),Wo}var Vo,lh;function hh(){if(lh)return Vo;lh=1;var t=ht,e=cA(),r=uA(),n=iy,s=hy,i=pA(),a=yA(),o=uy,u=Vn,f=Ta(),p=gA();return Vo=function(A){return new Promise(function(m,E){var k=A.data,$=A.headers,I=A.responseType,U;function B(){A.cancelToken&&A.cancelToken.unsubscribe(U),A.signal&&A.signal.removeEventListener("abort",U)}t.isFormData(k)&&t.isStandardBrowserEnv()&&delete $["Content-Type"];var P=new XMLHttpRequest;if(A.auth){var D=A.auth.username||"",N=A.auth.password?unescape(encodeURIComponent(A.auth.password)):"";$.Authorization="Basic "+btoa(D+":"+N)}var L=s(A.baseURL,A.url);P.open(A.method.toUpperCase(),n(L,A.params,A.paramsSerializer),!0),P.timeout=A.timeout;function K(){if(P){var c="getAllResponseHeaders"in P?i(P.getAllResponseHeaders()):null,h=!I||I==="text"||I==="json"?P.responseText:P.response,y={data:h,status:P.status,statusText:P.statusText,headers:c,config:A,request:P};e(function(b){m(b),B()},function(b){E(b),B()},y),P=null}}if("onloadend"in P?P.onloadend=K:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(K)},P.onabort=function(){P&&(E(new u("Request aborted",u.ECONNABORTED,A,P)),P=null)},P.onerror=function(){E(new u("Network Error",u.ERR_NETWORK,A,P,P)),P=null},P.ontimeout=function(){var h=A.timeout?"timeout of "+A.timeout+"ms exceeded":"timeout exceeded",y=A.transitional||o;A.timeoutErrorMessage&&(h=A.timeoutErrorMessage),E(new u(h,y.clarifyTimeoutError?u.ETIMEDOUT:u.ECONNABORTED,A,P)),P=null},t.isStandardBrowserEnv()){var fe=(A.withCredentials||a(L))&&A.xsrfCookieName?r.read(A.xsrfCookieName):void 0;fe&&($[A.xsrfHeaderName]=fe)}"setRequestHeader"in P&&t.forEach($,function(h,y){typeof k>"u"&&y.toLowerCase()==="content-type"?delete $[y]:P.setRequestHeader(y,h)}),t.isUndefined(A.withCredentials)||(P.withCredentials=!!A.withCredentials),I&&I!=="json"&&(P.responseType=A.responseType),typeof A.onDownloadProgress=="function"&&P.addEventListener("progress",A.onDownloadProgress),typeof A.onUploadProgress=="function"&&P.upload&&P.upload.addEventListener("progress",A.onUploadProgress),(A.cancelToken||A.signal)&&(U=function(c){P&&(E(!c||c&&c.type?new f:c),P.abort(),P=null)},A.cancelToken&&A.cancelToken.subscribe(U),A.signal&&(A.signal.aborted?U():A.signal.addEventListener("abort",U))),k||(k=null);var _=p(L);if(_&&["http","https","file"].indexOf(_)===-1){E(new u("Unsupported protocol "+_+":",u.ERR_BAD_REQUEST,A));return}P.send(k)})},Vo}var Go,dh;function mA(){return dh||(dh=1,Go=null),Go}var at=ht,fh=aA,ph=Vn,wA=uy,bA=ly,vA={"Content-Type":"application/x-www-form-urlencoded"};function yh(t,e){!at.isUndefined(t)&&at.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function _A(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=hh()),t}function EA(t,e,r){if(at.isString(t))try{return(e||JSON.parse)(t),at.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(t)}var xa={transitional:wA,adapter:_A(),transformRequest:[function(e,r){if(fh(r,"Accept"),fh(r,"Content-Type"),at.isFormData(e)||at.isArrayBuffer(e)||at.isBuffer(e)||at.isStream(e)||at.isFile(e)||at.isBlob(e))return e;if(at.isArrayBufferView(e))return e.buffer;if(at.isURLSearchParams(e))return yh(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=at.isObject(e),s=r&&r["Content-Type"],i;if((i=at.isFileList(e))||n&&s==="multipart/form-data"){var a=this.env&&this.env.FormData;return bA(i?{"files[]":e}:e,a&&new a)}else if(n||s==="application/json")return yh(r,"application/json"),EA(e);return e}],transformResponse:[function(e){var r=this.transitional||xa.transitional,n=r&&r.silentJSONParsing,s=r&&r.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||s&&at.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?ph.from(a,ph.ERR_BAD_RESPONSE,this,null,this.response):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mA()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};at.forEach(["delete","get","head"],function(e){xa.headers[e]={}});at.forEach(["post","put","patch"],function(e){xa.headers[e]=at.merge(vA)});var Uu=xa,SA=ht,AA=Uu,TA=function(e,r,n){var s=this||AA;return SA.forEach(n,function(a){e=a.call(s,e,r)}),e},Jo,gh;function dy(){return gh||(gh=1,Jo=function(e){return!!(e&&e.__CANCEL__)}),Jo}var mh=ht,Xo=TA,xA=dy(),RA=Uu,kA=Ta();function Zo(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new kA}var BA=function(e){Zo(e),e.headers=e.headers||{},e.data=Xo.call(e,e.data,e.headers,e.transformRequest),e.headers=mh.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),mh.forEach(["delete","get","head","post","put","patch","common"],function(s){delete e.headers[s]});var r=e.adapter||RA.adapter;return r(e).then(function(s){return Zo(e),s.data=Xo.call(e,s.data,s.headers,e.transformResponse),s},function(s){return xA(s)||(Zo(e),s&&s.response&&(s.response.data=Xo.call(e,s.response.data,s.response.headers,e.transformResponse))),Promise.reject(s)})},_t=ht,fy=function(e,r){r=r||{};var n={};function s(p,d){return _t.isPlainObject(p)&&_t.isPlainObject(d)?_t.merge(p,d):_t.isPlainObject(d)?_t.merge({},d):_t.isArray(d)?d.slice():d}function i(p){if(_t.isUndefined(r[p])){if(!_t.isUndefined(e[p]))return s(void 0,e[p])}else return s(e[p],r[p])}function a(p){if(!_t.isUndefined(r[p]))return s(void 0,r[p])}function o(p){if(_t.isUndefined(r[p])){if(!_t.isUndefined(e[p]))return s(void 0,e[p])}else return s(void 0,r[p])}function u(p){if(p in r)return s(e[p],r[p]);if(p in e)return s(void 0,e[p])}var f={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return _t.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var A=f[d]||i,T=A(d);_t.isUndefined(T)&&A!==u||(n[d]=T)}),n},Yo,wh;function py(){return wh||(wh=1,Yo={version:"0.27.2"}),Yo}var PA=py().version,Br=Vn,$u={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){$u[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var bh={};$u.transitional=function(e,r,n){function s(i,a){return"[Axios v"+PA+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return function(i,a,o){if(e===!1)throw new Br(s(a," has been removed"+(r?" in "+r:"")),Br.ERR_DEPRECATED);return r&&!bh[a]&&(bh[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,a,o):!0}};function UA(t,e,r){if(typeof t!="object")throw new Br("options must be an object",Br.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),s=n.length;s-- >0;){var i=n[s],a=e[i];if(a){var o=t[i],u=o===void 0||a(o,i,t);if(u!==!0)throw new Br("option "+i+" must be "+u,Br.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Br("Unknown option "+i,Br.ERR_BAD_OPTION)}}var $A={assertOptions:UA,validators:$u},yy=ht,MA=iy,vh=sA,_h=BA,Ra=fy,OA=hy,gy=$A,yn=gy.validators;function Dn(t){this.defaults=t,this.interceptors={request:new vh,response:new vh}}Dn.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Ra(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&gy.assertOptions(n,{silentJSONParsing:yn.transitional(yn.boolean),forcedJSONParsing:yn.transitional(yn.boolean),clarifyTimeoutError:yn.transitional(yn.boolean)},!1);var s=[],i=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(r)===!1||(i=i&&T.synchronous,s.unshift(T.fulfilled,T.rejected))});var a=[];this.interceptors.response.forEach(function(T){a.push(T.fulfilled,T.rejected)});var o;if(!i){var u=[_h,void 0];for(Array.prototype.unshift.apply(u,s),u=u.concat(a),o=Promise.resolve(r);u.length;)o=o.then(u.shift(),u.shift());return o}for(var f=r;s.length;){var p=s.shift(),d=s.shift();try{f=p(f)}catch(A){d(A);break}}try{o=_h(f)}catch(A){return Promise.reject(A)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};Dn.prototype.getUri=function(e){e=Ra(this.defaults,e);var r=OA(e.baseURL,e.url);return MA(r,e.params,e.paramsSerializer)};yy.forEach(["delete","get","head","options"],function(e){Dn.prototype[e]=function(r,n){return this.request(Ra(n||{},{method:e,url:r,data:(n||{}).data}))}});yy.forEach(["post","put","patch"],function(e){function r(n){return function(i,a,o){return this.request(Ra(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Dn.prototype[e]=r(),Dn.prototype[e+"Form"]=r(!0)});var CA=Dn,Qo,Eh;function IA(){if(Eh)return Qo;Eh=1;var t=Ta();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(a){n=a});var s=this;this.promise.then(function(i){if(s._listeners){var a,o=s._listeners.length;for(a=0;a<o;a++)s._listeners[a](i);s._listeners=null}}),this.promise.then=function(i){var a,o=new Promise(function(u){s.subscribe(u),a=u}).then(i);return o.cancel=function(){s.unsubscribe(a)},o},r(function(a){s.reason||(s.reason=new t(a),n(s.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var s=this._listeners.indexOf(n);s!==-1&&this._listeners.splice(s,1)}},e.source=function(){var n,s=new e(function(a){n=a});return{token:s,cancel:n}},Qo=e,Qo}var ec,Sh;function DA(){return Sh||(Sh=1,ec=function(e){return function(n){return e.apply(null,n)}}),ec}var tc,Ah;function NA(){if(Ah)return tc;Ah=1;var t=ht;return tc=function(r){return t.isObject(r)&&r.isAxiosError===!0},tc}var Th=ht,LA=ry,Ei=CA,qA=fy,HA=Uu;function my(t){var e=new Ei(t),r=LA(Ei.prototype.request,e);return Th.extend(r,Ei.prototype,e),Th.extend(r,e),r.create=function(s){return my(qA(t,s))},r}var vt=my(HA);vt.Axios=Ei;vt.CanceledError=Ta();vt.CancelToken=IA();vt.isCancel=dy();vt.VERSION=py().version;vt.toFormData=ly;vt.AxiosError=Vn;vt.Cancel=vt.CanceledError;vt.all=function(e){return Promise.all(e)};vt.spread=DA();vt.isAxiosError=NA();Tu.exports=vt;Tu.exports.default=vt;var FA=Tu.exports,zA=FA;const _s=Cr(zA);var KA=_g();const wy=Cr(KA);var by=Object.defineProperty,jA=Object.getOwnPropertyDescriptor,ka=(t,e)=>{for(var r in e)by(t,r,{get:e[r],enumerable:!0})},ae=(t,e,r,n)=>{for(var s=jA(e,r),i=t.length-1,a;i>=0;i--)(a=t[i])&&(s=a(e,r,s)||s);return s&&by(e,r,s),s},WA=/^m(\/[0-9]+')+$/,vy=t=>t.replace("'",""),VA="ed25519 seed",GA=2147483648,JA=t=>{const r=Au.create(Eu,VA).update(_u(t)).digest(),n=r.slice(0,32),s=r.slice(32);return{key:n,chainCode:s}},XA=({key:t,chainCode:e},r)=>{const n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);const s=new Uint8Array(n),i=new Uint8Array([0]),a=new Uint8Array([...i,...t,...s]),o=Au.create(Eu,e).update(a).digest(),u=o.slice(0,32),f=o.slice(32);return{key:u,chainCode:f}},ZA=t=>WA.test(t)?!t.split("/").slice(1).map(vy).some(Number.isNaN):!1,YA=(t,e,r=GA)=>{if(!ZA(t))throw new Error("Invalid derivation path");const{key:n,chainCode:s}=JA(e);return t.split("/").slice(1).map(vy).map(a=>parseInt(a,10)).reduce((a,o)=>XA(a,o+r),{key:n,chainCode:s})};async function QA(t){return new Promise(e=>{setTimeout(e,t)})}var xh="/v1";function eT(t){let e=`${t}`;return e.endsWith("/")&&(e=e.substring(0,e.length-1)),e.endsWith(xh)||(e=`${e}${xh}`),e}var _y=2e5,Ey=20,tT=20,rT="0x1::aptos_coin::AptosCoin";function Ba(t){let e,r,n;return typeof t=="object"?(e=t.hashFunction,r=t.ttlMs,n=t.tags):e=t,(s,i,a)=>{if(a.value!=null)a.value=Rh(a.value,e,r,n);else if(a.get!=null)a.get=Rh(a.get,e,r,n);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function nT(t,e){return Ba({ttlMs:t,hashFunction:e})}var Si=new Map;function sT(t){const e=new Set;for(const r of t){const n=Si.get(r);if(n)for(const s of n)e.has(s)||(s.clear(),e.add(s))}return e.size}function Rh(t,e,r=0,n){const s=Symbol("__memoized_map__");return function(...i){let a;const o=this;o.hasOwnProperty(s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const u=o[s];if(Array.isArray(n))for(const f of n)Si.has(f)?Si.get(f).push(u):Si.set(f,[u]);if(e||i.length>0||r>0){let f;e===!0?f=i.map(A=>A.toString()).join("!"):e?f=e.apply(o,i):f=i[0];const p=`${f}__timestamp`;let d=!1;if(r>0)if(!u.has(p))d=!0;else{const A=u.get(p);d=Date.now()-A>r}u.has(f)&&!d?a=u.get(f):(a=t.apply(o,i),u.set(f,a),r>0&&u.set(p,Date.now()))}else{const f=o;u.has(f)?a=u.get(f):(a=t.apply(o,i),u.set(f,a))}return a}}var V=class{static fromBuffer(t){return V.fromUint8Array(t)}static fromUint8Array(t){return new V(vu(t))}static ensure(t){return typeof t=="string"?new V(t):t}constructor(t){t.startsWith("0x")?this.hexString=t:this.hexString=`0x${t}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(_u(this.noPrefix()))}};async function kh(t,e,r,n){var s;const i=[];let a;for(;;){const o=await t(V.ensure(e).hex(),(s=n==null?void 0:n.ledgerVersion)==null?void 0:s.toString(),a,r);if(a=o.__headers["x-aptos-cursor"],delete o.__headers,i.push(...o),a==null)break}return i}var iT={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql"},aT={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1"},nt={};ka(nt,{AccountAddress:()=>ge,AccountAuthenticator:()=>Ss,AccountAuthenticatorEd25519:()=>Cu,AccountAuthenticatorMultiEd25519:()=>Iu,ArgumentABI:()=>Ys,AuthenticationKey:()=>Qr,ChainId:()=>Da,ChangeSet:()=>ET,Ed25519PublicKey:()=>Ot,Ed25519Signature:()=>tr,EntryFunction:()=>Gr,EntryFunctionABI:()=>Nn,Identifier:()=>mt,Module:()=>Ry,ModuleId:()=>Yr,MultiAgentRawTransaction:()=>Oa,MultiEd25519PublicKey:()=>Vs,MultiEd25519Signature:()=>Pa,MultiSig:()=>Lu,MultiSigTransactionPayload:()=>Nu,RawTransaction:()=>Qn,RawTransactionWithData:()=>ky,RotationProofChallenge:()=>AT,Script:()=>Ma,ScriptABI:()=>Va,SignedTransaction:()=>Js,StructTag:()=>Zr,Transaction:()=>By,TransactionArgument:()=>Zt,TransactionArgumentAddress:()=>Ka,TransactionArgumentBool:()=>Wa,TransactionArgumentU128:()=>Fa,TransactionArgumentU16:()=>La,TransactionArgumentU256:()=>za,TransactionArgumentU32:()=>qa,TransactionArgumentU64:()=>Ha,TransactionArgumentU8:()=>Na,TransactionArgumentU8Vector:()=>ja,TransactionAuthenticator:()=>Gs,TransactionAuthenticatorEd25519:()=>Ua,TransactionAuthenticatorMultiAgent:()=>Ou,TransactionAuthenticatorMultiEd25519:()=>$a,TransactionPayload:()=>Xs,TransactionPayloadEntryFunction:()=>Ia,TransactionPayloadMultisig:()=>qu,TransactionPayloadScript:()=>Ca,TransactionScriptABI:()=>Ga,TypeArgumentABI:()=>Zs,TypeTag:()=>lt,TypeTagAddress:()=>Or,TypeTagBool:()=>an,TypeTagParser:()=>Yn,TypeTagParserError:()=>xy,TypeTagSigner:()=>Du,TypeTagStruct:()=>un,TypeTagU128:()=>cn,TypeTagU16:()=>Gn,TypeTagU256:()=>Xn,TypeTagU32:()=>Jn,TypeTagU64:()=>on,TypeTagU8:()=>mr,TypeTagVector:()=>Zn,UserTransaction:()=>Hu,WriteSet:()=>ST,stringStructTag:()=>Ty});var oT={};ka(oT,{Deserializer:()=>Mu,Serializer:()=>we,bcsSerializeBool:()=>gT,bcsSerializeBytes:()=>bn,bcsSerializeFixedBytes:()=>wT,bcsSerializeStr:()=>mT,bcsSerializeU128:()=>yT,bcsSerializeU16:()=>fT,bcsSerializeU32:()=>pT,bcsSerializeU8:()=>kc,bcsSerializeUint64:()=>dT,bcsToBytes:()=>Nr,deserializeVector:()=>zt,serializeVector:()=>At,serializeVectorWithFunc:()=>hT});var cT=2**8-1,uT=2**16-1,Es=2**32-1,Sy=BigInt(2**64)-BigInt(1),Ay=BigInt(2**128)-BigInt(1),lT=BigInt(2**256)-BigInt(1),we=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(t){for(;this.buffer.byteLength<this.offset+t;){const e=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e}}serialize(t){this.ensureBufferWillHandleSize(t.length),new Uint8Array(this.buffer,this.offset).set(t),this.offset+=t.length}serializeWithFunction(t,e,r){this.ensureBufferWillHandleSize(e);const n=new DataView(this.buffer,this.offset);t.apply(n,[0,r,!0]),this.offset+=e}serializeStr(t){const e=new TextEncoder;this.serializeBytes(e.encode(t))}serializeBytes(t){this.serializeU32AsUleb128(t.length),this.serialize(t)}serializeFixedBytes(t){this.serialize(t)}serializeBool(t){if(typeof t!="boolean")throw new Error("Value needs to be a boolean");const e=t?1:0;this.serialize(new Uint8Array([e]))}serializeU8(t){this.serialize(new Uint8Array([t]))}serializeU16(t){this.serializeWithFunction(DataView.prototype.setUint16,2,t)}serializeU32(t){this.serializeWithFunction(DataView.prototype.setUint32,4,t)}serializeU64(t){const e=BigInt(t.toString())&BigInt(Es),r=BigInt(t.toString())>>BigInt(32);this.serializeU32(Number(e)),this.serializeU32(Number(r))}serializeU128(t){const e=BigInt(t.toString())&Sy,r=BigInt(t.toString())>>BigInt(64);this.serializeU64(e),this.serializeU64(r)}serializeU256(t){const e=BigInt(t.toString())&Ay,r=BigInt(t.toString())>>BigInt(128);this.serializeU128(e),this.serializeU128(r)}serializeU32AsUleb128(t){let e=t;const r=[];for(;e>>>7;)r.push(e&127|128),e>>>=7;r.push(e),this.serialize(new Uint8Array(r))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};ae([sn(0,cT)],we.prototype,"serializeU8");ae([sn(0,uT)],we.prototype,"serializeU16");ae([sn(0,Es)],we.prototype,"serializeU32");ae([sn(BigInt(0),Sy)],we.prototype,"serializeU64");ae([sn(BigInt(0),Ay)],we.prototype,"serializeU128");ae([sn(BigInt(0),lT)],we.prototype,"serializeU256");ae([sn(0,Es)],we.prototype,"serializeU32AsUleb128");function sn(t,e,r){return(n,s,i)=>{const a=i.value;return i.value=function(u){const f=BigInt(u.toString());if(f>BigInt(e.toString())||f<BigInt(t.toString()))throw new Error("Value is out of range");a.apply(this,[u])},i}}var Mu=class{constructor(t){this.buffer=new ArrayBuffer(t.length),new Uint8Array(this.buffer).set(t,0),this.offset=0}read(t){if(this.offset+t>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const e=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}deserializeStr(){const t=this.deserializeBytes();return new TextDecoder().decode(t)}deserializeBytes(){const t=this.deserializeUleb128AsU32();return new Uint8Array(this.read(t))}deserializeFixedBytes(t){return new Uint8Array(this.read(t))}deserializeBool(){const t=new Uint8Array(this.read(1))[0];if(t!==1&&t!==0)throw new Error("Invalid boolean value");return t===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const t=this.deserializeU32(),e=this.deserializeU32();return BigInt(BigInt(e)<<BigInt(32)|BigInt(t))}deserializeU128(){const t=this.deserializeU64(),e=this.deserializeU64();return BigInt(e<<BigInt(64)|t)}deserializeU256(){const t=this.deserializeU128(),e=this.deserializeU128();return BigInt(e<<BigInt(128)|t)}deserializeUleb128AsU32(){let t=BigInt(0),e=0;for(;t<Es;){const r=this.deserializeU8();if(t|=BigInt(r&127)<<BigInt(e),!(r&128))break;e+=7}if(t>Es)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(t)}};function At(t,e){e.serializeU32AsUleb128(t.length),t.forEach(r=>{r.serialize(e)})}function hT(t,e){const r=new we;r.serializeU32AsUleb128(t.length);const n=r[e];return t.forEach(s=>{n.call(r,s)}),r.getBytes()}function zt(t,e){const r=t.deserializeUleb128AsU32(),n=[];for(let s=0;s<r;s+=1)n.push(e.deserialize(t));return n}function Nr(t){const e=new we;return t.serialize(e),e.getBytes()}function dT(t){const e=new we;return e.serializeU64(t),e.getBytes()}function kc(t){const e=new we;return e.serializeU8(t),e.getBytes()}function fT(t){const e=new we;return e.serializeU16(t),e.getBytes()}function pT(t){const e=new we;return e.serializeU32(t),e.getBytes()}function yT(t){const e=new we;return e.serializeU128(t),e.getBytes()}function gT(t){const e=new we;return e.serializeBool(t),e.getBytes()}function mT(t){const e=new we;return e.serializeStr(t),e.getBytes()}function bn(t){const e=new we;return e.serializeBytes(t),e.getBytes()}function wT(t){const e=new we;return e.serializeFixedBytes(t),e.getBytes()}var Bt=class{constructor(t){if(t.length!==Bt.LENGTH)throw new Error("Expected address of length 32");this.address=t}static fromHex(t){let e=V.ensure(t);e.noPrefix().length%2!==0&&(e=new V(`0${e.noPrefix()}`));const r=e.toUint8Array();if(r.length>Bt.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(r.length===Bt.LENGTH)return new Bt(r);const n=new Uint8Array(Bt.LENGTH);return n.set(r,Bt.LENGTH-r.length),new Bt(n)}static isValid(t){if(t==="")return!1;let e=V.ensure(t);return e.noPrefix().length%2!==0&&(e=new V(`0${e.noPrefix()}`)),e.toUint8Array().length<=Bt.LENGTH}toHexString(){return V.fromUint8Array(this.address).hex()}serialize(t){t.serializeFixedBytes(this.address)}static deserialize(t){return new Bt(t.deserializeFixedBytes(Bt.LENGTH))}},ge=Bt;ge.LENGTH=32;ge.CORE_CODE_ADDRESS=Bt.fromHex("0x1");var Ai=class{constructor(t){if(t.length!==Ai.LENGTH)throw new Error(`Ed25519PublicKey length should be ${Ai.LENGTH}`);this.value=t}toBytes(){return this.value}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const e=t.deserializeBytes();return new Ai(e)}},Ot=Ai;Ot.LENGTH=32;var Ti=class{constructor(t){if(this.value=t,t.length!==Ti.LENGTH)throw new Error(`Ed25519Signature length should be ${Ti.LENGTH}`)}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const e=t.deserializeBytes();return new Ti(e)}},tr=Ti;tr.LENGTH=64;var Bc=32,Vs=class{constructor(t,e){if(this.public_keys=t,this.threshold=e,e>Bc)throw new Error(`"threshold" cannot be larger than ${Bc}`)}toBytes(){const t=new Uint8Array(this.public_keys.length*Ot.LENGTH+1);return this.public_keys.forEach((e,r)=>{t.set(e.value,r*Ot.LENGTH)}),t[this.public_keys.length*Ot.LENGTH]=this.threshold,t}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const e=t.deserializeBytes(),r=e[e.length-1],n=[];for(let s=0;s<e.length-1;s+=Ot.LENGTH){const i=s;n.push(new Ot(e.subarray(i,i+Ot.LENGTH)))}return new Vs(n,r)}},ls=class{constructor(t,e){if(this.signatures=t,this.bitmap=e,e.length!==ls.BITMAP_LEN)throw new Error(`"bitmap" length should be ${ls.BITMAP_LEN}`)}toBytes(){const t=new Uint8Array(this.signatures.length*tr.LENGTH+ls.BITMAP_LEN);return this.signatures.forEach((e,r)=>{t.set(e.value,r*tr.LENGTH)}),t.set(this.bitmap,this.signatures.length*tr.LENGTH),t}static createBitmap(t){const r=new Uint8Array([0,0,0,0]),n=new Set;return t.forEach(s=>{if(s>=Bc)throw new Error(`Invalid bit value ${s}.`);if(n.has(s))throw new Error("Duplicated bits detected.");n.add(s);const i=Math.floor(s/8);let a=r[i];a|=128>>s%8,r[i]=a}),r}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const e=t.deserializeBytes(),r=e.subarray(e.length-4),n=[];for(let s=0;s<e.length-r.length;s+=tr.LENGTH){const i=s;n.push(new tr(e.subarray(i,i+tr.LENGTH)))}return new ls(n,r)}},Pa=ls;Pa.BITMAP_LEN=4;var Gs=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Ua.load(t);case 1:return $a.load(t);case 2:return Ou.load(t);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${e}`)}}},Ua=class extends Gs{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=Ot.deserialize(t),r=tr.deserialize(t);return new Ua(e,r)}},$a=class extends Gs{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=Vs.deserialize(t),r=Pa.deserialize(t);return new $a(e,r)}},Ou=class extends Gs{constructor(t,e,r){super(),this.sender=t,this.secondary_signer_addresses=e,this.secondary_signers=r}serialize(t){t.serializeU32AsUleb128(2),this.sender.serialize(t),At(this.secondary_signer_addresses,t),At(this.secondary_signers,t)}static load(t){const e=Ss.deserialize(t),r=zt(t,ge),n=zt(t,Ss);return new Ou(e,r,n)}},Ss=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Cu.load(t);case 1:return Iu.load(t);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${e}`)}}},Cu=class extends Ss{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=Ot.deserialize(t),r=tr.deserialize(t);return new Cu(e,r)}},Iu=class extends Ss{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=Vs.deserialize(t),r=Pa.deserialize(t);return new Iu(e,r)}},mt=class{constructor(t){this.value=t}serialize(t){t.serializeStr(this.value)}static deserialize(t){const e=t.deserializeStr();return new mt(e)}},lt=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return an.load(t);case 1:return mr.load(t);case 2:return on.load(t);case 3:return cn.load(t);case 4:return Or.load(t);case 5:return Du.load(t);case 6:return Zn.load(t);case 7:return un.load(t);case 8:return Gn.load(t);case 9:return Jn.load(t);case 10:return Xn.load(t);default:throw new Error(`Unknown variant index for TypeTag: ${e}`)}}},an=class extends lt{serialize(t){t.serializeU32AsUleb128(0)}static load(t){return new an}},mr=class extends lt{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new mr}},Gn=class extends lt{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new Gn}},Jn=class extends lt{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new Jn}},on=class extends lt{serialize(t){t.serializeU32AsUleb128(2)}static load(t){return new on}},cn=class extends lt{serialize(t){t.serializeU32AsUleb128(3)}static load(t){return new cn}},Xn=class extends lt{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new Xn}},Or=class extends lt{serialize(t){t.serializeU32AsUleb128(4)}static load(t){return new Or}},Du=class extends lt{serialize(t){t.serializeU32AsUleb128(5)}static load(t){return new Du}},Zn=class extends lt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),this.value.serialize(t)}static load(t){const e=lt.deserialize(t);return new Zn(e)}},un=class extends lt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),this.value.serialize(t)}static load(t){const e=Zr.deserialize(t);return new un(e)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===ge.fromHex("0x1").toHexString()}},Zr=class{constructor(t,e,r,n){this.address=t,this.module_name=e,this.name=r,this.type_args=n}static fromString(t){const e=new Yn(t).parseTypeTag();return new Zr(e.value.address,e.value.module_name,e.value.name,e.value.type_args)}serialize(t){this.address.serialize(t),this.module_name.serialize(t),this.name.serialize(t),At(this.type_args,t)}static deserialize(t){const e=ge.deserialize(t),r=mt.deserialize(t),n=mt.deserialize(t),s=zt(t,lt);return new Zr(e,r,n,s)}},Ty=new Zr(ge.fromHex("0x1"),new mt("string"),new mt("String"),[]);function kr(t){throw new xy(t)}function Bh(t){return!!t.match(/\s/)}function Ph(t){return!!t.match(/[_A-Za-z0-9]/g)}function bT(t){return!!t.match(/T\d+/g)}function vT(t,e){const r=t[e];if(r===":"){if(t.slice(e,e+2)==="::")return[["COLON","::"],2];kr("Unrecognized token.")}else{if(r==="<")return[["LT","<"],1];if(r===">")return[["GT",">"],1];if(r===",")return[["COMMA",","],1];if(Bh(r)){let n="";for(let s=e;s<t.length;s+=1){const i=t[s];if(Bh(i))n=`${n}${i}`;else break}return[["SPACE",n],n.length]}else if(Ph(r)){let n="";for(let s=e;s<t.length;s+=1){const i=t[s];if(Ph(i))n=`${n}${i}`;else break}return bT(n)?[["GENERIC",n],n.length]:[["IDENT",n],n.length]}}throw new Error("Unrecognized token.")}function _T(t){let e=0;const r=[];for(;e<t.length;){const[n,s]=vT(t,e);n[0]!=="SPACE"&&r.push(n),e+=s}return r}var Yn=class{constructor(t,e){this.typeTags=[],this.tokens=_T(t),this.typeTags=e||[]}consume(t){const e=this.tokens.shift();(!e||e[1]!==t)&&kr("Invalid type tag.")}parseCommaList(t,e){const r=[];for(this.tokens.length<=0&&kr("Invalid type tag.");this.tokens[0][1]!==t&&(r.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===t||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===t&&e)));)this.tokens.length<=0&&kr("Invalid type tag.");return r}parseTypeTag(){this.tokens.length===0&&kr("Invalid type tag.");const[t,e]=this.tokens.shift();if(e==="u8")return new mr;if(e==="u16")return new Gn;if(e==="u32")return new Jn;if(e==="u64")return new on;if(e==="u128")return new cn;if(e==="u256")return new Xn;if(e==="bool")return new an;if(e==="address")return new Or;if(e==="vector"){this.consume("<");const r=this.parseTypeTag();return this.consume(">"),new Zn(r)}if(e==="string")return new Zr(ge.fromHex("0x1"),new mt("string"),new mt("String"),[]);if(t==="IDENT"&&(e.startsWith("0x")||e.startsWith("0X"))){const r=e;this.consume("::");const[n,s]=this.tokens.shift();n!=="IDENT"&&kr("Invalid type tag."),this.consume("::");const[i,a]=this.tokens.shift();if(i!=="IDENT"&&kr("Invalid type tag."),s==="object"&&a==="Object")return this.tokens.splice(0,3),new Or;let o=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),o=this.parseCommaList(">",!0),this.consume(">"));const u=new Zr(ge.fromHex(r),new mt(s),new mt(a),o);return new un(u)}if(t==="GENERIC"){this.typeTags.length===0&&kr("Can't convert generic type since no typeTags were specified.");const r=parseInt(e.substring(1),10);return new Yn(this.typeTags[r]).parseTypeTag()}throw new Error("Invalid type tag.")}},xy=class extends Error{constructor(t){super(t),this.name="TypeTagParserError"}},Qn=class{constructor(t,e,r,n,s,i,a){this.sender=t,this.sequence_number=e,this.payload=r,this.max_gas_amount=n,this.gas_unit_price=s,this.expiration_timestamp_secs=i,this.chain_id=a}serialize(t){this.sender.serialize(t),t.serializeU64(this.sequence_number),this.payload.serialize(t),t.serializeU64(this.max_gas_amount),t.serializeU64(this.gas_unit_price),t.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(t)}static deserialize(t){const e=ge.deserialize(t),r=t.deserializeU64(),n=Xs.deserialize(t),s=t.deserializeU64(),i=t.deserializeU64(),a=t.deserializeU64(),o=Da.deserialize(t);return new Qn(e,r,n,s,i,a,o)}},Ma=class{constructor(t,e,r){this.code=t,this.ty_args=e,this.args=r}serialize(t){t.serializeBytes(this.code),At(this.ty_args,t),At(this.args,t)}static deserialize(t){const e=t.deserializeBytes(),r=zt(t,lt),n=zt(t,Zt);return new Ma(e,r,n)}},Gr=class{constructor(t,e,r,n){this.module_name=t,this.function_name=e,this.ty_args=r,this.args=n}static natural(t,e,r,n){return new Gr(Yr.fromStr(t),new mt(e),r,n)}static natual(t,e,r,n){return Gr.natural(t,e,r,n)}serialize(t){this.module_name.serialize(t),this.function_name.serialize(t),At(this.ty_args,t),t.serializeU32AsUleb128(this.args.length),this.args.forEach(e=>{t.serializeBytes(e)})}static deserialize(t){const e=Yr.deserialize(t),r=mt.deserialize(t),n=zt(t,lt),s=t.deserializeUleb128AsU32(),i=[];for(let o=0;o<s;o+=1)i.push(t.deserializeBytes());const a=i;return new Gr(e,r,n,a)}},Nu=class{constructor(t){this.transaction_payload=t}serialize(t){t.serializeU32AsUleb128(0),this.transaction_payload.serialize(t)}static deserialize(t){return t.deserializeUleb128AsU32(),new Nu(Gr.deserialize(t))}},Lu=class{constructor(t,e){this.multisig_address=t,this.transaction_payload=e}serialize(t){this.multisig_address.serialize(t),this.transaction_payload===void 0?t.serializeBool(!1):(t.serializeBool(!0),this.transaction_payload.serialize(t))}static deserialize(t){const e=ge.deserialize(t),r=t.deserializeBool();let n;return r&&(n=Nu.deserialize(t)),new Lu(e,n)}},Ry=class{constructor(t){this.code=t}serialize(t){t.serializeBytes(this.code)}static deserialize(t){const e=t.deserializeBytes();return new Ry(e)}},Yr=class{constructor(t,e){this.address=t,this.name=e}static fromStr(t){const e=t.split("::");if(e.length!==2)throw new Error("Invalid module id.");return new Yr(ge.fromHex(new V(e[0])),new mt(e[1]))}serialize(t){this.address.serialize(t),this.name.serialize(t)}static deserialize(t){const e=ge.deserialize(t),r=mt.deserialize(t);return new Yr(e,r)}},ET=class{serialize(t){throw new Error("Not implemented.")}static deserialize(t){throw new Error("Not implemented.")}},ST=class{serialize(t){throw new Error("Not implmented.")}static deserialize(t){throw new Error("Not implmented.")}},Js=class{constructor(t,e){this.raw_txn=t,this.authenticator=e}serialize(t){this.raw_txn.serialize(t),this.authenticator.serialize(t)}static deserialize(t){const e=Qn.deserialize(t),r=Gs.deserialize(t);return new Js(e,r)}},ky=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Oa.load(t);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${e}`)}}},Oa=class extends ky{constructor(t,e){super(),this.raw_txn=t,this.secondary_signer_addresses=e}serialize(t){t.serializeU32AsUleb128(0),this.raw_txn.serialize(t),At(this.secondary_signer_addresses,t)}static load(t){const e=Qn.deserialize(t),r=zt(t,ge);return new Oa(e,r)}},Xs=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Ca.load(t);case 2:return Ia.load(t);case 3:return qu.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},Ca=class extends Xs{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){const e=Ma.deserialize(t);return new Ca(e)}},Ia=class extends Xs{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),this.value.serialize(t)}static load(t){const e=Gr.deserialize(t);return new Ia(e)}},qu=class extends Xs{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const e=Lu.deserialize(t);return new qu(e)}},Da=class{constructor(t){this.value=t}serialize(t){t.serializeU8(this.value)}static deserialize(t){const e=t.deserializeU8();return new Da(e)}},Zt=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Na.load(t);case 1:return Ha.load(t);case 2:return Fa.load(t);case 3:return Ka.load(t);case 4:return ja.load(t);case 5:return Wa.load(t);case 6:return La.load(t);case 7:return qa.load(t);case 8:return za.load(t);default:throw new Error(`Unknown variant index for TransactionArgument: ${e}`)}}},Na=class extends Zt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),t.serializeU8(this.value)}static load(t){const e=t.deserializeU8();return new Na(e)}},La=class extends Zt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),t.serializeU16(this.value)}static load(t){const e=t.deserializeU16();return new La(e)}},qa=class extends Zt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),t.serializeU32(this.value)}static load(t){const e=t.deserializeU32();return new qa(e)}},Ha=class extends Zt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(1),t.serializeU64(this.value)}static load(t){const e=t.deserializeU64();return new Ha(e)}},Fa=class extends Zt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),t.serializeU128(this.value)}static load(t){const e=t.deserializeU128();return new Fa(e)}},za=class extends Zt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(8),t.serializeU256(this.value)}static load(t){const e=t.deserializeU256();return new za(e)}},Ka=class extends Zt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const e=ge.deserialize(t);return new Ka(e)}},ja=class extends Zt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(4),t.serializeBytes(this.value)}static load(t){const e=t.deserializeBytes();return new ja(e)}},Wa=class extends Zt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(5),t.serializeBool(this.value)}static load(t){const e=t.deserializeBool();return new Wa(e)}},By=class{getHashSalt(){const e=Cn.create();return e.update("APTOS::Transaction"),e.digest()}static deserialize(e){const r=e.deserializeUleb128AsU32();switch(r){case 0:return Hu.load(e);default:throw new Error(`Unknown variant index for Transaction: ${r}`)}}},Hu=class extends By{constructor(t){super(),this.value=t}hash(){const t=Cn.create();return t.update(this.getHashSalt()),t.update(Nr(this)),t.digest()}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){return new Hu(Js.deserialize(t))}},Zs=class{constructor(t){this.name=t}serialize(t){t.serializeStr(this.name)}static deserialize(t){const e=t.deserializeStr();return new Zs(e)}},Ys=class{constructor(t,e){this.name=t,this.type_tag=e}serialize(t){t.serializeStr(this.name),this.type_tag.serialize(t)}static deserialize(t){const e=t.deserializeStr(),r=lt.deserialize(t);return new Ys(e,r)}},Va=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Ga.load(t);case 1:return Nn.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},Ga=class extends Va{constructor(t,e,r,n,s){super(),this.name=t,this.doc=e,this.code=r,this.ty_args=n,this.args=s}serialize(t){t.serializeU32AsUleb128(0),t.serializeStr(this.name),t.serializeStr(this.doc),t.serializeBytes(this.code),At(this.ty_args,t),At(this.args,t)}static load(t){const e=t.deserializeStr(),r=t.deserializeStr(),n=t.deserializeBytes(),s=zt(t,Zs),i=zt(t,Ys);return new Ga(e,r,n,s,i)}},Nn=class extends Va{constructor(t,e,r,n,s){super(),this.name=t,this.module_name=e,this.doc=r,this.ty_args=n,this.args=s}serialize(t){t.serializeU32AsUleb128(1),t.serializeStr(this.name),this.module_name.serialize(t),t.serializeStr(this.doc),At(this.ty_args,t),At(this.args,t)}static load(t){const e=t.deserializeStr(),r=Yr.deserialize(t),n=t.deserializeStr(),s=zt(t,Zs),i=zt(t,Ys);return new Nn(e,r,n,s,i)}},vn=class{constructor(t){if(t.length!==vn.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=t}static fromMultiEd25519PublicKey(t){const e=t.toBytes(),r=new Uint8Array(e.length+1);r.set(e),r.set([vn.MULTI_ED25519_SCHEME],e.length);const n=Cn.create();return n.update(r),new vn(n.digest())}static fromEd25519PublicKey(t){const e=t.value,r=new Uint8Array(e.length+1);r.set(e),r.set([vn.ED25519_SCHEME],e.length);const n=Cn.create();return n.update(r),new vn(n.digest())}derivedAddress(){return V.fromUint8Array(this.bytes)}},Qr=vn;Qr.LENGTH=32;Qr.MULTI_ED25519_SCHEME=1;Qr.ED25519_SCHEME=0;Qr.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var AT=class{constructor(t,e,r,n,s,i,a){this.accountAddress=t,this.moduleName=e,this.structName=r,this.sequenceNumber=n,this.originator=s,this.currentAuthKey=i,this.newPublicKey=a}serialize(t){this.accountAddress.serialize(t),t.serializeStr(this.moduleName),t.serializeStr(this.structName),t.serializeU64(this.sequenceNumber),this.originator.serialize(t),this.currentAuthKey.serialize(t),t.serializeBytes(this.newPublicKey)}},xi=class{static fromAptosAccountObject(t){return new xi(V.ensure(t.privateKeyHex).toUint8Array(),t.address)}static isValidPath(t){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(t)}static fromDerivePath(t,e){if(!xi.isValidPath(t))throw new Error("Invalid derivation path");const r=e.trim().split(/\s+/).map(s=>s.toLowerCase()).join(" "),{key:n}=YA(t,vu(Hp(r)));return new xi(n)}constructor(t,e){t?this.signingKey=ri.sign.keyPair.fromSeed(t.slice(0,32)):this.signingKey=ri.sign.keyPair(),this.accountAddress=V.ensure(e||this.authKey().hex())}address(){return this.accountAddress}authKey(){const t=new Ot(this.signingKey.publicKey);return Qr.fromEd25519PublicKey(t).derivedAddress()}static getResourceAccountAddress(t,e){const r=Nr(ge.fromHex(t)),n=new Uint8Array([...r,...e,Qr.DERIVE_RESOURCE_ACCOUNT_SCHEME]),s=Cn.create();return s.update(n),V.fromUint8Array(s.digest())}pubKey(){return V.fromUint8Array(this.signingKey.publicKey)}signBuffer(t){const e=ri.sign.detached(t,this.signingKey.secretKey);return V.fromUint8Array(e)}signHexString(t){const e=V.ensure(t).toUint8Array();return this.signBuffer(e)}verifySignature(t,e){const r=V.ensure(t).toUint8Array(),n=V.ensure(e).toUint8Array();return ri.sign.detached.verify(r,n,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:V.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}},Pc=xi;ae([Ba()],Pc.prototype,"authKey");var TT=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,xT=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,RT=`
    query getAccountCoinsData($owner_address: String, $offset: Int, $limit: Int) {
  current_coin_balances(
    where: {owner_address: {_eq: $owner_address}}
    offset: $offset
    limit: $limit
  ) {
    amount
    coin_type
    coin_info {
      name
      decimals
      symbol
    }
  }
}
    `,kT=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${TT}
${xT}`,BT=`
    query getAccountTokensCount($owner_address: String) {
  current_token_ownerships_aggregate(
    where: {owner_address: {_eq: $owner_address}, amount: {_gt: "0"}}
  ) {
    aggregate {
      count
    }
  }
}
    `,PT=`
    query getAccountTransactionsCount($address: String) {
  move_resources_aggregate(
    where: {address: {_eq: $address}}
    distinct_on: transaction_version
  ) {
    aggregate {
      count
    }
  }
}
    `,UT=`
    query getAccountTransactionsData($address: String, $limit: Int, $offset: Int) {
  move_resources(
    where: {address: {_eq: $address}}
    order_by: {transaction_version: desc}
    distinct_on: transaction_version
    limit: $limit
    offset: $offset
  ) {
    transaction_version
  }
}
    `,$T=`
    query getCurrentDelegatorBalancesCount($poolAddress: String) {
  current_delegator_balances_aggregate(
    where: {pool_type: {_eq: "active_shares"}, pool_address: {_eq: $poolAddress}, amount: {_gt: "0"}}
    distinct_on: delegator_address
  ) {
    aggregate {
      count
    }
  }
}
    `,MT=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,OT=`
    query getIndexerLedgerInfo {
  ledger_infos {
    chain_id
  }
}
    `,CT=`
    query getTokenActivities($idHash: String!, $offset: Int, $limit: Int) {
  token_activities(
    where: {token_data_id_hash: {_eq: $idHash}}
    order_by: {transaction_version: desc}
    offset: $offset
    limit: $limit
  ) {
    creator_address
    collection_name
    name
    token_data_id_hash
    collection_data_id_hash
    from_address
    to_address
    transaction_version
    transaction_timestamp
    property_version
    transfer_type
    event_sequence_number
    token_amount
  }
}
    `,IT=`
    query getTokenActivitiesCount($token_id: String) {
  token_activities_aggregate(where: {token_data_id_hash: {_eq: $token_id}}) {
    aggregate {
      count
    }
  }
}
    `,DT=`
    query getTokenData($token_id: String) {
  current_token_datas(where: {token_data_id_hash: {_eq: $token_id}}) {
    token_data_id_hash
    name
    collection_name
    creator_address
    default_properties
    largest_property_version
    maximum
    metadata_uri
    payee_address
    royalty_points_denominator
    royalty_points_numerator
    supply
  }
}
    `,NT=`
    query getTokenOwnersData($token_id: String, $property_version: numeric) {
  current_token_ownerships(
    where: {token_data_id_hash: {_eq: $token_id}, property_version: {_eq: $property_version}}
  ) {
    owner_address
  }
}
    `,LT=`
    query getTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,qT=`
    query getUserTransactions($limit: Int, $start_version: bigint, $offset: Int) {
  user_transactions(
    limit: $limit
    order_by: {version: desc}
    where: {version: {_lte: $start_version}}
    offset: $offset
  ) {
    version
  }
}
    `,Qt=class{constructor(t){this.endpoint=t}static validateAddress(t){if(t.length<66)throw new Error("Address needs to be 66 chars long.")}async queryIndexer(t){const{data:e}=await _s.post(this.endpoint,t);if(e.errors)throw new Error(`Indexer data error ${JSON.stringify(e.errors,null," ")}`);return e.data}async getIndexerLedgerInfo(){const t={query:OT};return this.queryIndexer(t)}async getAccountNFTs(t,e){const r=V.ensure(t).hex();Qt.validateAddress(r);const n={query:kT,variables:{address:r,offset:e==null?void 0:e.offset,limit:e==null?void 0:e.limit}};return this.queryIndexer(n)}async getTokenActivities(t,e){const r={query:CT,variables:{idHash:t,offset:e==null?void 0:e.offset,limit:e==null?void 0:e.limit}};return this.queryIndexer(r)}async getAccountCoinsData(t,e){const r=V.ensure(t).hex();Qt.validateAddress(r);const n={query:RT,variables:{owner_address:r,offset:e==null?void 0:e.offset,limit:e==null?void 0:e.limit}};return this.queryIndexer(n)}async getAccountTokensCount(t){const e=V.ensure(t).hex();Qt.validateAddress(e);const r={query:BT,variables:{owner_address:e}};return this.queryIndexer(r)}async getAccountTransactionsCount(t){const e=V.ensure(t).hex();Qt.validateAddress(e);const r={query:PT,variables:{address:e}};return this.queryIndexer(r)}async getAccountTransactionsData(t,e){const r=V.ensure(t).hex();Qt.validateAddress(r);const n={query:UT,variables:{address:r,offset:e==null?void 0:e.offset,limit:e==null?void 0:e.limit}};return this.queryIndexer(n)}async getDelegatedStakingActivities(t,e){const r=V.ensure(t).hex(),n=V.ensure(e).hex();Qt.validateAddress(r),Qt.validateAddress(n);const s={query:MT,variables:{delegatorAddress:r,poolAddress:n}};return this.queryIndexer(s)}async getTokenActivitiesCount(t){const e={query:IT,variables:{token_id:t}};return this.queryIndexer(e)}async getTokenData(t){const e={query:DT,variables:{token_id:t}};return this.queryIndexer(e)}async getTokenOwnersData(t,e){const r={query:NT,variables:{token_id:t,property_version:e}};return this.queryIndexer(r)}async getTopUserTransactions(t){const e={query:LT,variables:{limit:t}};return this.queryIndexer(e)}async getUserTransactions(t,e){const r={query:qT,variables:{start_version:t,offset:e==null?void 0:e.offset,limit:e==null?void 0:e.limit}};return this.queryIndexer(r)}async getCurrentDelegatorBalancesCount(t){const e=V.ensure(t).hex();Qt.validateAddress(e);const r={query:$T,variables:{poolAddress:e}};return this.queryIndexer(r)}},HT={};ka(HT,{$AccountData:()=>nx,$AccountSignature:()=>sx,$AccountSignature_Ed25519Signature:()=>ix,$AccountSignature_MultiEd25519Signature:()=>ax,$Address:()=>ox,$AptosError:()=>cx,$AptosErrorCode:()=>ux,$Block:()=>lx,$BlockMetadataTransaction:()=>hx,$DecodedTableData:()=>dx,$DeleteModule:()=>px,$DeleteResource:()=>yx,$DeleteTableItem:()=>gx,$DeletedTableData:()=>fx,$DirectWriteSet:()=>mx,$Ed25519Signature:()=>wx,$EncodeSubmissionRequest:()=>bx,$EntryFunctionId:()=>vx,$EntryFunctionPayload:()=>_x,$Event:()=>Ex,$EventGuid:()=>Sx,$GasEstimation:()=>Ax,$GenesisPayload:()=>Tx,$GenesisPayload_WriteSetPayload:()=>xx,$GenesisTransaction:()=>Rx,$HashValue:()=>kx,$HealthCheckSuccess:()=>Bx,$HexEncodedBytes:()=>Px,$IdentifierWrapper:()=>Ux,$IndexResponse:()=>$x,$ModuleBundlePayload:()=>Mx,$MoveAbility:()=>Ox,$MoveFunction:()=>Cx,$MoveFunctionGenericTypeParam:()=>Ix,$MoveFunctionVisibility:()=>Dx,$MoveModule:()=>Nx,$MoveModuleBytecode:()=>Lx,$MoveModuleId:()=>qx,$MoveResource:()=>Hx,$MoveScriptBytecode:()=>Fx,$MoveStruct:()=>zx,$MoveStructField:()=>Kx,$MoveStructGenericTypeParam:()=>jx,$MoveStructTag:()=>Wx,$MoveStructValue:()=>Vx,$MoveType:()=>Gx,$MoveValue:()=>Jx,$MultiAgentSignature:()=>Xx,$MultiEd25519Signature:()=>Zx,$MultisigPayload:()=>Yx,$MultisigTransactionPayload:()=>Qx,$PendingTransaction:()=>e2,$RawTableItemRequest:()=>t2,$RoleType:()=>r2,$ScriptPayload:()=>n2,$ScriptWriteSet:()=>s2,$StateCheckpointTransaction:()=>i2,$StateKeyWrapper:()=>a2,$SubmitTransactionRequest:()=>o2,$TableItemRequest:()=>c2,$Transaction:()=>u2,$TransactionPayload:()=>y2,$TransactionPayload_EntryFunctionPayload:()=>g2,$TransactionPayload_ModuleBundlePayload:()=>m2,$TransactionPayload_MultisigPayload:()=>w2,$TransactionPayload_ScriptPayload:()=>b2,$TransactionSignature:()=>E2,$TransactionSignature_Ed25519Signature:()=>S2,$TransactionSignature_MultiAgentSignature:()=>A2,$TransactionSignature_MultiEd25519Signature:()=>T2,$Transaction_BlockMetadataTransaction:()=>l2,$Transaction_GenesisTransaction:()=>h2,$Transaction_PendingTransaction:()=>d2,$Transaction_StateCheckpointTransaction:()=>f2,$Transaction_UserTransaction:()=>p2,$TransactionsBatchSingleSubmissionFailure:()=>v2,$TransactionsBatchSubmissionResult:()=>_2,$U128:()=>x2,$U256:()=>R2,$U64:()=>k2,$UserTransaction:()=>B2,$VersionedEvent:()=>P2,$ViewRequest:()=>U2,$WriteModule:()=>$2,$WriteResource:()=>M2,$WriteSet:()=>O2,$WriteSetChange:()=>D2,$WriteSetChange_DeleteModule:()=>N2,$WriteSetChange_DeleteResource:()=>L2,$WriteSetChange_DeleteTableItem:()=>q2,$WriteSetChange_WriteModule:()=>H2,$WriteSetChange_WriteResource:()=>F2,$WriteSetChange_WriteTableItem:()=>z2,$WriteSetPayload:()=>K2,$WriteSet_DirectWriteSet:()=>C2,$WriteSet_ScriptWriteSet:()=>I2,$WriteTableItem:()=>j2,AccountsService:()=>Iy,ApiError:()=>As,AptosErrorCode:()=>Ky,AptosGeneratedClient:()=>zy,BaseHttpRequest:()=>Py,BlocksService:()=>Dy,CancelError:()=>Uy,CancelablePromise:()=>$y,EventsService:()=>Ny,GeneralService:()=>Ly,MoveFunctionVisibility:()=>jy,OpenAPI:()=>rx,RoleType:()=>Wy,TablesService:()=>qy,TransactionsService:()=>Hy,ViewService:()=>Fy});var Py=class{constructor(t){this.config=t}},As=class extends Error{constructor(t,e,r){super(r),this.name="ApiError",this.url=e.url,this.status=e.status,this.statusText=e.statusText,this.body=e.body,this.request=t}},Uy=class extends Error{constructor(t){super(t),this.name="CancelError"}get isCancelled(){return!0}},$y=class{constructor(t){this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this._cancelHandlers=[],this._promise=new Promise((e,r)=>{this._resolve=e,this._reject=r;const n=a=>{var o;this._isResolved||this._isRejected||this._isCancelled||(this._isResolved=!0,(o=this._resolve)==null||o.call(this,a))},s=a=>{var o;this._isResolved||this._isRejected||this._isCancelled||(this._isRejected=!0,(o=this._reject)==null||o.call(this,a))},i=a=>{this._isResolved||this._isRejected||this._isCancelled||this._cancelHandlers.push(a)};return Object.defineProperty(i,"isResolved",{get:()=>this._isResolved}),Object.defineProperty(i,"isRejected",{get:()=>this._isRejected}),Object.defineProperty(i,"isCancelled",{get:()=>this._isCancelled}),t(n,s,i)})}then(t,e){return this._promise.then(t,e)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}cancel(){var t;if(!(this._isResolved||this._isRejected||this._isCancelled)){if(this._isCancelled=!0,this._cancelHandlers.length)try{for(const e of this._cancelHandlers)e()}catch(e){console.warn("Cancellation threw an error",e);return}this._cancelHandlers.length=0,(t=this._reject)==null||t.call(this,new Uy("Request aborted"))}}get isCancelled(){return this._isCancelled}},My=class{constructor(t=new Map){this.jar=t}setCookie(t,e){var r;const n=t.origin.toLowerCase();this.jar.has(n)||this.jar.set(n,[]);const s=My.parse(e);this.jar.set(n,[...((r=this.jar.get(n))==null?void 0:r.filter(i=>i.name!==s.name))||[],s])}getCookies(t){var e;const r=t.origin.toLowerCase();return this.jar.get(r)?((e=this.jar.get(r))==null?void 0:e.filter(n=>!n.expires||n.expires>new Date))||[]:[]}static parse(t){if(typeof t!="string")throw new Error("argument str must be a string");const e=t.split(";").map(n=>n.trim());let r;if(e.length>0){const[n,s]=e[0].split("=");if(!n||!s)throw new Error("Invalid cookie");r={name:n,value:s}}else throw new Error("Invalid cookie");return e.slice(1).forEach(n=>{const[s,i]=n.split("=");if(!s.trim())throw new Error("Invalid cookie");const a=s.toLowerCase(),o=(i==null?void 0:i.charAt(0))==="'"||(i==null?void 0:i.charAt(0))==='"'?i==null?void 0:i.slice(1,-1):i;if(a==="expires"&&(r.expires=new Date(o)),a==="path"&&(r.path=o),a==="samesite"){if(o!=="Lax"&&o!=="None"&&o!=="Strict")throw new Error("Invalid cookie SameSite value");r.sameSite=o}a==="secure"&&(r.secure=!0)}),r}},Oy=new My;_s.interceptors.response.use(t=>(Array.isArray(t.headers["set-cookie"])&&t.headers["set-cookie"].forEach(e=>{Oy.setCookie(new URL(t.config.url),e)}),t));_s.interceptors.request.use(function(t){const e=Oy.getCookies(new URL(t.url));return(e==null?void 0:e.length)>0&&t.headers&&(t.headers.cookie=e.map(r=>`${r.name}=${r.value}`).join("; ")),t});var Fu=t=>t!=null,Ja=t=>typeof t=="string",rc=t=>Ja(t)&&t!=="",Cy=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),FT=t=>t instanceof wy,zT=t=>t>=200&&t<300,KT=t=>btoa(t),jT=t=>{const e=[],r=(s,i)=>{e.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(i))}`)},n=(s,i)=>{Fu(i)&&(Array.isArray(i)?i.forEach(a=>{n(s,a)}):typeof i=="object"?Object.entries(i).forEach(([a,o])=>{n(`${s}[${a}]`,o)}):r(s,i))};return Object.entries(t).forEach(([s,i])=>{n(s,i)}),e.length>0?`?${e.join("&")}`:""},WT=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,n=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(i,a)=>{var o;return(o=e.path)!=null&&o.hasOwnProperty(a)?r(String(e.path[a])):i}),s=`${t.BASE}${n}`;return e.query?`${s}${jT(e.query)}`:s},VT=t=>{if(t.formData){const e=new wy,r=(n,s)=>{Ja(s)||Cy(s)?e.append(n,s):e.append(n,JSON.stringify(s))};return Object.entries(t.formData).filter(([n,s])=>Fu(s)).forEach(([n,s])=>{Array.isArray(s)?s.forEach(i=>r(n,i)):r(n,s)}),e}},li=async(t,e)=>typeof e=="function"?e(t):e,GT=async(t,e,r)=>{const n=await li(e,t.TOKEN),s=await li(e,t.USERNAME),i=await li(e,t.PASSWORD),a=await li(e,t.HEADERS),o=typeof(r==null?void 0:r.getHeaders)=="function"&&(r==null?void 0:r.getHeaders())||{},u=Object.entries({Accept:"application/json",...a,...e.headers,...o}).filter(([f,p])=>Fu(p)).reduce((f,[p,d])=>({...f,[p]:String(d)}),{});if(rc(n)&&(u.Authorization=`Bearer ${n}`),rc(s)&&rc(i)){const f=KT(`${s}:${i}`);u.Authorization=`Basic ${f}`}return e.body&&(e.mediaType?u["Content-Type"]=e.mediaType:Cy(e.body)?u["Content-Type"]=e.body.type||"application/octet-stream":Ja(e.body)?u["Content-Type"]="text/plain":FT(e.body)||(u["Content-Type"]="application/json")),u},JT=t=>{if(t.body)return t.body},XT=async(t,e,r,n,s,i,a)=>{const o=_s.CancelToken.source(),u={url:r,headers:i,data:n??s,method:e.method,withCredentials:t.WITH_CREDENTIALS,cancelToken:o.token};Object.keys(t.HEADERS||{}).filter(p=>p.toLowerCase()==="accept").map(p=>t.HEADERS[p]).includes("application/x-bcs")&&(u.responseType="arraybuffer"),a(()=>o.cancel("The user aborted a request."));try{return await _s.request(u)}catch(p){const d=p;if(d.response)return d.response;throw p}},ZT=(t,e)=>{if(e){const r=t.headers[e];if(Ja(r))return r}},YT=t=>{if(t.status!==204)return t.data},QT=(t,e)=>{const n={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(n)throw new As(t,e,n);if(!e.ok)throw new As(t,e,"Generic Error")},ex=(t,e)=>new $y(async(r,n,s)=>{try{const i=WT(t,e),a=VT(e),o=JT(e),u=await GT(t,e,a);if(!s.isCancelled){const f=await XT(t,e,i,o,a,u,s),p=YT(f),d=ZT(f,e.responseHeader),A={url:i,ok:zT(f.status),status:f.status,statusText:f.statusText,body:d??p};QT(e,A);const T=A.body;try{T.__headers=f.headers}catch{}r(T)}}catch(i){n(i)}}),tx=class extends Py{constructor(t){super(t)}request(t){return ex(this.config,t)}},Iy=class{constructor(t){this.httpRequest=t}getAccount(t,e){return this.httpRequest.request({method:"GET",url:"/accounts/{address}",path:{address:t},query:{ledger_version:e}})}getAccountResources(t,e,r,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resources",path:{address:t},query:{ledger_version:e,start:r,limit:n}})}getAccountModules(t,e,r,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/modules",path:{address:t},query:{ledger_version:e,start:r,limit:n}})}getAccountResource(t,e,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resource/{resource_type}",path:{address:t,resource_type:e},query:{ledger_version:r}})}getAccountModule(t,e,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/module/{module_name}",path:{address:t,module_name:e},query:{ledger_version:r}})}},Dy=class{constructor(t){this.httpRequest=t}getBlockByHeight(t,e){return this.httpRequest.request({method:"GET",url:"/blocks/by_height/{block_height}",path:{block_height:t},query:{with_transactions:e}})}getBlockByVersion(t,e){return this.httpRequest.request({method:"GET",url:"/blocks/by_version/{version}",path:{version:t},query:{with_transactions:e}})}},Ny=class{constructor(t){this.httpRequest=t}getEventsByCreationNumber(t,e,r,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{creation_number}",path:{address:t,creation_number:e},query:{start:r,limit:n}})}getEventsByEventHandle(t,e,r,n,s){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{event_handle}/{field_name}",path:{address:t,event_handle:e,field_name:r},query:{start:n,limit:s}})}},Ly=class{constructor(t){this.httpRequest=t}spec(){return this.httpRequest.request({method:"GET",url:"/spec"})}healthy(t){return this.httpRequest.request({method:"GET",url:"/-/healthy",query:{duration_secs:t}})}getLedgerInfo(){return this.httpRequest.request({method:"GET",url:"/"})}},qy=class{constructor(t){this.httpRequest=t}getTableItem(t,e,r){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/item",path:{table_handle:t},query:{ledger_version:r},body:e,mediaType:"application/json"})}getRawTableItem(t,e,r){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/raw_item",path:{table_handle:t},query:{ledger_version:r},body:e,mediaType:"application/json"})}},Hy=class{constructor(t){this.httpRequest=t}getTransactions(t,e){return this.httpRequest.request({method:"GET",url:"/transactions",query:{start:t,limit:e}})}submitTransaction(t){return this.httpRequest.request({method:"POST",url:"/transactions",body:t,mediaType:"application/json"})}getTransactionByHash(t){return this.httpRequest.request({method:"GET",url:"/transactions/by_hash/{txn_hash}",path:{txn_hash:t}})}getTransactionByVersion(t){return this.httpRequest.request({method:"GET",url:"/transactions/by_version/{txn_version}",path:{txn_version:t}})}getAccountTransactions(t,e,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/transactions",path:{address:t},query:{start:e,limit:r}})}submitBatchTransactions(t){return this.httpRequest.request({method:"POST",url:"/transactions/batch",body:t,mediaType:"application/json"})}simulateTransaction(t,e,r,n){return this.httpRequest.request({method:"POST",url:"/transactions/simulate",query:{estimate_max_gas_amount:e,estimate_gas_unit_price:r,estimate_prioritized_gas_unit_price:n},body:t,mediaType:"application/json"})}encodeSubmission(t){return this.httpRequest.request({method:"POST",url:"/transactions/encode_submission",body:t,mediaType:"application/json"})}estimateGasPrice(){return this.httpRequest.request({method:"GET",url:"/estimate_gas_price"})}},Fy=class{constructor(t){this.httpRequest=t}view(t,e){return this.httpRequest.request({method:"POST",url:"/view",query:{ledger_version:e},body:t,mediaType:"application/json"})}},zy=class{constructor(t,e=tx){var r,n,s,i;this.request=new e({BASE:(r=t==null?void 0:t.BASE)!=null?r:"/v1",VERSION:(n=t==null?void 0:t.VERSION)!=null?n:"1.2.0",WITH_CREDENTIALS:(s=t==null?void 0:t.WITH_CREDENTIALS)!=null?s:!1,CREDENTIALS:(i=t==null?void 0:t.CREDENTIALS)!=null?i:"include",TOKEN:t==null?void 0:t.TOKEN,USERNAME:t==null?void 0:t.USERNAME,PASSWORD:t==null?void 0:t.PASSWORD,HEADERS:t==null?void 0:t.HEADERS,ENCODE_PATH:t==null?void 0:t.ENCODE_PATH}),this.accounts=new Iy(this.request),this.blocks=new Dy(this.request),this.events=new Ny(this.request),this.general=new Ly(this.request),this.tables=new qy(this.request),this.transactions=new Hy(this.request),this.view=new Fy(this.request)}},rx={BASE:"/v1",VERSION:"1.2.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},Ky=(t=>(t.ACCOUNT_NOT_FOUND="account_not_found",t.RESOURCE_NOT_FOUND="resource_not_found",t.MODULE_NOT_FOUND="module_not_found",t.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",t.VERSION_NOT_FOUND="version_not_found",t.TRANSACTION_NOT_FOUND="transaction_not_found",t.TABLE_ITEM_NOT_FOUND="table_item_not_found",t.BLOCK_NOT_FOUND="block_not_found",t.VERSION_PRUNED="version_pruned",t.BLOCK_PRUNED="block_pruned",t.INVALID_INPUT="invalid_input",t.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",t.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",t.VM_ERROR="vm_error",t.HEALTH_CHECK_FAILED="health_check_failed",t.MEMPOOL_IS_FULL="mempool_is_full",t.INTERNAL_ERROR="internal_error",t.WEB_FRAMEWORK_ERROR="web_framework_error",t.BCS_NOT_SUPPORTED="bcs_not_supported",t.API_DISABLED="api_disabled",t))(Ky||{}),jy=(t=>(t.PRIVATE="private",t.PUBLIC="public",t.FRIEND="friend",t))(jy||{}),Wy=(t=>(t.VALIDATOR="validator",t.FULL_NODE="full_node",t))(Wy||{}),nx={description:`Account data

    A simplified version of the onchain Account resource`,properties:{sequence_number:{type:"U64",isRequired:!0},authentication_key:{type:"HexEncodedBytes",isRequired:!0}}},sx={type:"one-of",description:`Account signature scheme

    The account signature scheme allows you to have two types of accounts:

    1. A single Ed25519 key account, one private key
    2. A k-of-n multi-Ed25519 key account, multiple private keys, such that k-of-n must sign a transaction.`,contains:[{type:"AccountSignature_Ed25519Signature"},{type:"AccountSignature_MultiEd25519Signature"}]},ix={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},ax={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},ox={type:"string",description:`A hex encoded 32 byte Aptos account address.

    This is represented in a string as a 64 character hex string, sometimes
    shortened by stripping leading 0s, and adding a 0x.

    For example, address 0x0000000000000000000000000000000000000000000000000000000000000001 is represented as 0x1.
    `,format:"hex"},cx={description:`This is the generic struct we use for all API errors, it contains a string
    message and an Aptos API specific error code.`,properties:{message:{type:"string",description:"A message describing the error",isRequired:!0},error_code:{type:"AptosErrorCode",isRequired:!0},vm_error_code:{type:"number",description:"A code providing VM error details when submitting transactions to the VM",format:"uint64"}}},ux={type:"Enum"},lx={description:`A Block with or without transactions

    This contains the information about a transactions along with
    associated transactions if requested`,properties:{block_height:{type:"U64",isRequired:!0},block_hash:{type:"HashValue",isRequired:!0},block_timestamp:{type:"U64",isRequired:!0},first_version:{type:"U64",isRequired:!0},last_version:{type:"U64",isRequired:!0},transactions:{type:"array",contains:{type:"Transaction"}}}},hx={description:`A block metadata transaction

    This signifies the beginning of a block, and contains information
    about the specific block`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},id:{type:"HashValue",isRequired:!0},epoch:{type:"U64",isRequired:!0},round:{type:"U64",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0},previous_block_votes_bitvec:{type:"array",contains:{type:"number",format:"uint8"},isRequired:!0},proposer:{type:"Address",isRequired:!0},failed_proposer_indices:{type:"array",contains:{type:"number",format:"uint32"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},dx={description:"Decoded table data",properties:{key:{description:"Key of table in JSON",properties:{},isRequired:!0},key_type:{type:"string",description:"Type of key",isRequired:!0},value:{description:"Value of table in JSON",properties:{},isRequired:!0},value_type:{type:"string",description:"Type of value",isRequired:!0}}},fx={description:"Deleted table data",properties:{key:{description:"Deleted key",properties:{},isRequired:!0},key_type:{type:"string",description:"Deleted key type",isRequired:!0}}},px={description:"Delete a module",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},module:{type:"MoveModuleId",isRequired:!0}}},yx={description:"Delete a resource",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},resource:{type:"MoveStructTag",isRequired:!0}}},gx={description:"Delete a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DeletedTableData"}}},mx={properties:{changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},wx={description:"A single Ed25519 signature",properties:{public_key:{type:"HexEncodedBytes",isRequired:!0},signature:{type:"HexEncodedBytes",isRequired:!0}}},bx={description:"Request to encode a submission",properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},secondary_signers:{type:"array",contains:{type:"Address"}}}},vx={type:"string",description:"Entry function id is string representation of a entry function defined on-chain.\n\n    Format: `{address}::{module name}::{function name}`\n\n    Both `module name` and `function name` are case-sensitive.\n    "},_x={description:"Payload which runs a single entry function",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},Ex={description:"An event from a transaction",properties:{guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},Sx={properties:{creation_number:{type:"U64",isRequired:!0},account_address:{type:"Address",isRequired:!0}}},Ax={description:"Struct holding the outputs of the estimate gas API",properties:{deprioritized_gas_estimate:{type:"number",description:"The deprioritized estimate for the gas unit price",format:"uint64"},gas_estimate:{type:"number",description:"The current estimate for the gas unit price",isRequired:!0,format:"uint64"},prioritized_gas_estimate:{type:"number",description:"The prioritized estimate for the gas unit price",format:"uint64"}}},Tx={type:"one-of",description:"The writeset payload of the Genesis transaction",contains:[{type:"GenesisPayload_WriteSetPayload"}]},xx={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteSetPayload"}]},Rx={description:`The genesis transaction

    This only occurs at the genesis transaction (version 0)`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},payload:{type:"GenesisPayload",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},kx={type:"string"},Bx={description:"Representation of a successful healthcheck",properties:{message:{type:"string",isRequired:!0}}},Px={type:"string",description:"All bytes (Vec<u8>) data is represented as hex-encoded string prefixed with `0x` and fulfilled with\n    two hex digits per byte.\n\n    Unlike the `Address` type, HexEncodedBytes will not trim any zeros.\n    ",format:"hex"},Ux={type:"string"},$x={description:`The struct holding all data returned to the client by the
    index endpoint (i.e., GET "/").  Only for responding in JSON`,properties:{chain_id:{type:"number",description:"Chain ID of the current chain",isRequired:!0,format:"uint8"},epoch:{type:"U64",isRequired:!0},ledger_version:{type:"U64",isRequired:!0},oldest_ledger_version:{type:"U64",isRequired:!0},ledger_timestamp:{type:"U64",isRequired:!0},node_role:{type:"RoleType",isRequired:!0},oldest_block_height:{type:"U64",isRequired:!0},block_height:{type:"U64",isRequired:!0},git_hash:{type:"string",description:`Git hash of the build of the API endpoint.  Can be used to determine the exact
            software version used by the API endpoint.`}}},Mx={properties:{modules:{type:"array",contains:{type:"MoveModuleBytecode"},isRequired:!0}}},Ox={type:"string"},Cx={description:"Move function",properties:{name:{type:"IdentifierWrapper",isRequired:!0},visibility:{type:"MoveFunctionVisibility",isRequired:!0},is_entry:{type:"boolean",description:"Whether the function can be called as an entry function directly in a transaction",isRequired:!0},is_view:{type:"boolean",description:"Whether the function is a view function or not",isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveFunctionGenericTypeParam"},isRequired:!0},params:{type:"array",contains:{type:"MoveType"},isRequired:!0},return:{type:"array",contains:{type:"MoveType"},isRequired:!0}}},Ix={description:"Move function generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},Dx={type:"Enum"},Nx={description:"A Move module",properties:{address:{type:"Address",isRequired:!0},name:{type:"IdentifierWrapper",isRequired:!0},friends:{type:"array",contains:{type:"MoveModuleId"},isRequired:!0},exposed_functions:{type:"array",contains:{type:"MoveFunction"},isRequired:!0},structs:{type:"array",contains:{type:"MoveStruct"},isRequired:!0}}},Lx={description:"Move module bytecode along with it's ABI",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveModule"}}},qx={type:"string",description:`Move module id is a string representation of Move module.

    Format: \`{address}::{module name}\`

    \`address\` should be hex-encoded 32 byte account address that is prefixed with \`0x\`.

    Module name is case-sensitive.
    `},Hx={description:"A parsed Move resource",properties:{type:{type:"MoveStructTag",isRequired:!0},data:{type:"MoveStructValue",isRequired:!0}}},Fx={description:"Move script bytecode",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveFunction"}}},zx={description:"A move struct",properties:{name:{type:"IdentifierWrapper",isRequired:!0},is_native:{type:"boolean",description:"Whether the struct is a native struct of Move",isRequired:!0},abilities:{type:"array",contains:{type:"MoveAbility"},isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveStructGenericTypeParam"},isRequired:!0},fields:{type:"array",contains:{type:"MoveStructField"},isRequired:!0}}},Kx={description:"Move struct field",properties:{name:{type:"IdentifierWrapper",isRequired:!0},type:{type:"MoveType",isRequired:!0}}},jx={description:"Move generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},Wx={type:"string",description:"String representation of a MoveStructTag (on-chain Move struct type). This exists so you\n    can specify MoveStructTags as path / query parameters, e.g. for get_events_by_event_handle.\n\n    It is a combination of:\n    1. `move_module_address`, `module_name` and `struct_name`, all joined by `::`\n    2. `struct generic type parameters` joined by `, `\n\n    Examples:\n     * `0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>`\n     * `0x1::account::Account`\n\n    Note:\n    1. Empty chars should be ignored when comparing 2 struct tag ids.\n    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).\n\n    See [doc](https://aptos.dev/concepts/accounts) for more details.\n    ",pattern:"^0x[0-9a-zA-Z:_<>]+$"},Vx={description:'This is a JSON representation of some data within an account resource. More specifically,\n    it is a map of strings to arbitrary JSON values / objects, where the keys are top level\n    fields within the given resource.\n\n    To clarify, you might query for 0x1::account::Account and see the example data.\n\n    Move `bool` type value is serialized into `boolean`.\n\n    Move `u8`, `u16` and `u32` type value is serialized into `integer`.\n\n    Move `u64`, `u128` and `u256` type value is serialized into `string`.\n\n    Move `address` type value (32 byte Aptos account address) is serialized into a HexEncodedBytes string.\n    For example:\n    - `0x1`\n    - `0x1668f6be25668c1a17cd8caf6b8d2f25`\n\n    Move `vector` type value is serialized into `array`, except `vector<u8>` which is serialized into a\n    HexEncodedBytes string with `0x` prefix.\n    For example:\n    - `vector<u64>{255, 255}` => `["255", "255"]`\n    - `vector<u8>{255, 255}` => `0xffff`\n\n    Move `struct` type value is serialized into `object` that looks like this (except some Move stdlib types, see the following section):\n    ```json\n    {\n        field1_name: field1_value,\n        field2_name: field2_value,\n        ......\n    }\n    ```\n\n    For example:\n    `{ "created": "0xa550c18", "role_id": "0" }`\n\n     **Special serialization for Move stdlib types**:\n    - [0x1::string::String](https://github.com/aptos-labs/aptos-core/blob/main/language/move-stdlib/docs/ascii.md)\n    is serialized into `string`. For example, struct value `0x1::string::String{bytes: b"Hello World!"}`\n    is serialized as `"Hello World!"` in JSON.\n    ',properties:{}},Gx={type:"string",description:`String representation of an on-chain Move type tag that is exposed in transaction payload.
    Values:
    - bool
    - u8
    - u16
    - u32
    - u64
    - u128
    - u256
    - address
    - signer
    - vector: \`vector<{non-reference MoveTypeId}>\`
    - struct: \`{address}::{module_name}::{struct_name}::<{generic types}>\`

    Vector type value examples:
    - \`vector<u8>\`
    - \`vector<vector<u64>>\`
    - \`vector<0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>>\`

    Struct type value examples:
    - \`0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>
    - \`0x1::account::Account\`

    Note:
    1. Empty chars should be ignored when comparing 2 struct tag ids.
    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).
    `,pattern:"^(bool|u8|u64|u128|address|signer|vector<.+>|0x[0-9a-zA-Z:_<, >]+)$"},Jx={type:"any-of",description:"An enum of the possible Move value types",contains:[{type:"number",format:"uint8"},{type:"number",format:"uint16"},{type:"number",format:"uint32"},{type:"U64"},{type:"U128"},{type:"U256"},{type:"boolean"},{type:"Address"},{type:"array",contains:{type:"MoveValue"}},{type:"HexEncodedBytes"},{type:"MoveStructValue"},{type:"string"}]},Xx={description:`Multi agent signature for multi agent transactions

    This allows you to have transactions across multiple accounts`,properties:{sender:{type:"AccountSignature",isRequired:!0},secondary_signer_addresses:{type:"array",contains:{type:"Address"},isRequired:!0},secondary_signers:{type:"array",contains:{type:"AccountSignature"},isRequired:!0}}},Zx={description:`A Ed25519 multi-sig signature

    This allows k-of-n signing for a transaction`,properties:{public_keys:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},signatures:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},threshold:{type:"number",description:"The number of signatures required for a successful transaction",isRequired:!0,format:"uint8"},bitmap:{type:"HexEncodedBytes",isRequired:!0}}},Yx={description:`A multisig transaction that allows an owner of a multisig account to execute a pre-approved
    transaction as the multisig account.`,properties:{multisig_address:{type:"Address",isRequired:!0},transaction_payload:{type:"MultisigTransactionPayload"}}},Qx={type:"any-of",contains:[{type:"EntryFunctionPayload"}]},e2={description:"A transaction waiting in mempool",properties:{hash:{type:"HashValue",isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"}}},t2={description:"Table Item request for the GetTableItemRaw API",properties:{key:{type:"HexEncodedBytes",isRequired:!0}}},r2={type:"Enum"},n2={description:"Payload which runs a script that can run multiple functions",properties:{code:{type:"MoveScriptBytecode",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},s2={properties:{execute_as:{type:"Address",isRequired:!0},script:{type:"ScriptPayload",isRequired:!0}}},i2={description:"A state checkpoint transaction",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},a2={type:"string",description:`Representation of a StateKey as a hex string. This is used for cursor based pagination.
    `},o2={description:`A request to submit a transaction

    This requires a transaction and a signature of it`,properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature",isRequired:!0}}},c2={description:"Table Item request for the GetTableItem API",properties:{key_type:{type:"MoveType",isRequired:!0},value_type:{type:"MoveType",isRequired:!0},key:{description:"The value of the table item's key",properties:{},isRequired:!0}}},u2={type:"one-of",description:"Enum of the different types of transactions in Aptos",contains:[{type:"Transaction_PendingTransaction"},{type:"Transaction_UserTransaction"},{type:"Transaction_GenesisTransaction"},{type:"Transaction_BlockMetadataTransaction"},{type:"Transaction_StateCheckpointTransaction"}]},l2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"BlockMetadataTransaction"}]},h2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"GenesisTransaction"}]},d2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"PendingTransaction"}]},f2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"StateCheckpointTransaction"}]},p2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"UserTransaction"}]},y2={type:"one-of",description:"An enum of the possible transaction payloads",contains:[{type:"TransactionPayload_EntryFunctionPayload"},{type:"TransactionPayload_ScriptPayload"},{type:"TransactionPayload_ModuleBundlePayload"},{type:"TransactionPayload_MultisigPayload"}]},g2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"EntryFunctionPayload"}]},m2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ModuleBundlePayload"}]},w2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultisigPayload"}]},b2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptPayload"}]},v2={description:"Information telling which batch submission transactions failed",properties:{error:{type:"AptosError",isRequired:!0},transaction_index:{type:"number",description:"The index of which transaction failed, same as submission order",isRequired:!0,format:"uint64"}}},_2={description:`Batch transaction submission result

    Tells which transactions failed`,properties:{transaction_failures:{type:"array",contains:{type:"TransactionsBatchSingleSubmissionFailure"},isRequired:!0}}},E2={type:"one-of",description:"An enum representing the different transaction signatures available",contains:[{type:"TransactionSignature_Ed25519Signature"},{type:"TransactionSignature_MultiEd25519Signature"},{type:"TransactionSignature_MultiAgentSignature"}]},S2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},A2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiAgentSignature"}]},T2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},x2={type:"string",description:`A string containing a 128-bit unsigned integer.

    We represent u128 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u128s in JSON natively.
    `,format:"uint128"},R2={type:"string",description:`A string containing a 256-bit unsigned integer.

    We represent u256 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u256s in JSON natively.
    `,format:"uint256"},k2={type:"string",description:`A string containing a 64-bit unsigned integer.

    We represent u64 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u64s in JSON natively.
    `,format:"uint64"},B2={description:"A transaction submitted by a user to change the state of the blockchain",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"},events:{type:"array",contains:{type:"Event"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},P2={description:"An event from a transaction with a version",properties:{version:{type:"U64",isRequired:!0},guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},U2={description:"View request for the Move View Function API",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},$2={description:"Write a new module or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveModuleBytecode",isRequired:!0}}},M2={description:"Write a resource or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveResource",isRequired:!0}}},O2={type:"one-of",description:"The associated writeset with a payload",contains:[{type:"WriteSet_ScriptWriteSet"},{type:"WriteSet_DirectWriteSet"}]},C2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DirectWriteSet"}]},I2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptWriteSet"}]},D2={type:"one-of",description:"A final state change of a transaction on a resource or module",contains:[{type:"WriteSetChange_DeleteModule"},{type:"WriteSetChange_DeleteResource"},{type:"WriteSetChange_DeleteTableItem"},{type:"WriteSetChange_WriteModule"},{type:"WriteSetChange_WriteResource"},{type:"WriteSetChange_WriteTableItem"}]},N2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteModule"}]},L2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteResource"}]},q2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteTableItem"}]},H2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteModule"}]},F2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteResource"}]},z2={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteTableItem"}]},K2={description:"A writeset payload, used only for genesis",properties:{write_set:{type:"WriteSet",isRequired:!0}}},j2={description:"Change set to write a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},value:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DecodedTableData"}}};function Xa(t,e,r){if(!(e!=null&&e.includes(typeof t)))throw new Error(`Invalid arg: ${t} type should be ${e instanceof Array?e.join(" or "):e}`)}function Vy(t){if(Xa(t,["boolean","string"]),typeof t=="boolean")return t;if(t==="true")return!0;if(t==="false")return!1;throw new Error("Invalid boolean string.")}function An(t){if(Xa(t,["number","string"]),typeof t=="number")return t;const e=Number.parseInt(t,10);if(Number.isNaN(e))throw new Error("Invalid number string.");return e}function Tn(t){return Xa(t,["number","bigint","string"]),BigInt(t)}function Gy(t,e,r){if(e instanceof an){r.serializeBool(Vy(t));return}if(e instanceof mr){r.serializeU8(An(t));return}if(e instanceof Gn){r.serializeU16(An(t));return}if(e instanceof Jn){r.serializeU32(An(t));return}if(e instanceof on){r.serializeU64(Tn(t));return}if(e instanceof cn){r.serializeU128(Tn(t));return}if(e instanceof Xn){r.serializeU256(Tn(t));return}if(e instanceof Or){let n;if(typeof t=="string"||t instanceof V)n=ge.fromHex(t);else if(t instanceof ge)n=t;else throw new Error("Invalid account address.");n.serialize(r);return}if(e instanceof Zn){if(e.value instanceof mr){if(t instanceof Uint8Array){r.serializeBytes(t);return}if(typeof t=="string"){r.serializeStr(t);return}}if(!Array.isArray(t))throw new Error("Invalid vector args.");r.serializeU32AsUleb128(t.length),t.forEach(n=>Gy(n,e.value,r));return}if(e instanceof un){const{address:n,module_name:s,name:i}=e.value;if(`${V.fromUint8Array(n.address).toShortString()}::${s.value}::${i.value}`!="0x1::string::String")throw new Error("The only supported struct arg is of type 0x1::string::String");Xa(t,["string"]),r.serializeStr(t);return}throw new Error("Unsupported arg type.")}function W2(t,e){if(e instanceof an)return new Wa(Vy(t));if(e instanceof mr)return new Na(An(t));if(e instanceof Gn)return new La(An(t));if(e instanceof Jn)return new qa(An(t));if(e instanceof on)return new Ha(Tn(t));if(e instanceof cn)return new Fa(Tn(t));if(e instanceof Xn)return new za(Tn(t));if(e instanceof Or){let r;if(typeof t=="string"||t instanceof V)r=ge.fromHex(t);else if(t instanceof ge)r=t;else throw new Error("Invalid account address.");return new Ka(r)}if(e instanceof Zn&&e.value instanceof mr){if(!(t instanceof Uint8Array))throw new Error(`${t} should be an instance of Uint8Array`);return new ja(t)}throw new Error("Unknown type for TransactionArgument.")}var V2="APTOS::RawTransaction",G2="APTOS::RawTransactionWithData",Li=class{constructor(t,e){this.rawTxnBuilder=e,this.signingFunction=t}build(t,e,r){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(t,e,r)}static getSigningMessage(t){const e=Cn.create();if(t instanceof Qn)e.update(V2);else if(t instanceof Oa)e.update(G2);else throw new Error("Unknown transaction type.");const r=e.digest(),n=Nr(t),s=new Uint8Array(r.length+n.length);return s.set(r),s.set(n,r.length),s}},Ri=class extends Li{constructor(t,e,r){super(t,r),this.publicKey=e}rawToSigned(t){const e=Li.getSigningMessage(t),r=this.signingFunction(e),n=new Ua(new Ot(this.publicKey),r);return new Js(t,n)}sign(t){return Nr(this.rawToSigned(t))}},J2=class extends Li{constructor(t,e){super(t),this.publicKey=e}rawToSigned(t){const e=Li.getSigningMessage(t),r=this.signingFunction(e),n=new $a(this.publicKey,r);return new Js(t,n)}sign(t){return Nr(this.rawToSigned(t))}},Uc=class{constructor(t,e){this.abiMap=new Map,t.forEach(r=>{const n=new Mu(r),s=Va.deserialize(n);let i;if(s instanceof Nn){const a=s,{address:o,name:u}=a.module_name;i=`${V.fromUint8Array(o.address).toShortString()}::${u.value}::${a.name}`}else i=s.name;if(this.abiMap.has(i))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(i,s)}),this.builderConfig={maxGasAmount:BigInt(_y),expSecFromNow:Ey,...e}}static toBCSArgs(t,e){if(t.length!==e.length)throw new Error("Wrong number of args provided.");return e.map((r,n)=>{const s=new we;return Gy(r,t[n].type_tag,s),s.getBytes()})}static toTransactionArguments(t,e){if(t.length!==e.length)throw new Error("Wrong number of args provided.");return e.map((r,n)=>W2(r,t[n].type_tag))}setSequenceNumber(t){this.builderConfig.sequenceNumber=BigInt(t)}buildTransactionPayload(t,e,r){const n=e.map(a=>new Yn(a).parseTypeTag());let s;if(!this.abiMap.has(t))throw new Error(`Cannot find function: ${t}`);const i=this.abiMap.get(t);if(i instanceof Nn){const a=i,o=Uc.toBCSArgs(a.args,r);s=new Ia(new Gr(a.module_name,new mt(a.name),n,o))}else if(i instanceof Ga){const a=i,o=Uc.toTransactionArguments(a.args,r);s=new Ca(new Ma(a.code,n,o))}else throw new Error("Unknown ABI format.");return s}build(t,e,r){const{sender:n,sequenceNumber:s,gasUnitPrice:i,maxGasAmount:a,expSecFromNow:o,chainId:u}=this.builderConfig;if(!i)throw new Error("No gasUnitPrice provided.");const f=n instanceof ge?n:ge.fromHex(n),p=BigInt(Math.floor(Date.now()/1e3)+Number(o)),d=this.buildTransactionPayload(t,e,r);if(d)return new Qn(f,BigInt(s),d,BigInt(a),BigInt(i),p,new Da(Number(u)));throw new Error("Invalid ABI.")}},zu=class{constructor(t,e){this.aptosClient=t,this.builderConfig=e}async fetchABI(t){const r=(await this.aptosClient.getAccountModules(t)).map(s=>s.abi).flatMap(s=>s.exposed_functions.filter(i=>i.is_entry).map(i=>({fullName:`${s.address}::${s.name}::${i.name}`,...i}))),n=new Map;return r.forEach(s=>{n.set(s.fullName,s)}),n}async build(t,e,r){if(t=(U=>U.replace(/^0[xX]0*/g,"0x"))(t),t.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coins::transfer");const[i,a]=t.split("::"),o=await this.fetchABI(i);if(!o.has(t))throw new Error(`${t} doesn't exist.`);const u=o.get(t),p=u.params.filter(U=>U!=="signer"&&U!=="&signer").map((U,B)=>new Ys(`var${B}`,new Yn(U,e).parseTypeTag())),d=new Nn(u.name,Yr.fromStr(`${i}::${a}`),"",u.generic_type_params.map((U,B)=>new Zs(`${B}`)),p),{sender:A,...T}=this.builderConfig,m=A instanceof ge?V.fromUint8Array(A.address):A,[{sequence_number:E},k,{gas_estimate:$}]=await Promise.all([T!=null&&T.sequenceNumber?Promise.resolve({sequence_number:T==null?void 0:T.sequenceNumber}):this.aptosClient.getAccount(m),T!=null&&T.chainId?Promise.resolve(T==null?void 0:T.chainId):this.aptosClient.getChainId(),T!=null&&T.gasUnitPrice?Promise.resolve({gas_estimate:T==null?void 0:T.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new Uc([Nr(d)],{sender:A,sequenceNumber:E,chainId:k,gasUnitPrice:BigInt($),...T}).build(t,e,r)}};ae([nT(10*60*1e3)],zu.prototype,"fetchABI");var hs=class{constructor(t,e,r=!1){if(!t)throw new Error("Node URL cannot be empty.");const n=e==null?{}:{...e};r?this.nodeUrl=t:this.nodeUrl=eT(t),n.BASE=this.nodeUrl,(e==null?void 0:e.WITH_CREDENTIALS)===!1?n.WITH_CREDENTIALS=!1:n.WITH_CREDENTIALS=!0,this.client=new zy(n)}async getAccount(t){return this.client.accounts.getAccount(V.ensure(t).hex())}async getAccountTransactions(t,e){var r;return this.client.transactions.getAccountTransactions(V.ensure(t).hex(),(r=e==null?void 0:e.start)==null?void 0:r.toString(),e==null?void 0:e.limit)}async getAccountModules(t,e){const r=this.client.accounts.getAccountModules.bind({httpRequest:this.client.request});return await kh(r,t,1e3,e)}async getAccountModule(t,e,r){var n;return this.client.accounts.getAccountModule(V.ensure(t).hex(),e,(n=r==null?void 0:r.ledgerVersion)==null?void 0:n.toString())}async getAccountResources(t,e){const r=this.client.accounts.getAccountResources.bind({httpRequest:this.client.request});return await kh(r,t,9999,e)}async getAccountResource(t,e,r){var n;return this.client.accounts.getAccountResource(V.ensure(t).hex(),e,(n=r==null?void 0:r.ledgerVersion)==null?void 0:n.toString())}static generateBCSTransaction(t,e){return new Ri(n=>{const s=t.signBuffer(n);return new nt.Ed25519Signature(s.toUint8Array())},t.pubKey().toUint8Array()).sign(e)}static generateBCSSimulation(t,e){return new Ri(n=>{const s=new Uint8Array(64);return new nt.Ed25519Signature(s)},t.pubKey().toUint8Array()).sign(e)}async generateTransaction(t,e,r){const n={sender:t};if(r!=null&&r.sequence_number&&(n.sequenceNumber=r.sequence_number),r!=null&&r.gas_unit_price&&(n.gasUnitPrice=r.gas_unit_price),r!=null&&r.max_gas_amount&&(n.maxGasAmount=r.max_gas_amount),r!=null&&r.expiration_timestamp_secs){const i=Number.parseInt(r.expiration_timestamp_secs,10);n.expSecFromNow=i-Math.floor(Date.now()/1e3)}return new zu(this,n).build(e.function,e.type_arguments,e.arguments)}async signTransaction(t,e){return Promise.resolve(hs.generateBCSTransaction(t,e))}async getEventsByCreationNumber(t,e,r){var n;return this.client.events.getEventsByCreationNumber(V.ensure(t).hex(),e.toString(),(n=r==null?void 0:r.start)==null?void 0:n.toString(),r==null?void 0:r.limit)}async getEventsByEventHandle(t,e,r,n){var s;return this.client.events.getEventsByEventHandle(V.ensure(t).hex(),e,r,(s=n==null?void 0:n.start)==null?void 0:s.toString(),n==null?void 0:n.limit)}async submitTransaction(t){return this.submitSignedBCSTransaction(t)}async simulateTransaction(t,e,r){let n;return t instanceof Pc?n=hs.generateBCSSimulation(t,e):t instanceof Vs?n=new J2(()=>{const{threshold:i}=t,a=[],o=[];for(let f=0;f<i;f+=1)a.push(f),o.push(new nt.Ed25519Signature(new Uint8Array(64)));const u=nt.MultiEd25519Signature.createBitmap(a);return new nt.MultiEd25519Signature(o,u)},t).sign(e):n=new Ri(()=>{const i=new Uint8Array(64);return new nt.Ed25519Signature(i)},t.toBytes()).sign(e),this.submitBCSSimulation(n,r)}async submitSignedBCSTransaction(t){return this.client.request.request({url:"/transactions",method:"POST",body:t,mediaType:"application/x.aptos.signed_transaction+bcs"})}async submitBCSSimulation(t,e){var r,n,s;const i={estimate_gas_unit_price:(r=e==null?void 0:e.estimateGasUnitPrice)!=null?r:!1,estimate_max_gas_amount:(n=e==null?void 0:e.estimateMaxGasAmount)!=null?n:!1,estimate_prioritized_gas_unit_price:(s=e==null?void 0:e.estimatePrioritizedGasUnitPrice)!=null?s:!1};return this.client.request.request({url:"/transactions/simulate",query:i,method:"POST",body:t,mediaType:"application/x.aptos.signed_transaction+bcs"})}async getTransactions(t){var e;return this.client.transactions.getTransactions((e=t==null?void 0:t.start)==null?void 0:e.toString(),t==null?void 0:t.limit)}async getTransactionByHash(t){return this.client.transactions.getTransactionByHash(t)}async getTransactionByVersion(t){return this.client.transactions.getTransactionByVersion(t.toString())}async transactionPending(t){try{return(await this.client.transactions.getTransactionByHash(t)).type==="pending_transaction"}catch(e){if((e==null?void 0:e.status)===404)return!0;throw e}}async waitForTransactionWithResult(t,e){var r,n;const s=(r=e==null?void 0:e.timeoutSecs)!=null?r:tT,i=(n=e==null?void 0:e.checkSuccess)!=null?n:!1;let a=!0,o=0,u;for(;a&&!(o>=s);){try{if(u=await this.client.transactions.getTransactionByHash(t),a=u.type==="pending_transaction",!a)break}catch(f){const p=f instanceof As,d=p&&f.status!==404&&f.status>=400&&f.status<500;if(!p||d)throw f}await QA(1e3),o+=1}if(u===void 0)throw new Error(`Waiting for transaction ${t} failed`);if(a)throw new Z2(`Waiting for transaction ${t} timed out after ${s} seconds`,u);if(!i)return u;if(!(u!=null&&u.success))throw new Y2(`Transaction ${t} committed to the blockchain but execution failed`,u);return u}async waitForTransaction(t,e){await this.waitForTransactionWithResult(t,e)}async getLedgerInfo(){return this.client.general.getLedgerInfo()}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(t,e,r){var n;return await this.client.tables.getTableItem(t,e,(n=r==null?void 0:r.ledgerVersion)==null?void 0:n.toString())}async generateRawTransaction(t,e,r){const[{sequence_number:n},s,{gas_estimate:i}]=await Promise.all([this.getAccount(t),this.getChainId(),r!=null&&r.gasUnitPrice?Promise.resolve({gas_estimate:r.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:a,gasUnitPrice:o,expireTimestamp:u}={maxGasAmount:BigInt(_y),gasUnitPrice:BigInt(i),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+Ey),...r};return new nt.RawTransaction(nt.AccountAddress.fromHex(t),BigInt(n),e,a,o,u,new nt.ChainId(s))}async generateSignSubmitTransaction(t,e,r){const n=await this.generateRawTransaction(t.address(),e,r),s=hs.generateBCSTransaction(t,n);return(await this.submitSignedBCSTransaction(s)).hash}async publishPackage(t,e,r,n){const s=new we;At(r,s);const i=new nt.TransactionPayloadEntryFunction(nt.EntryFunction.natural("0x1::code","publish_package_txn",[],[bn(e),s.getBytes()]));return this.generateSignSubmitTransaction(t,i,n)}async generateSignSubmitWaitForTransaction(t,e,r){const n=await this.generateSignSubmitTransaction(t,e,r);return this.waitForTransactionWithResult(n,r)}async estimateGasPrice(){return this.client.transactions.estimateGasPrice()}async estimateMaxGasAmount(t){const e=`0x1::coin::CoinStore<${rT}>`,[{gas_estimate:r},n]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(t)]),s=n.find(a=>a.type===e);return BigInt(s.data.coin.value)/BigInt(r)}async rotateAuthKeyEd25519(t,e,r){const{sequence_number:n,authentication_key:s}=await this.getAccount(t.address()),i=new Pc(e),a=new nt.RotationProofChallenge(nt.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(n),nt.AccountAddress.fromHex(t.address()),new nt.AccountAddress(new V(s).toUint8Array()),i.pubKey().toUint8Array()),o=V.fromUint8Array(Nr(a)),u=t.signHexString(o),f=i.signHexString(o),p=new nt.TransactionPayloadEntryFunction(nt.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[kc(0),bn(t.pubKey().toUint8Array()),kc(0),bn(i.pubKey().toUint8Array()),bn(u.toUint8Array()),bn(f.toUint8Array())])),d=await this.generateRawTransaction(t.address(),p,r),A=hs.generateBCSTransaction(t,d);return this.submitSignedBCSTransaction(A)}async lookupOriginalAddress(t){const e=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:r}}=e.data,n=await this.getTableItem(r,{key_type:"address",value_type:"address",key:V.ensure(t).hex()});return new V(n)}async getBlockByHeight(t,e){return this.client.blocks.getBlockByHeight(t,e)}async getBlockByVersion(t,e){return this.client.blocks.getBlockByVersion(t,e)}async view(t,e){return this.client.view.view(t,e)}clearCache(t){sT(t)}},ye=hs;ae([rt],ye.prototype,"getAccount");ae([rt],ye.prototype,"getAccountTransactions");ae([rt],ye.prototype,"getAccountModules");ae([rt],ye.prototype,"getAccountModule");ae([rt],ye.prototype,"getAccountResources");ae([rt],ye.prototype,"getAccountResource");ae([rt],ye.prototype,"getEventsByCreationNumber");ae([rt],ye.prototype,"getEventsByEventHandle");ae([rt],ye.prototype,"submitSignedBCSTransaction");ae([rt],ye.prototype,"submitBCSSimulation");ae([rt],ye.prototype,"getTransactions");ae([rt],ye.prototype,"getTransactionByHash");ae([rt],ye.prototype,"getTransactionByVersion");ae([rt],ye.prototype,"getLedgerInfo");ae([Ba()],ye.prototype,"getChainId");ae([rt],ye.prototype,"getTableItem");ae([rt,Ba({ttlMs:5*60*1e3,tags:["gas_estimates"]})],ye.prototype,"estimateGasPrice");ae([rt],ye.prototype,"estimateMaxGasAmount");ae([rt],ye.prototype,"getBlockByHeight");ae([rt],ye.prototype,"getBlockByVersion");ae([rt],ye.prototype,"view");var X2=class extends Error{constructor(t,e,r,n){super(e),this.status=t,this.message=e,this.errorCode=r,this.vmErrorCode=n}},Z2=class extends Error{constructor(t,e){super(t),this.lastSubmittedTransaction=e}},Y2=class extends Error{constructor(t,e){super(t),this.transaction=e}};function rt(t,e,r){const n=r.value;return r.value=async function(...i){var a,o;try{return await n.apply(this,[...i])}catch(u){throw u instanceof As?new X2(u.status,JSON.stringify({message:u.message,...u.body}),(a=u.body)==null?void 0:a.error_code,(o=u.body)==null?void 0:o.vm_error_code):u}},r}var Jy=class{constructor(t,e,r=!1){let n=null,s=null;if(typeof t=="object"&&Q2(t)?(n=t.fullnodeUrl,s=t.indexerUrl,this.network="CUSTOM"):(n=aT[t],s=iT[t],this.network=t),!n||!s)throw new Error("network is not provided");this.aptosClient=new ye(n,e,r),this.indexerClient=new Qt(s)}};function Xy(t,e,r){Object.getOwnPropertyNames(e.prototype).forEach(n=>{const s=Object.getOwnPropertyDescriptor(e.prototype,n);s&&(s.value=function(...i){return this[r][n](...i)},Object.defineProperty(t.prototype,n,s))})}Xy(Jy,ye,"aptosClient");Xy(Jy,Qt,"indexerClient");function Q2(t){return t.fullnodeUrl!==void 0&&typeof t.fullnodeUrl=="string"&&t.indexerUrl!==void 0&&typeof t.indexerUrl=="string"}var Zy=class{constructor(t,e){this.type=t,this.value=e}},Yy=class{constructor(){this.data={}}setProperty(t,e){this.data[t]=e}};function eR(t){let e;return t==="string"||t==="String"?e=new un(Ty):e=new Yn(t).parseTypeTag(),e}function Qy(t){const e=t.map.data,r=new Yy;return e.forEach(n=>{const{key:s}=n,i=n.value.value,a=n.value.type,o=eR(a),u=tR(o,i),f=new Zy(a,u);r.setProperty(s,f)}),r}function tR(t,e){const r=new Mu(new V(e).toUint8Array());let n="";return t instanceof mr?n=r.deserializeU8().toString():t instanceof on?n=r.deserializeU64().toString():t instanceof cn?n=r.deserializeU128().toString():t instanceof an?n=r.deserializeBool()?"true":"false":t instanceof Or?n=V.fromUint8Array(r.deserializeFixedBytes(32)).hex():t instanceof un&&t.isStringTypeTag()?n=r.deserializeStr():n=e,n}var rR={};ka(rR,{PropertyMap:()=>Yy,PropertyValue:()=>Zy,Token:()=>sR,TokenData:()=>nR});var nR=class{constructor(t,e,r,n,s,i,a,o){this.collection=t,this.description=e,this.name=r,this.maximum=n,this.supply=s,this.uri=i,this.default_properties=Qy(a),this.mutability_config=o}},sR=class{constructor(t,e,r){this.id=t,this.amount=e,this.token_properties=Qy(r)}};class iR extends na{constructor(r){super(r);S(this,"signerInstance");S(this,"_publicKey");this.base=["aptom",1e8]}async getProvider(){return this.providerInstance??(this.providerInstance=new ye(this.providerUrl))}async getTx(r){const s=await(await this.getProvider()).waitForTransactionWithResult(r,{timeoutSecs:1,checkSuccess:!0}),i=s==null?void 0:s.payload;if(!s.success)throw new Error((s==null?void 0:s.vm_status)??"Unknown Aptos error");if(!((i==null?void 0:i.function)==="0x1::coin::transfer"&&(i==null?void 0:i.type_arguments[0])==="0x1::aptos_coin::AptosCoin"&&(s==null?void 0:s.vm_status)==="Executed successfully"))throw new Error(`Aptos tx ${r} failed validation`);const a=s.type==="pending_transaction";return{to:i.arguments[0],from:s.sender,amount:new j(i.arguments[1]),pending:a,confirmed:!a}}ownerToAddress(r){const n=Eg.sha3_256.create();return n.update(Buffer.from(r)),n.update("\0"),`0x${n.hex()}`}async sign(r){return await this.getSigner().sign(r)}getSigner(){return this.signerInstance??(this.signerInstance=new Pi(this.wallet,this._publicKey))}async verify(r,n,s){return await Pi.verify(r,n,s)}async getCurrentHeight(){return new j((await(await this.getProvider()).client.blocks.httpRequest.request({method:"GET",url:"/"})).block_height)}async getFee(r,n){const s=await this.getProvider();if(!this.address)throw new Error("Address is undefined - you might be missing a wallet, or have not run Irys.ready()");const a=await new zu(s,{sender:this.address}).build("0x1::coin::transfer",["0x1::aptos_coin::AptosCoin"],[n??"0x149f7dc9c8e43c14ab46d3a6b62cfe84d67668f764277411f98732bf6718acf9",new j(r).toNumber()]),u=new Ri(d=>{const A=new Uint8Array(64);return new nt.Ed25519Signature(A)},await this.getPublicKey()).sign(a),f={estimate_gas_unit_price:!0,estimate_max_gas_amount:!0},p=await s.client.request.request({url:"/transactions/simulate",query:f,method:"POST",body:u,mediaType:"application/x.aptos.signed_transaction+bcs"});return{gasUnitPrice:+p[0].gas_unit_price,maxGasAmount:+p[0].max_gas_amount}}async sendTx(r){return(await this.wallet.signAndSubmitTransaction(r)).hash}async createTx(r,n,s){return{txId:void 0,tx:{arguments:[n,new j(r).toNumber()],function:"0x1::coin::transfer",type:"entry_function_payload",type_arguments:["0x1::aptos_coin::AptosCoin"]}}}async getPublicKey(){return this._publicKey??(this._publicKey=Buffer.from((await this.wallet.account()).publicKey.toString().slice(2),"hex"))}async ready(){var n;this._publicKey=await this.getPublicKey(),this._address=this.ownerToAddress(this._publicKey);const r=await this.getProvider();this._address=await r.lookupOriginalAddress(this.address??"").then(s=>s.toString()).catch(s=>this._address),((n=this._address)==null?void 0:n.length)==66&&this._address.charAt(2)==="0"&&(this._address=this._address.slice(0,2)+this._address.slice(3))}}class aR extends sa{}class oR extends sa{async createTx(e,r,n){const s=this.w3signer,i={to:r,from:this.address,value:e.toString(),gasLimit:BigInt(0)},a=await this.provider.estimateGas(i);return i.gasLimit=a,{tx:await s.populateTransaction(i),txId:void 0}}async getTx(e){const n=await this.provider.getTransaction(e);if(!n)throw new Error("Tx doesn't exist");if(!n.to)throw new Error(`Unable to resolve transactions ${e} receiver`);return{from:n.from,to:n.to,blockHeight:n.blockNumber?new j(n.blockNumber):void 0,amount:new j(n.value.toString()),pending:!n.blockNumber,confirmed:await n.confirmations()>=this.minConfirm}}async ready(){const e=this.wallet;this.provider=e;const r=await e.getSigner();r._signTypedData=async(n,s,i)=>r.signTypedData(n,s,i),e.getSigner=()=>r,this.wallet=e,await super.ready()}}function cR(t){switch(t.token){case"ethereum":return gn("ethereum",t.providerName,{irys:t.irys,name:"ethereum",ticker:"ETH",providerUrl:t.providerUrl??"https://cloudflare-eth.com/",wallet:t.wallet});case"matic":return gn("ethereum",t.providerName,{irys:t.irys,name:"matic",ticker:"MATIC",providerUrl:t.providerUrl??"https://polygon-rpc.com",wallet:t.wallet,minConfirm:1});case"arbitrum":return gn("ethereum",t.providerName,{irys:t.irys,name:"arbitrum",ticker:"ETH",providerUrl:t.providerUrl??"https://arb1.arbitrum.io/rpc",wallet:t.wallet});case"bnb":return gn("ethereum",t.providerName,{irys:t.irys,name:"bnb",ticker:"BNB",providerUrl:t.providerUrl??"https://bsc-dataseed.binance.org",wallet:t.wallet});case"avalanche":return gn("ethereum",t.providerName,{irys:t.irys,name:"avalanche",ticker:"AVAX",providerUrl:t.providerUrl??"https://api.avax.network/ext/bc/C/rpc",wallet:t.wallet});case"boba-eth":return gn("ethereum",t.providerName,{irys:t.irys,name:"boba-eth",ticker:"ETH",providerUrl:t.providerUrl??"https://mainnet.boba.network/",minConfirm:1,wallet:t.wallet});case"boba":{const e=new g1({irys:t.irys,name:"boba",ticker:"BOBA",providerUrl:t.providerUrl??"https://mainnet.boba.network/",contractAddress:t.contractAddress??"0xa18bF3994C0Cc6E3b63ac420308E5383f53120D7",minConfirm:1,wallet:t.wallet});return e.price=async()=>{var n;const r=await me.post("https://api.livecoinwatch.com/coins/single",JSON.stringify({currency:"USD",code:`${e.ticker}`}),{headers:{"x-api-key":"75a7a824-6577-45e6-ad86-511d590c7cc8","content-type":"application/json"}});if(await ut.checkAndThrow(r,"Getting price data"),!((n=r==null?void 0:r.data)!=null&&n.rate))throw new Error(`unable to get price for ${e.name}`);return+r.data.rate},e}case"solana":return new y1({irys:t.irys,name:"solana",ticker:"SOL",providerUrl:t.providerUrl??"https://api.mainnet-beta.solana.com/",wallet:t.wallet});case"near":return new p1({irys:t.irys,name:"near",ticker:"NEAR",providerUrl:t.providerUrl??"https://rpc.mainnet.near.org",wallet:t.wallet});case"aptos":return new iR({irys:t.irys,name:"aptos",ticker:"APTOS",providerUrl:t.providerUrl??"https://fullnode.mainnet.aptoslabs.com/v1",wallet:t.wallet});default:throw new Error(`Unknown/Unsupported token ${t.token}`)}}function gn(t,e,r){switch(t){case"ethereum":switch(e){case"ethersv5":return new aR(r);case"ethersv6":return new oR(r);default:return new sa(r)}}}class uR{constructor(e){S(this,"irys");this.irys=e}async upload(e,r){return this.irys.uploadWithReceipt(e,r)}async uploadProof(e){return await this.irys.uploadWithReceipt("",{tags:Object.entries({dataProtocol:"Provenance-Confirmation",...e}).map(([r,n])=>({name:Uh[r],value:n}))})}async getAllProofs(e,r){var o,u;const n=Object.entries(e).map(([f,p])=>({name:Uh[f],values:[p]}));if(n.length===0)throw new Error("Getting a provenance proof requires at least one query element");const s=`
    query ($tags: [TagFilter!]) {
      transactions(tags: $tags) {
        edges {
          node {
            id
            receipt {
              deadlineHeight
              signature
              timestamp
              version
            }
            tags {
              name
              value
            }
          }
        }
      }
    }
    `,i=[];let a=null;do{const f=await this.irys.api.post("/graphql",{query:s,variables:{tags:n,limit:(r==null?void 0:r.limit)??null,after:a}},void 0);a=(u=(o=f.data.data.transactions)==null?void 0:o.pageInfo)!=null&&u.hasNextPage?f.data.data.transactions.pageInfo.endCursor:null,i.push(...f.data.data.transactions.edges.map(p=>p.node))}while(a);return i}async getProof(e){const r=(await this.getAllProofs(e,{limit:1})).at(0);if(!r)throw new Error(`Unable to locate proof with fields ${JSON.stringify(e)}`);return r}}const Uh={dataProtocol:"Data-Protocol",hashingAlgo:"Hashing-Algo",dataHash:"Data-Hash",uploadedFor:"Uploaded-For",prompt:"Prompt",promptHash:"Prompt-Hash",model:"Model"};class lR{constructor(e){S(this,"irys");this.irys=e}async getById(e){const r=(await this.query({ids:[e],limit:1})).at(0);if(!r)throw new Error(`Unable to locate tx with id ${e}`);return r}async getByOwner(e){const r=(await this.query({owners:[e],limit:1})).at(0);if(!r)throw new Error(`Unable to locate tx with owner ${e}`);return r}async getByTag(e,r){const n=(await this.query({tags:[{name:e,values:[r]}],limit:1})).at(0);if(!n)throw new Error(`Unable to locate tx with tag ${e}:${r}`);return n}async query(e){var i,a;const r=`
    query ($ids: [String!], $after: String, $currency: String, $owners: [String!], $limit: Int, $order: SortOrder, $hasTags: Boolean, $tags: [TagFilter!]) {
      transactions(ids: $ids, after: $after, currency: $currency, owners: $owners, limit: $limit, order: $order, hasTags: $hasTags, tags: $tags) {
        edges {
          cursor
          node {
            address
            currency
            id
            receipt {
              deadlineHeight
              signature
              timestamp
              version
            }
            signature
            tags {
              name
              value
            }
            timestamp
          }
        }
        pageInfo {
          endCursor
          hasNextPage
        }
      }
    }
    `,n=[];let s=null;do{const o=await this.irys.api.post("/graphql",{query:r,variables:{...e,after:s??e.after}},void 0);s=(a=(i=o.data.data.transactions)==null?void 0:i.pageInfo)!=null&&a.hasNextPage?o.data.data.transactions.pageInfo.endCursor:null,n.push(...o.data.data.transactions.edges.map(u=>u.node))}while(s);return n}}var eg={},as={},os={},Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.ValidationError=void 0;class hR extends Error{constructor(e){super(e),Error.captureStackTrace&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}static createFrom(e){return new this(e)}}Qs.ValidationError=hR;var ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.PromisePoolError=void 0;class dR extends Error{constructor(e,r){super(),this.raw=e,this.item=r,this.name=this.constructor.name,this.message=this.messageFrom(e),Error.captureStackTrace&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}static createFrom(e,r){return new this(e,r)}messageFrom(e){return e instanceof Error||typeof e=="object"?e.message:typeof e=="string"||typeof e=="number"?e.toString():""}}ei.PromisePoolError=dR;var ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.StopThePromisePoolError=void 0;class fR extends Error{}ti.StopThePromisePoolError=fR;var $h;function pR(){if($h)return os;$h=1,Object.defineProperty(os,"__esModule",{value:!0}),os.PromisePoolExecutor=void 0;const t=$c(),e=Qs,r=ei,n=ti;class s{constructor(){this.meta={tasks:[],items:[],errors:[],results:[],stopped:!1,concurrency:10,shouldResultsCorrespond:!1,processedItems:[],taskTimeout:0},this.handler=a=>a,this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}useConcurrency(a){if(!this.isValidConcurrency(a))throw e.ValidationError.createFrom(`"concurrency" must be a number, 1 or up. Received "${a}" (${typeof a})`);return this.meta.concurrency=a,this}isValidConcurrency(a){return typeof a=="number"&&a>=1}withTaskTimeout(a){return this.meta.taskTimeout=a,this}concurrency(){return this.meta.concurrency}useCorrespondingResults(a){return this.meta.shouldResultsCorrespond=a,this}shouldUseCorrespondingResults(){return this.meta.shouldResultsCorrespond}taskTimeout(){return this.meta.taskTimeout}for(a){return this.meta.items=a,this}items(){return this.meta.items}itemsCount(){const a=this.items();return Array.isArray(a)?a.length:NaN}tasks(){return this.meta.tasks}activeTaskCount(){return this.activeTasksCount()}activeTasksCount(){return this.tasks().length}processedItems(){return this.meta.processedItems}processedCount(){return this.processedItems().length}processedPercentage(){return this.processedCount()/this.itemsCount()*100}results(){return this.meta.results}errors(){return this.meta.errors}withHandler(a){return this.handler=a,this}hasErrorHandler(){return!!this.errorHandler}handleError(a){return this.errorHandler=a,this}onTaskStarted(a){return this.onTaskStartedHandlers=a,this}onTaskFinished(a){return this.onTaskFinishedHandlers=a,this}hasReachedConcurrencyLimit(){return this.activeTasksCount()>=this.concurrency()}stop(){throw this.markAsStopped(),new n.StopThePromisePoolError}markAsStopped(){return this.meta.stopped=!0,this}isStopped(){return this.meta.stopped}async start(){return await this.validateInputs().prepareResultsArray().process()}validateInputs(){if(typeof this.handler!="function")throw e.ValidationError.createFrom("The first parameter for the .process(fn) method must be a function");const a=this.taskTimeout();if(!(a==null||typeof a=="number"&&a>=0))throw e.ValidationError.createFrom(`"timeout" must be undefined or a number. A number must be 0 or up. Received "${String(a)}" (${typeof a})`);if(!this.areItemsValid())throw e.ValidationError.createFrom(`"items" must be an array, an iterable or an async iterable. Received "${typeof this.items()}"`);if(this.errorHandler&&typeof this.errorHandler!="function")throw e.ValidationError.createFrom(`The error handler must be a function. Received "${typeof this.errorHandler}"`);return this.onTaskStartedHandlers.forEach(o=>{if(o&&typeof o!="function")throw e.ValidationError.createFrom(`The onTaskStarted handler must be a function. Received "${typeof o}"`)}),this.onTaskFinishedHandlers.forEach(o=>{if(o&&typeof o!="function")throw e.ValidationError.createFrom(`The error handler must be a function. Received "${typeof o}"`)}),this}areItemsValid(){const a=this.items();return!!(Array.isArray(a)||typeof a[Symbol.iterator]=="function"||typeof a[Symbol.asyncIterator]=="function")}prepareResultsArray(){const a=this.items();return Array.isArray(a)?this.shouldUseCorrespondingResults()?(this.meta.results=Array(a.length).fill(t.PromisePool.notRun),this):this:this}async process(){let a=0;for await(const o of this.items()){if(this.isStopped())break;this.shouldUseCorrespondingResults()&&(this.results()[a]=t.PromisePool.notRun),this.startProcessing(o,a),a+=1,await this.waitForProcessingSlot()}return await this.drained()}async waitForProcessingSlot(){for(;this.hasReachedConcurrencyLimit();)await this.waitForActiveTaskToFinish()}async waitForActiveTaskToFinish(){await Promise.race(this.tasks())}startProcessing(a,o){const u=this.createTaskFor(a,o).then(f=>{this.save(f,o).removeActive(u)}).catch(async f=>{await this.handleErrorFor(f,a,o),this.removeActive(u)}).finally(()=>{this.processedItems().push(a),this.runOnTaskFinishedHandlers(a)});this.tasks().push(u),this.runOnTaskStartedHandlers(a)}async createTaskFor(a,o){if(this.taskTimeout()===void 0)return this.handler(a,o,this);const[u,f]=this.createTaskTimeout(a);return Promise.race([this.handler(a,o,this),u()]).finally(f)}createTaskTimeout(a){let o;return[async()=>new Promise((p,d)=>{o=setTimeout(()=>{d(new r.PromisePoolError(`Task in promise pool timed out after ${this.taskTimeout()}ms`,a))},this.taskTimeout())}),()=>clearTimeout(o)]}save(a,o){return this.shouldUseCorrespondingResults()?this.results()[o]=a:this.results().push(a),this}removeActive(a){return this.tasks().splice(this.tasks().indexOf(a),1),this}async handleErrorFor(a,o,u){if(this.shouldUseCorrespondingResults()&&(this.results()[u]=t.PromisePool.failed),!this.isStoppingThePoolError(a)){if(this.isValidationError(a))throw this.markAsStopped(),a;this.hasErrorHandler()?await this.runErrorHandlerFor(a,o):this.saveErrorFor(a,o)}}isStoppingThePoolError(a){return a instanceof n.StopThePromisePoolError}isValidationError(a){return a instanceof e.ValidationError}async runErrorHandlerFor(a,o){var u;try{await((u=this.errorHandler)==null?void 0:u.call(this,a,o,this))}catch(f){this.rethrowIfNotStoppingThePool(f)}}runOnTaskStartedHandlers(a){this.onTaskStartedHandlers.forEach(o=>{o(a,this)})}runOnTaskFinishedHandlers(a){this.onTaskFinishedHandlers.forEach(o=>{o(a,this)})}rethrowIfNotStoppingThePool(a){if(!this.isStoppingThePoolError(a))throw a}saveErrorFor(a,o){this.errors().push(r.PromisePoolError.createFrom(a,o))}async drained(){return await this.drainActiveTasks(),{errors:this.errors(),results:this.results()}}async drainActiveTasks(){await Promise.all(this.tasks())}}return os.PromisePoolExecutor=s,os}var Mh;function $c(){if(Mh)return as;Mh=1,Object.defineProperty(as,"__esModule",{value:!0}),as.PromisePool=void 0;const t=pR();class e{constructor(n){this.timeout=void 0,this.concurrency=10,this.items=n??[],this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[],this.shouldResultsCorrespond=!1}withConcurrency(n){return this.concurrency=n,this}static withConcurrency(n){return new this().withConcurrency(n)}withTaskTimeout(n){return this.timeout=n,this}static withTaskTimeout(n){return new this().withTaskTimeout(n)}for(n){const s=new e(n).withConcurrency(this.concurrency);return typeof this.errorHandler=="function"&&s.handleError(this.errorHandler),typeof this.timeout=="number"?s.withTaskTimeout(this.timeout):s}static for(n){return new this().for(n)}handleError(n){return this.errorHandler=n,this}onTaskStarted(n){return this.onTaskStartedHandlers.push(n),this}onTaskFinished(n){return this.onTaskFinishedHandlers.push(n),this}useCorrespondingResults(){return this.shouldResultsCorrespond=!0,this}async process(n){return new t.PromisePoolExecutor().useConcurrency(this.concurrency).useCorrespondingResults(this.shouldResultsCorrespond).withTaskTimeout(this.timeout).withHandler(n).handleError(this.errorHandler).onTaskStarted(this.onTaskStartedHandlers).onTaskFinished(this.onTaskFinishedHandlers).for(this.items).start()}}return as.PromisePool=e,e.notRun=Symbol("notRun"),e.failed=Symbol("failed"),as}var tg={};Object.defineProperty(tg,"__esModule",{value:!0});var rg={};Object.defineProperty(rg,"__esModule",{value:!0});(function(t){var e=z&&z.__createBinding||(Object.create?function(s,i,a,o){o===void 0&&(o=a);var u=Object.getOwnPropertyDescriptor(i,a);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(s,o,u)}:function(s,i,a,o){o===void 0&&(o=a),s[o]=i[a]}),r=z&&z.__exportStar||function(s,i){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,s,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=$c();t.default=n.PromisePool,r(tg,t),r($c(),t),r(ei,t),r(rg,t),r(ti,t),r(Qs,t)})(eg);const yR=Symbol("not readable"),gR=Symbol("readable"),mR=Symbol("ended"),wR=Symbol("errored"),dt={notReadable:yR,readable:gR,ended:mR,errored:wR};class bR{constructor(e,{size:r}={}){S(this,"_stream");S(this,"_error");S(this,"_state",dt.notReadable);S(this,"_size");S(this,"_rejections",new Set);this._stream=e,this._size=r;const n=["_handleStreamEnd","_handleStreamError"];for(const s of n)Object.defineProperty(this,s,{configurable:!0,writable:!0,value:this[s].bind(this)});e.once("error",this._handleStreamError),e.once("end",this._handleStreamEnd),e.on("readable",()=>{this._state=dt.readable})}get closed(){return this._state===dt.ended}[Symbol.asyncIterator](){return this}async next(){switch(this._state){case dt.notReadable:{let e,r;try{e=this._untilReadable(),r=this._untilEnd(),await Promise.race([e.promise,r.promise])}finally{e!=null&&e.close(),r!=null&&r.close()}return this.next()}case dt.ended:return this.close(),{done:!0,value:void 0};case dt.errored:throw this.close(),this._error;case dt.readable:{const e=this._size?this._stream.read(this._size):this._stream.read();return e!==null?{done:!1,value:e}:(this._state=dt.notReadable,await new Promise(r=>setTimeout(n=>n(!0),0,r)),this.next())}}}_untilReadable(){let e;const r=new Promise((s,i)=>{e=()=>{this._state=dt.readable,this._rejections.delete(i),s()},this._state,dt.readable,this._stream.once("readable",e),this._rejections.add(i)});return{close:()=>{e!=null&&this._stream.removeListener("readable",e)},promise:r}}_untilEnd(){let e;const r=new Promise((s,i)=>{e=()=>{this._state=dt.ended,this._rejections.delete(i),s()},this._stream.once("end",e),this._rejections.add(i)});return{close:()=>{e!=null&&this._stream.removeListener("end",e)},promise:r}}return(){return this._state=dt.ended,this.next()}throw(e){return this._error=e,this._state=dt.errored,this.next()}close(e){this._stream.removeListener("end",this._handleStreamEnd),this._stream.removeListener("error",this._handleStreamError),this._state=dt.ended,this._stream.destroy(e)}_handleStreamError(e){this._error=e,this._state=dt.errored;for(const r of this._rejections)r(e)}_handleStreamEnd(){this._state=dt.ended}get state(){return this._state}}class vR extends Sg.EventEmitter{constructor(r,n){super({captureRejections:!0});S(this,"tokenConfig");S(this,"api");S(this,"uploadID");S(this,"token");S(this,"chunkSize");S(this,"batchSize");S(this,"paused",!1);S(this,"isResume",!1);S(this,"uploadOptions");S(this,"arbundles");this.tokenConfig=r,this.arbundles=this.tokenConfig.irys.arbundles,this.api=n,this.token=this.tokenConfig.name,this.chunkSize=25e6,this.batchSize=5,this.uploadID=""}setResumeData(r){return r&&(this.uploadID=r,this.isResume=!0),this}getResumeData(){return this.uploadID}setChunkSize(r){if(r<1)throw new Error("Invalid chunk size (must be >=1)");return this.chunkSize=r,this}setBatchSize(r){if(r<1)throw new Error("Invalid batch size (must be >=1)");return this.batchSize=r,this}pause(){this.emit("pause"),this.paused=!0}resume(){this.paused=!1,this.emit("resume")}async uploadTransaction(r,n){return this.uploadOptions=n,this.arbundles.DataItem.isDataItem(r)?this.runUpload(r.getRaw()):this.runUpload(r)}async uploadData(r,n){return this.uploadOptions=n==null?void 0:n.upload,this.runUpload(r,{...n})}async runUpload(r,n){var c;let s=this.uploadID;const i=n===void 0,a={"x-chunking-version":"2"};let o;if(!s)o=await this.api.get(`/chunks/${this.token}/-1/-1`,{headers:a}),ut.checkAndThrow(o,"Getting upload token"),this.uploadID=s=o.data.id;else{if(o=await this.api.get(`/chunks/${this.token}/${s}/-1`,{headers:a}),o.status===404)throw new Error("Upload ID not found - your upload has probably expired.");if(ut.checkAndThrow(o,"Getting upload info"),this.chunkSize!=+o.data.size)throw new Error(`Chunk size not equal to that of a previous upload (${+o.data.size}).`)}const{max:u,min:f}=o.data;if(this.chunkSize<+f||this.chunkSize>+u)throw new Error(`Chunk size out of allowed range: ${f} - ${u}`);let p=0;const d=(h,y,g)=>new Promise(b=>{Ir(async x=>{await this.api.post(`/chunks/${this.token}/${s}/${y}`,h,{headers:{"Content-Type":"application/octet-stream",...a},maxBodyLength:1/0,maxContentLength:1/0}).then(R=>{if((R==null?void 0:R.status)>=300){const w={res:R,id:g,offset:y,size:h.length};throw this.emit("chunkError",w),(R==null?void 0:R.status)===402&&x(new Error("Not enough funds to send data")),w}this.emit("chunkUpload",{id:g,offset:y,size:h.length,totalUploaded:p+=h.length}),b({o:y,d:R})})})}),A=o.data.chunks??[],T=new gs.PassThrough;let m=Buffer.alloc(0),E=!1,k=!0;T.on("end",()=>E=!0),T.on("error",h=>{throw new Error(`Error processing readable: ${h}`)});const $=async h=>{for(;!E;){if(m.length>=h)return y=Buffer.from(m.slice(0,h)),m=m.slice(h),y;var y=T.read(h);if(y===null){await new Promise(g=>setTimeout(b=>b(!0),0,g));continue}if(y.length===h)return y;m=Buffer.concat([m,y])}for(;m.length>=h;)return y=Buffer.from(m.slice(0,h)),m=m.slice(h),y;return k=!1,m};let I,U;if(!i){I=this.arbundles.createData("",this.tokenConfig.getSigner(),{...n,anchor:(n==null?void 0:n.anchor)??Fh.randomBytes(32).toString("base64").slice(0,32)});const h=I.getRaw();U=h.length,T.write(h),p-=h.length}if(Buffer.isBuffer(r))T.write(r),T.end();else if("pipe"in r)r.pipe(T);else throw new Error("Input data is not a buffer or a compatible stream (no .pipe method)");let B=0;const P=new Set;let D=0,N,L,K;if(!i){L=new gs.PassThrough;const h=I.getRaw().length;if(this.chunkSize<U)throw new Error(`Configured chunk size is too small for transaction header! (${this.chunkSize} < ${U})`);N=await $(this.chunkSize),D++,B+=N.length,L.write(N.slice(h));const y=[this.arbundles.stringToBuffer("dataitem"),this.arbundles.stringToBuffer("1"),this.arbundles.stringToBuffer(I.signatureType.toString()),I.rawOwner,I.rawTarget,I.rawAnchor,I.rawTags,new bR(L)];K=this.arbundles.deepHash(y)}let fe=A.pop();for(;k;){if(this.paused&&await new Promise(g=>this.on("resume",()=>g(void 0))),fe&&+fe[0]-B<=this.chunkSize){const b=fe[1],x=await $(b);i||L.write(x),B+=b,fe=A.pop(),D++,p+=b;continue}const h=await $(this.chunkSize);for(i||L.write(h);P.size>=this.batchSize;){const[g]=await Promise.race(P);P.delete(g)}const y=(async()=>await d(h,B,++D))().then(g=>[y,g]);P.add(y),B+=h.length}if(L&&L.end(),await Promise.all(P),!i){const h=await K,y=Buffer.from(await this.tokenConfig.getSigner().sign(h));N.set(y,2),await d(N,0,0)}const _=await this.api.post(`/chunks/${this.token}/${s}/-1`,null,{headers:{"Content-Type":"application/octet-stream",...a},timeout:((c=this.api.config)==null?void 0:c.timeout)??4e4*10});if(_.status===402)throw new Error("Not enough funds to send data");if(ut.checkAndThrow(_,"Finalising upload",[201]),_.status===201)throw new Error(_.data);return _.data.verify=ut.verifyReceipt.bind({},this.arbundles,_.data.data),this.emit("done",_),_}get completionPromise(){return new Promise(r=>this.on("done",r))}}const Oh=5e7;class _R{constructor(e,r,n,s,i){S(this,"api");S(this,"token");S(this,"tokenConfig");S(this,"utils");S(this,"contentTypeOverride");S(this,"forceUseChunking");S(this,"arbundles");S(this,"irysTransaction");this.api=e,this.token=n,this.tokenConfig=s,this.arbundles=this.tokenConfig.irys.arbundles,this.utils=r,this.irysTransaction=i}async uploadTransaction(e,r){let n;const s=this.arbundles.DataItem.isDataItem(e);if(this.forceUseChunking||s&&e.getRaw().length>=Oh||!s)n=await this.chunkedUploader.uploadTransaction(s?e.getRaw():e,r);else{const{url:i,timeout:a,headers:o}=this.api.getConfig(),u={"Content-Type":"application/octet-stream",...o};if(n=await this.api.post(new URL(`/tx/${this.token}`,i).toString(),e.getRaw(),{headers:u,timeout:a,maxBodyLength:1/0}),n.status===201)throw new Error(n.data)}switch(n.status){case 402:throw new Error("Not enough funds to send data");default:if(n.status>=400)throw new Error(`whilst uploading Irys transaction: ${n.status} ${n.statusText}`)}return n.data.verify=async()=>this.utils.verifyReceipt(n.data),n}async uploadData(e,r){if(typeof e=="string"&&(e=Buffer.from(e)),Buffer.isBuffer(e)&&e.length<=Oh){const n=this.arbundles.createData(e,this.tokenConfig.getSigner(),{...r,anchor:(r==null?void 0:r.anchor)??Jr.randomBytes(32).toString("base64").slice(0,32)});return await n.sign(this.tokenConfig.getSigner()),(await this.uploadTransaction(n,{...r==null?void 0:r.upload})).data}return(await this.chunkedUploader.uploadData(e,r)).data}async concurrentUploader(e,r){const n=[],s=r!=null&&r.logFunction?r==null?void 0:r.logFunction:async o=>{},i=(r==null?void 0:r.concurrency)??5,a=await eg.PromisePool.for(e).withConcurrency(i>=1?i:5).handleError(async(o,u)=>{if(n.push(o),o.message==="Not enough funds to send data")throw o}).process(async(o,u,f)=>{await Ir(async p=>{try{const d=await this.processItem(o,r==null?void 0:r.itemOptions);return u%i==0&&await s(`Processed ${u} Items`),r!=null&&r.resultProcessor?await r.resultProcessor({item:o,res:d,i:u}):{item:o,res:d,i:u}}catch(d){throw(d==null?void 0:d.message)==="Not enough funds to send data"&&p(d),d}},{retries:3,minTimeout:1e3,maxTimeout:1e4})});return{errors:n,results:a.results}}async processItem(e,r){return this.arbundles.DataItem.isDataItem(e)?this.uploadTransaction(e,{...r==null?void 0:r.upload}):this.uploadData(e,r)}async generateManifest(e){const{items:r,indexFile:n}=e,s={manifest:"arweave/paths",version:"0.1.0",paths:{}};if(n){if(!r.has(n))throw new Error(`Unable to access item: ${n}`);s.index={path:n}}for(const[i,a]of r.entries())s.paths[i]={id:a};return s}get chunkedUploader(){return new vR(this.tokenConfig,this.api)}set useChunking(e){typeof e=="boolean"&&(this.forceUseChunking=e)}set contentType(e){this.contentTypeOverride=e}async uploadBundle(e,r){const n=(r==null?void 0:r.throwawayKey)??await this.arbundles.getCryptoDriver().generateJWK(),s=new ta(n),i=e.map(p=>this.arbundles.DataItem.isDataItem(p)?p:this.arbundles.createData(p,s)),a=await this.arbundles.bundleAndSignData(i,s),o=this.arbundles.createData(a.getRaw(),this.tokenConfig.getSigner(),{tags:[{name:"Bundle-Format",value:"binary"},{name:"Bundle-Version",value:"2.0.0"}]});await o.sign(this.tokenConfig.getSigner());const u=await this.uploadTransaction(o,r),f=J(Buffer.from(await this.arbundles.getCryptoDriver().hash(J.toBuffer(J(s.publicKey)))));return{...u,txs:i,throwawayKey:n,throwawayKeyAddress:f}}}class Ch extends _R{constructor(r){super(r.api,r.utils,r.token,r.tokenConfig,r.IrysTransaction);S(this,"irys");this.irys=r}async uploadFile(r,n){const i=(n!=null&&n.tags?n.tags.some(({name:a})=>a.toLowerCase()==="content-type"):!1)?n==null?void 0:n.tags:[...(n==null?void 0:n.tags)??[],{name:"Content-Type",value:r.type}];return this.uploadData(Buffer.from(await r.arrayBuffer()),{tags:i,...n})}async uploadFolder(r,n){const s=[],i=new Map,a=(n==null?void 0:n.throwawayKey)??await this.irys.arbundles.getCryptoDriver().generateJWK(),o=new ta(a);for(const d of r){const A=d.webkitRelativePath?d.webkitRelativePath:d.name,m=(d.tags?d.tags.some(({name:k})=>k.toLowerCase()==="content-type"):!1)?d.tags:[...d.tags??[],{name:"Content-Type",value:d.type}],E=this.irys.arbundles.createData(Buffer.from(await d.arrayBuffer()),o,{tags:m});await E.sign(o),s.push(E),i.set(A,E.id)}const u=await this.generateManifest({items:i,indexFile:n==null?void 0:n.indexFileRelPath}),f=this.irys.arbundles.createData(JSON.stringify(u),n!=null&&n.seperateManifestTx?this.irys.tokenConfig.getSigner():o,{tags:[{name:"Type",value:"manifest"},{name:"Content-Type",value:"application/x.arweave-manifest+json"},...(n==null?void 0:n.manifestTags)??[]]});(n==null?void 0:n.seperateManifestTx)===!0?(await f.sign(this.irys.tokenConfig.getSigner()),await this.uploadTransaction(f,{...n})):(await f.sign(o),s.push(f));const p=await this.uploadBundle(s,{...n});return{...p.data,manifestId:f.id,manifest:u,throwawayKey:p.throwawayKey,throwawayKeyAddress:p.throwawayKeyAddress,txs:p.txs}}}class ER extends zc{constructor({url:r,token:n,wallet:s,config:i}){switch(r){case void 0:case"node1":r="https://node1.irys.xyz";break;case"node2":r="https://node2.irys.xyz";break;case"devnet":r="https://devnet.irys.xyz";break}const a=new URL(r);super({url:a,arbundles:e_});S(this,"tokenConfig");S(this,"uploader");S(this,"uploadFolder");S(this,"uploadFile");if(this.api=new Sw({url:a,timeout:(i==null?void 0:i.timeout)??1e5,headers:i==null?void 0:i.headers}),this.tokenConfig=cR({irys:this,token:n.toLowerCase(),wallet:s==null?void 0:s.provider,providerUrl:(i==null?void 0:i.providerUrl)??(s==null?void 0:s.rpcUrl),contractAddress:i==null?void 0:i.contractAddress,providerName:s==null?void 0:s.name}),this.token=this.tokenConfig.name,a.host==="devnet.irys.network"&&!((i==null?void 0:i.providerUrl)??((s==null?void 0:s.rpcUrl)||this.tokenConfig.inheritsRPC)))throw new Error(`Using ${a.host} requires a dev/testnet RPC to be configured! see https://docs.irys.network/sdk/using-devnet`);this.utils=new ut(this.api,this.token,this.tokenConfig),this.uploader=new Ch(this),this.funder=new Aw(this.utils),this.uploader=new Ch(this),this.provenance=new uR(this),this.transactions=new lR(this),this.address="Please run `await Irys.ready()`",this.uploadFolder=this.uploader.uploadFolder.bind(this.uploader),this.uploadFile=this.uploader.uploadFile.bind(this.uploader)}}const GR=ER;export{GR as WebIrys,GR as default};
